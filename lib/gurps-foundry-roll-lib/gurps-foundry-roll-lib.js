var GurpsFoundryRollLib=function(t){var e={};function o(l){if(e[l])return e[l].exports;var r=e[l]={i:l,l:!1,exports:{}};return t[l].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=t,o.c=e,o.d=function(t,e,l){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:l})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var l=Object.create(null);if(o.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(l,r,function(e){return t[e]}.bind(null,r));return l},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=5)}([function(t,e,o){var l=o(1);l.prototype.formulaEval=function(){"use strict";for(var t,e,o,l=[],r=this.value,n=0;n<r.length;n++)1===r[n].type||3===r[n].type?l.push({value:3===r[n].type?r[n].show:r[n].value,type:1}):13===r[n].type?l.push({value:r[n].show,type:1}):0===r[n].type?l[l.length-1]={value:r[n].show+("-"!=r[n].show?"(":"")+l[l.length-1].value+("-"!=r[n].show?")":""),type:0}:7===r[n].type?l[l.length-1]={value:(1!=l[l.length-1].type?"(":"")+l[l.length-1].value+(1!=l[l.length-1].type?")":"")+r[n].show,type:7}:10===r[n].type?(t=l.pop(),e=l.pop(),"P"===r[n].show||"C"===r[n].show?l.push({value:"<sup>"+e.value+"</sup>"+r[n].show+"<sub>"+t.value+"</sub>",type:10}):l.push({value:(1!=e.type?"(":"")+e.value+(1!=e.type?")":"")+"<sup>"+t.value+"</sup>",type:1})):2===r[n].type||9===r[n].type?(t=l.pop(),e=l.pop(),l.push({value:(1!=e.type?"(":"")+e.value+(1!=e.type?")":"")+r[n].show+(1!=t.type?"(":"")+t.value+(1!=t.type?")":""),type:r[n].type})):12===r[n].type&&(t=l.pop(),e=l.pop(),o=l.pop(),l.push({value:r[n].show+"("+o.value+","+e.value+","+t.value+")",type:12}));return l[0].value},t.exports=l},function(t,e,o){var l=o(2);l.prototype.postfixEval=function(t){"use strict";(t=t||{}).PI=Math.PI,t.E=Math.E;for(var e,o,r,n=[],i=this.value,s=void 0!==t.n,a=0;a<i.length;a++)1===i[a].type?n.push({value:i[a].value,type:1}):3===i[a].type?n.push({value:t[i[a].value],type:1}):0===i[a].type||7===i[a].type?void 0===n[n.length-1].type?n[n.length-1].value.push(i[a]):n[n.length-1].value=i[a].value(n[n.length-1].value):8===i[a].type?(e=n.pop(),o=n.pop(),n.push({type:1,value:i[a].value(o.value,e.value)})):10===i[a].type?(e=n.pop(),void 0===(o=n.pop()).type?(o.value=o.concat(e),o.value.push(i[a]),n.push(o)):void 0===e.type?(e.unshift(o),e.push(i[a]),n.push(e)):n.push({type:1,value:i[a].value(o.value,e.value)})):2===i[a].type||9===i[a].type?(e=n.pop(),void 0===(o=n.pop()).type?(console.log(o),(o=o.concat(e)).push(i[a]),n.push(o)):void 0===e.type?(e.unshift(o),e.push(i[a]),n.push(e)):n.push({type:1,value:i[a].value(o.value,e.value)})):12===i[a].type?(void 0!==(e=n.pop()).type&&(e=[e]),o=n.pop(),r=n.pop(),n.push({type:1,value:i[a].value(r.value,o.value,new l(e))})):13===i[a].type&&(s?n.push({value:t[i[a].value],type:3}):n.push([i[a]]));if(n.length>1)throw new l.exception("Uncaught Syntax error");return n[0].value>1e15?"Infinity":parseFloat(n[0].value.toFixed(15))},l.eval=function(t,e,o){return void 0===e?this.lex(t).toPostfix().postfixEval():void 0===o?void 0!==e.length?this.lex(t,e).toPostfix().postfixEval():this.lex(t).toPostfix().postfixEval(e):this.lex(t,e).toPostfix().postfixEval(o)},t.exports=l},function(t,e,o){var l=o(3);l.prototype.toPostfix=function(){"use strict";for(var t,e,o,r,n,i=[],s=[{value:"(",type:4,pre:0}],a=this.value,u=1;u<a.length;u++)if(1===a[u].type||3===a[u].type||13===a[u].type)1===a[u].type&&(a[u].value=Number(a[u].value)),i.push(a[u]);else if(4===a[u].type)s.push(a[u]);else if(5===a[u].type)for(;4!==(e=s.pop()).type;)i.push(e);else if(11===a[u].type){for(;4!==(e=s.pop()).type;)i.push(e);s.push(e)}else{r=(t=a[u]).pre,o=(n=s[s.length-1]).pre;var h="Math.pow"==n.value&&"Math.pow"==t.value;if(r>o)s.push(t);else{for(;o>=r&&!h||h&&r<o;)e=s.pop(),n=s[s.length-1],i.push(e),o=n.pre,h="Math.pow"==t.value&&"Math.pow"==n.value;s.push(t)}}return new l(i)},t.exports=l},function(t,e,o){var l=o(4);function r(t,e){for(var o=0;o<t.length;o++)t[o]+=e;return t}var n=["sin","cos","tan","pi","(",")","P","C","asin","acos","atan","7","8","9","int","cosh","acosh","ln","^","root","4","5","6","/","!","tanh","atanh","Mod","1","2","3","*","sinh","asinh","e","log","0",".","+","-",",","Sigma","n","Pi","pow"],i=["sin","cos","tan","&pi;","(",")","P","C","asin","acos","atan","7","8","9","Int","cosh","acosh"," ln","^","root","4","5","6","&divide;","!","tanh","atanh"," Mod ","1","2","3","&times;","sinh","asinh","e"," log","0",".","+","-",",","&Sigma;","n","&Pi;","pow"],s=[l.math.sin,l.math.cos,l.math.tan,"PI","(",")",l.math.P,l.math.C,l.math.asin,l.math.acos,l.math.atan,"7","8","9",Math.floor,l.math.cosh,l.math.acosh,Math.log,Math.pow,Math.sqrt,"4","5","6",l.math.div,l.math.fact,l.math.tanh,l.math.atanh,l.math.mod,"1","2","3",l.math.mul,l.math.sinh,l.math.asinh,"E",l.math.log,"0",".",l.math.add,l.math.sub,",",l.math.sigma,"n",l.math.Pi,Math.pow],a={0:11,1:0,2:3,3:0,4:0,5:0,6:0,7:11,8:11,9:1,10:10,11:0,12:11,13:0},u=[0,0,0,3,4,5,10,10,0,0,0,1,1,1,0,0,0,0,10,0,1,1,1,2,7,0,0,2,1,1,1,2,0,0,3,0,1,6,9,9,11,12,13,12,8],h={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,9:!0,12:!0,13:!0},p={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0,10:!0,11:!0,12:!0,13:!0},d={0:!0,3:!0,4:!0,8:!0,12:!0,13:!0},c={},f={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,12:!0,13:!0},m={1:!0},v=[[],["1","2","3","7","8","9","4","5","6","+","-","*","/","(",")","^","!","P","C","e","0",".",",","n"],["pi","ln","Pi"],["sin","cos","tan","Del","int","Mod","log","pow"],["asin","acos","atan","cosh","root","tanh","sinh"],["acosh","atanh","asinh","Sigma"]];function g(t,e,o,l){for(var r=0;r<l;r++)if(t[o+r]!==e[r])return!1;return!0}l.addToken=function(t){for(var e=0;e<t.length;e++){var o=t[e].token.length,l=-1;if(o<v.length)for(var r=0;r<v[o].length;r++)if(t[e].token===v[o][r]){l=n.indexOf(v[o][r]);break}-1===l?(n.push(t[e].token),u.push(t[e].type),v.length<=t[e].token.length&&(v[t[e].token.length]=[]),v[t[e].token.length].push(t[e].token),s.push(t[e].value),i.push(t[e].show)):(n[l]=t[e].token,u[l]=t[e].type,s[l]=t[e].value,i[l]=t[e].show)}},l.lex=function(t,e){"use strict";var o,y,_,R,w={value:l.math.changeSign,type:0,pre:21,show:"-"},M={value:")",show:")",type:5,pre:0},b={value:"(",type:4,pre:0,show:"("},$=[b],x=[],F=t,S=h,L=0,D=c,P="";void 0!==e&&l.addToken(e);var E={};for(y=0;y<F.length;y++)if(" "!==F[y]){for(o="",_=F.length-y>v.length-2?v.length-1:F.length-y;_>0;_--)if(void 0!==v[_])for(R=0;R<v[_].length;R++)g(F,v[_][R],y,_)&&(o=v[_][R],R=v[_].length,_=0);if(y+=o.length-1,""===o)throw new l.Exception("Can't understand after "+F.slice(y));var C,G=n.indexOf(o),O=o,T=u[G],j=s[G],I=a[T],k=i[G],W=$[$.length-1];for(C=x.length;C--&&0===x[C];)if(-1!==[0,2,3,4,5,9,11,12,13].indexOf(T)){if(!0!==S[T])throw new l.Exception(o+" is not allowed after "+P);$.push(M),S=p,D=f,r(x,-1).pop()}if(!0!==S[T])throw new l.Exception(o+" is not allowed after "+P);if(!0===D[T]&&(T=2,j=l.math.mul,k="&times;",I=3,y-=o.length),E={value:j,type:T,pre:I,show:k},0===T)S=h,D=c,r(x,2).push(2),$.push(E),$.push(b);else if(1===T)1===W.type?(W.value+=j,r(x,1)):$.push(E),S=p,D=d;else if(2===T)S=h,D=c,r(x,2),$.push(E);else if(3===T)$.push(E),S=p,D=f;else if(4===T)r(x,1),L++,S=h,D=c,$.push(E);else if(5===T){if(!L)throw new l.Exception("Closing parenthesis are more than opening one, wait What!!!");L--,S=p,D=f,$.push(E)}else if(6===T){if(W.hasDec)throw new l.Exception("Two decimals are not allowed in one number");1!==W.type&&(W={value:0,type:1,pre:0},$.push(W),r(x,-1)),S=m,r(x,1),D=c,W.value+=j,W.hasDec=!0}else 7===T&&(S=p,D=f,r(x,1),$.push(E));8===T?(S=h,D=c,r(x,4).push(4),$.push(E),$.push(b)):9===T?(9===W.type?W.value===l.math.add?(W.value=j,W.show=k,r(x,1)):W.value===l.math.sub&&"-"===k&&(W.value=l.math.add,W.show="+",r(x,1)):5!==W.type&&7!==W.type&&1!==W.type&&3!==W.type&&13!==W.type?"-"===O&&(S=h,D=c,r(x,2).push(2),$.push(w),$.push(b)):($.push(E),r(x,2)),S=h,D=c):10===T?(S=h,D=c,r(x,2),$.push(E)):11===T?(S=h,D=c,$.push(E)):12===T?(S=h,D=c,r(x,6).push(6),$.push(E),$.push(b)):13===T&&(S=p,D=f,$.push(E)),r(x,-1),P=o}for(C=x.length;C--&&0===x[C];)$.push(M),r(x,-1).pop();if(!0!==S[5])throw new l.Exception("complete the expression");for(;L--;)$.push(M);return $.push(M),new l($)},t.exports=l},function(t,e){var o=function(t){this.value=t};o.math={isDegree:!0,acos:function(t){return o.math.isDegree?180/Math.PI*Math.acos(t):Math.acos(t)},add:function(t,e){return t+e},asin:function(t){return o.math.isDegree?180/Math.PI*Math.asin(t):Math.asin(t)},atan:function(t){return o.math.isDegree?180/Math.PI*Math.atan(t):Math.atan(t)},acosh:function(t){return Math.log(t+Math.sqrt(t*t-1))},asinh:function(t){return Math.log(t+Math.sqrt(t*t+1))},atanh:function(t){return Math.log((1+t)/(1-t))},C:function(t,e){var l=1,r=t-e,n=e;n<r&&(n=r,r=e);for(var i=n+1;i<=t;i++)l*=i;return l/o.math.fact(r)},changeSign:function(t){return-t},cos:function(t){return o.math.isDegree&&(t=o.math.toRadian(t)),Math.cos(t)},cosh:function(t){return(Math.pow(Math.E,t)+Math.pow(Math.E,-1*t))/2},div:function(t,e){return t/e},fact:function(t){if(t%1!=0)return"NaN";for(var e=1,o=2;o<=t;o++)e*=o;return e},inverse:function(t){return 1/t},log:function(t){return Math.log(t)/Math.log(10)},mod:function(t,e){return t%e},mul:function(t,e){return t*e},P:function(t,e){for(var o=1,l=Math.floor(t)-Math.floor(e)+1;l<=Math.floor(t);l++)o*=l;return o},Pi:function(t,e,o){for(var l=1,r=t;r<=e;r++)l*=Number(o.postfixEval({n:r}));return l},pow10x:function(t){for(var e=1;t--;)e*=10;return e},sigma:function(t,e,o){for(var l=0,r=t;r<=e;r++)l+=Number(o.postfixEval({n:r}));return l},sin:function(t){return o.math.isDegree&&(t=o.math.toRadian(t)),Math.sin(t)},sinh:function(t){return(Math.pow(Math.E,t)-Math.pow(Math.E,-1*t))/2},sub:function(t,e){return t-e},tan:function(t){return o.math.isDegree&&(t=o.math.toRadian(t)),Math.tan(t)},tanh:function(t){return o.sinha(t)/o.cosha(t)},toRadian:function(t){return t*Math.PI/180}},o.Exception=function(t){this.message=t},t.exports=o},function(t,e,o){"use strict";o.r(e),o.d(e,"DamageRoll",(function(){return a})),o.d(e,"ReactionRoll",(function(){return u})),o.d(e,"SuccessRoll",(function(){return h})),o.d(e,"DamageRollRenderer",(function(){return d})),o.d(e,"ReactionRollRenderer",(function(){return c})),o.d(e,"SuccessRollRenderer",(function(){return f}));class l{constructor(){this._foundryRoll=null}get evaluatedFormula(){return this._foundryRoll.formula}get total(){return this._foundryRoll.total}get foundryDice(){return this._foundryRoll.dice}roll(){return this._foundryRoll.roll(),this}}var r=o(0),n=o.n(r);class i{static successRollFormula(t){const e=(t+"").match(/^(?:([a-zA-Z][^-\r\n\f\v\0]*)-)?( *\d+)((?: *[+-] *[0-9]+ *(?: *\([^\r\n\f\v\0()]+\) *)?)*)$/);if(null===e)throw new Error(`Can't parse success roll formula '${t}' - it must adhere to the following format: [<trait name beginning with a letter and containing no - signs>-]<level>[<numeric modifiers including the + and - signs, and optionally spaces>]`);return{trait:e[1]||null,level:parseInt(e[2],10),modifiers:e[3]||null}}static modList(t){const e=[];for(;t.length>0;){const o=t.match(/^( *[+-] *[0-9]+ *(?: *\([^\r\n\f\v\0()]+\) *)?)+$/);if(null===o)throw new Error(`Can't parse modifier list formula '${t}' - it must adhere to the following format: <mandatory numeric modifier including the + or - sign>[<optional modifier description enclosed in parenthesis>], occurring one or more times`);const l=o[1];t=t.substr(0,t.length-l.length);const r=l.trim().match(/^([+-] *[0-9]+) *(?: *\(([^\r\n\f\v\0()]+)\))?$/);e.push({modifier:r[1].replace(/\s/,""),description:void 0!==r[2]?r[2].trim():""})}return e}static damageRollFormula(t){const e=(t+"").match(/^([1-9][0-9]*)d6?((?: *[+-] *[0-9]+ *(?: *\([^\d\r\n\f\v\0()][^\r\n\f\v\0()]*\) *)?)*)(.*)$/);if(null===e)throw new Error(`Can't parse damage roll formula '${t}' - it must adhere to the following format: <number of dice>d[<numeric modifiers including the + and - signs, and optionally spaces>][<extra non-roll information such as armor divisor, damage type etc>]`);return{dice:parseInt(e[1],10),adds:e[2]||"",meta:e[3]||""}}}const s=t=>t.map(t=>{let e=parseInt(t.modifier,10);return e>0?e="+"+e:e<0&&(e=""+e),{...t,modifier:e}});class a extends l{static fromFormula(t){return new a({formula:t})}static fromData({dice:t,adds:e="",meta:o="",modList:l=[]}){return new a({dice:t,adds:e,meta:o,modList:l})}constructor({dice:t=null,adds:e="",meta:o="",formula:l=null,modList:r=[]}){if(super(),null===l&&null===t)throw new Error("Attempted to create a DamageRoll with both dice and formula equal to null; at least one of them must be non-null!");if(null!==l){const n=i.damageRollFormula(l);t=n.dice,e=n.adds,o=n.meta,e.length>0&&(r=i.modList(e),e=(r=s(r)).pop().modifier,r=r.reverse())}else l=r.length>0?`${t}d${e} ${(r=s(r)).map(t=>t.modifier).join(" ")} ${o}`:`${t}d${e} ${o}`;l=(l=l.replace(/\s+/," ")).trim(),this._formula=l,this._formulaWithoutModList=`${t}d${e}`,this._meta=o,this._modList=r,r.length>0&&(e=`${e} ${r.map(t=>t.modifier).join(" ")}`),this._foundryRoll=new Roll(`${t}d6+${n.a.eval((e||0).toString())}`)}get formula(){return this._formula}get formulaWithoutModList(){return this._formulaWithoutModList}get meta(){return this._meta}get modList(){return this._modList}}class u extends l{static fromData(t=null){return new u({modifiers:t&&t.modifiers||null})}constructor({modifiers:t=null}){if(super(),this._evaluatedModifiers=null,t){const e=(t+"").match(/^(( *[+-] *[0-9]+)*)/);if(null===e)throw new Error(`Can't parse ReactionRoll modifiers formula '${t}' - it must comprise of numeric modifiers including the + and - signs, and optionally spaces between them`);this._evaluatedModifiers=n.a.eval(e[1].toString()),this._foundryRoll=new Roll("3d6+"+this._evaluatedModifiers)}else this._evaluatedModifiers=0,this._foundryRoll=new Roll("3d6");this._modifiers=t,this._total=null}get modifiers(){return this._modifiers}get evaluatedModifiers(){return this._evaluatedModifiers}get total(){return this._foundryRoll._rolled?this._total:null}roll(){return super.roll(),this._total="Disastrous",this._foundryRoll.total>=1&&(this._total="Very Bad"),this._foundryRoll.total>=4&&(this._total="Bad"),this._foundryRoll.total>=7&&(this._total="Poor"),this._foundryRoll.total>=10&&(this._total="Neutral"),this._foundryRoll.total>=13&&(this._total="Good"),this._foundryRoll.total>=16&&(this._total="Very Good"),this._foundryRoll.total>=19&&(this._total="Excellent"),this}}class h extends l{static fromFormula(t){return new h({formula:t})}static fromData({level:t,trait:e=null,modifiers:o=null,modList:l=[]}){return new h({level:t,trait:e,modifiers:o,modList:l})}constructor({level:t=null,trait:e=null,formula:o=null,modifiers:l=null,modList:r=[]}){if(super(),null===o&&null===t)throw new Error("Attempted to create a SuccessRoll with both level and formula equal to null; at least one of them must be non-null!");if(null!==o){const n=i.successRollFormula(o);e=n.trait,t=n.level,r=null!==(l=n.modifiers)?i.modList(l):[]}else 0===r.length&&(r=null!==l?i.modList(l):[]);t=parseInt(t,10),l=(r=(r=s(r)).reverse()).length>0?r.map(t=>t.modifier).join(" "):null,this._foundryRoll=new Roll("3d6"),this._level=t,this._trait=e,this._modifiers=l,this._modList=r,this._evaluatedModifiers=r.reduce((t,e)=>t+n.a.eval(e.modifier.toString()),0),this._isSuccess=null,this._marginOfSuccess=null,this._isCritFail=!1,this._isCritSuccess=!1}get level(){return this._level}get trait(){return this._trait}get modifiers(){return this._modifiers}get modList(){return this._modList}get evaluatedLevel(){return this.level+this._evaluatedModifiers}get isSuccess(){return this._foundryRoll._rolled?this._isSuccess:null}get marginOfSuccess(){return this._foundryRoll._rolled?this._marginOfSuccess:null}get isCritFail(){return this._foundryRoll._rolled?this._isCritFail:null}get isCritSuccess(){return this._foundryRoll._rolled?this._isCritSuccess:null}roll(){return super.roll(),this._marginOfSuccess=this.level-this.total+this._evaluatedModifiers,this._isSuccess=this._marginOfSuccess>=0,(this.total<=4||this.total<=6&&this.marginOfSuccess>=10)&&(this._isCritSuccess=!0,this._isSuccess=!0),17===this.total&&(this._isSuccess=!1),(18===this.total||17===this.total&&this.level+this._evaluatedModifiers<=15||this.marginOfSuccess<=-10)&&(this._isCritFail=!0,this._isSuccess=!1),this}}class p{getTooltip(t){const e=this,o={formula:t.evaluatedFormula,total:t.total,parts:t.foundryDice.map(t=>{const o=e._getWorstDieFace(t),l=e._getBestDieFace(t);return{formula:t.formula,total:t.total,faces:t.faces,rolls:t.rolls.map(e=>({result:e.roll,classes:[t.constructor.name.toLowerCase(),"d"+t.faces,e.roll===o?"min":null,e.roll===l?"max":null].filter(t=>t).join(" ")}))}})};return renderTemplate(CONFIG.Dice.tooltip,o)}_getMouseover(t){return null}_getBestDieFace(t){return Math.max(...t.sides)}_getWorstDieFace(t){return Math.min(...t.sides)}async render(t,e={},o={}){return e=mergeObject({template:"modules/GURPS-Foundry-Roll-Templates/templates/roll.html",useTooltip:!0,useMouseover:!0},e),o=mergeObject({user:game.user._id,flavor:null,formula:this._getFormula(t),tooltip:e.useTooltip?await this.getTooltip(t):"",mouseover:e.useMouseover?await this._getMouseover(t):null,total:this._getTotal(t)},o),renderTemplate(e.template,o)}_getFormula(t){return t.evaluatedFormula}_getTotal(t){return Math.round(100*t.total)/100}}class d extends p{_getFormula(t){return t.formula}_getTotal(t){return`${t.total}${t.meta}`}_getMouseover(t){if(0===t.modList.length)return null;if(t.modList.every(t=>null===t.description||void 0===t.description||0===t.description.length))return null;const e="margin: 0; padding: 0; line-height: 0.9rem;";return`<ul style="list-style-type: none; margin: 0; padding: 0;"><li style="${e}">${t.formulaWithoutModList} base</li>${t.modList.map(t=>`<li style="${e}">${t.modifier} ${t.description}</li>`).join("")}</ul>`}}class c extends p{_getFormula(t){return t.modifiers?`Reaction roll with ${t.modifiers}<b style="padding-left: 10px">= ${t.evaluatedModifiers}</b>`:"Reaction roll"}_getTotal(t){return t.total}}class f extends p{_getBestDieFace(t){return Math.min(...t.sides)}_getWorstDieFace(t){return Math.max(...t.sides)}_getFormula(t){let e=this._getFormulaWithoutMods(t);return null!==t.modifiers&&(e=`${e} ${t.modifiers}<b> = ${t.evaluatedLevel}</b>`),e}_getFormulaWithoutMods(t){return`${t.trait?t.trait+"-":"Rolled against "}${t.level}`}_getTotal(t){let e=t.isSuccess?"Success":"Failure";if(t.isCritSuccess||t.isCritFail){e=`<b style="color:${t.isCritSuccess?"#008800":"#DD0000"}">Critical ${e}</b>`}return`${e} by ${t.isSuccess?t.marginOfSuccess:-t.marginOfSuccess}`}_getMouseover(t){if(0===t.modList.length)return null;if(t.modList.every(t=>null===t.description||void 0===t.description||0===t.description.length))return null;const e="margin: 0; padding: 0; line-height: 0.9rem;";return`<ul style="list-style-type: none; margin: 0; padding: 0;"><li style="${e}">${this._getFormulaWithoutMods(t)}</li>${t.modList.map(t=>`<li style="${e}">${t.modifier} ${t.description}</li>`).join("")}</ul>`}}}]);const _GurpsFoundryRollLib$DamageRoll=GurpsFoundryRollLib.DamageRoll,_GurpsFoundryRollLib$ReactionRoll=GurpsFoundryRollLib.ReactionRoll,_GurpsFoundryRollLib$SuccessRoll=GurpsFoundryRollLib.SuccessRoll,_GurpsFoundryRollLib$DamageRollRenderer=GurpsFoundryRollLib.DamageRollRenderer,_GurpsFoundryRollLib$ReactionRollRenderer=GurpsFoundryRollLib.ReactionRollRenderer,_GurpsFoundryRollLib$SuccessRollRenderer=GurpsFoundryRollLib.SuccessRollRenderer;export{_GurpsFoundryRollLib$DamageRoll as DamageRoll,_GurpsFoundryRollLib$ReactionRoll as ReactionRoll,_GurpsFoundryRollLib$SuccessRoll as SuccessRoll,_GurpsFoundryRollLib$DamageRollRenderer as DamageRollRenderer,_GurpsFoundryRollLib$ReactionRollRenderer as ReactionRollRenderer,_GurpsFoundryRollLib$SuccessRollRenderer as SuccessRollRenderer};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9HdXJwc0ZvdW5kcnlSb2xsTGliL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL0d1cnBzRm91bmRyeVJvbGxMaWIvLi9ub2RlX21vZHVsZXMvbWF0aC1leHByZXNzaW9uLWV2YWx1YXRvci9zcmMvZm9ybXVsYV9ldmFsdWF0b3IuanMiLCJ3ZWJwYWNrOi8vR3VycHNGb3VuZHJ5Um9sbExpYi8uL25vZGVfbW9kdWxlcy9tYXRoLWV4cHJlc3Npb24tZXZhbHVhdG9yL3NyYy9wb3N0Zml4X2V2YWx1YXRvci5qcyIsIndlYnBhY2s6Ly9HdXJwc0ZvdW5kcnlSb2xsTGliLy4vbm9kZV9tb2R1bGVzL21hdGgtZXhwcmVzc2lvbi1ldmFsdWF0b3Ivc3JjL3Bvc3RmaXguanMiLCJ3ZWJwYWNrOi8vR3VycHNGb3VuZHJ5Um9sbExpYi8uL25vZGVfbW9kdWxlcy9tYXRoLWV4cHJlc3Npb24tZXZhbHVhdG9yL3NyYy9sZXhlci5qcyIsIndlYnBhY2s6Ly9HdXJwc0ZvdW5kcnlSb2xsTGliLy4vbm9kZV9tb2R1bGVzL21hdGgtZXhwcmVzc2lvbi1ldmFsdWF0b3Ivc3JjL21hdGhfZnVuY3Rpb24uanMiLCJ3ZWJwYWNrOi8vR3VycHNGb3VuZHJ5Um9sbExpYi8uL3NyYy9qcy9Sb2xsL0Fic3RyYWN0Um9sbC5qcyIsIndlYnBhY2s6Ly9HdXJwc0ZvdW5kcnlSb2xsTGliLy4vc3JjL2pzL1JvbGwvRm9ybXVsYVBhcnNlci5qcyIsIndlYnBhY2s6Ly9HdXJwc0ZvdW5kcnlSb2xsTGliLy4vc3JjL2pzL1JvbGwvTW9kTGlzdC5qcyIsIndlYnBhY2s6Ly9HdXJwc0ZvdW5kcnlSb2xsTGliLy4vc3JjL2pzL1JvbGwvRGFtYWdlUm9sbC5qcyIsIndlYnBhY2s6Ly9HdXJwc0ZvdW5kcnlSb2xsTGliLy4vc3JjL2pzL1JvbGwvUmVhY3Rpb25Sb2xsLmpzIiwid2VicGFjazovL0d1cnBzRm91bmRyeVJvbGxMaWIvLi9zcmMvanMvUm9sbC9TdWNjZXNzUm9sbC5qcyIsIndlYnBhY2s6Ly9HdXJwc0ZvdW5kcnlSb2xsTGliLy4vc3JjL2pzL1JlbmRlcmVyL0Fic3RyYWN0Um9sbFJlbmRlcmVyLmpzIiwid2VicGFjazovL0d1cnBzRm91bmRyeVJvbGxMaWIvLi9zcmMvanMvUmVuZGVyZXIvRGFtYWdlUm9sbFJlbmRlcmVyLmpzIiwid2VicGFjazovL0d1cnBzRm91bmRyeVJvbGxMaWIvLi9zcmMvanMvUmVuZGVyZXIvUmVhY3Rpb25Sb2xsUmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vR3VycHNGb3VuZHJ5Um9sbExpYi8uL3NyYy9qcy9SZW5kZXJlci9TdWNjZXNzUm9sbFJlbmRlcmVyLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiTWV4cCIsImZvcm11bGFFdmFsIiwicG9wMSIsInBvcDIiLCJwb3AzIiwiZGlzcCIsImFyciIsInRoaXMiLCJsZW5ndGgiLCJ0eXBlIiwicHVzaCIsInNob3ciLCJwb3AiLCJwb3N0Zml4RXZhbCIsIlVzZXJEZWZpbmVkIiwiUEkiLCJNYXRoIiwiRSIsInN0YWNrIiwiYm9vbCIsImNvbmNhdCIsInVuc2hpZnQiLCJjb25zb2xlIiwibG9nIiwiZXhjZXB0aW9uIiwicGFyc2VGbG9hdCIsInRvRml4ZWQiLCJldmFsIiwic3RyIiwidG9rZW5zIiwib2JqIiwibGV4IiwidG9Qb3N0Zml4IiwiZWxlbSIsInBvcHBlZCIsInByZXAiLCJwcmUiLCJlbGUiLCJwb3N0IiwiTnVtYmVyIiwiZmxhZyIsImluYyIsInZhbCIsInRva2VuIiwiZXZhIiwibWF0aCIsInNpbiIsImNvcyIsInRhbiIsIlAiLCJDIiwiYXNpbiIsImFjb3MiLCJhdGFuIiwiZmxvb3IiLCJjb3NoIiwiYWNvc2giLCJwb3ciLCJzcXJ0IiwiZGl2IiwiZmFjdCIsInRhbmgiLCJhdGFuaCIsIm1vZCIsIm11bCIsInNpbmgiLCJhc2luaCIsImFkZCIsInN1YiIsInNpZ21hIiwiUGkiLCJwcmVjZWQiLCIwIiwiMSIsIjIiLCIzIiwiNCIsIjUiLCI2IiwiNyIsIjgiLCI5IiwiMTAiLCIxMSIsIjEyIiwiMTMiLCJ0eXBlMCIsInR5cGUxIiwidHlwZTFBc3RlcmljayIsImVtcHR5IiwidHlwZTNBc3RlcmljayIsInR5cGU2IiwibmV3QXIiLCJtYXRjaCIsInN0cjEiLCJzdHIyIiwieCIsImYiLCJhZGRUb2tlbiIsInRlbXAiLCJ5IiwiaW5kZXhPZiIsImlucCIsImNoYW5nZVNpZ25PYmoiLCJjaGFuZ2VTaWduIiwiY2xvc2luZ1Bhck9iaiIsIm9wZW5pbmdQYXJPYmoiLCJwdGMiLCJpbnBTdHIiLCJhbGxvd2VkIiwiYnJhY1RvQ2xvc2UiLCJhc3RlcmljayIsInByZXZLZXkiLCJ1bmRlZmluZWQiLCJFeGNlcHRpb24iLCJzbGljZSIsImoiLCJpbmRleCIsImNUb2tlbiIsImNUeXBlIiwiY0V2IiwiY1ByZSIsImNTaG93IiwiaGFzRGVjIiwicGFyc2VkIiwiaXNEZWdyZWUiLCJhIiwiYiIsInBybyIsIm90aGVyIiwiY2hvaWNlIiwidG9SYWRpYW4iLCJpbnZlcnNlIiwibG93IiwiaGlnaCIsImV4IiwicG93MTB4IiwiZSIsInN1bSIsInNpbmhhIiwiY29zaGEiLCJtZXNzYWdlIiwiQWJzdHJhY3RSb2xsIiwiX2ZvdW5kcnlSb2xsIiwiZm9ybXVsYSIsInRvdGFsIiwiZGljZSIsInJvbGwiLCJGb3JtdWxhUGFyc2VyIiwicmVnZXhNYXRjaCIsIkVycm9yIiwidHJhaXQiLCJsZXZlbCIsInBhcnNlSW50IiwibW9kaWZpZXJzIiwibW9kaWZpZXJzRm9ybXVsYUxlZnRUb01hdGNoIiwibW9kTGlzdCIsImZvcm11bGFNYXRjaCIsInNpbmdsZU1vZEV4cHJlc3Npb24iLCJzdWJzdHIiLCJzaW5nbGVNb2RFeHByZXNzaW9uTWF0Y2giLCJ0cmltIiwibW9kaWZpZXIiLCJyZXBsYWNlIiwiZGVzY3JpcHRpb24iLCJhZGRzIiwibWV0YSIsImNhbm9uaWNpemVNb2RMaXN0IiwibWFwIiwic3VwZXIiLCJwYXJzZWRGb3JtdWxhIiwiZGFtYWdlUm9sbEZvcm11bGEiLCJyZXZlcnNlIiwiam9pbiIsIl9mb3JtdWxhIiwiX2Zvcm11bGFXaXRob3V0TW9kTGlzdCIsIl9tZXRhIiwiX21vZExpc3QiLCJSb2xsIiwidG9TdHJpbmciLCJkYXRhIiwiX2V2YWx1YXRlZE1vZGlmaWVycyIsIl9tb2RpZmllcnMiLCJfdG90YWwiLCJfcm9sbGVkIiwic3VjY2Vzc1JvbGxGb3JtdWxhIiwiX2xldmVsIiwiX3RyYWl0IiwicmVkdWNlIiwiX2lzU3VjY2VzcyIsIl9tYXJnaW5PZlN1Y2Nlc3MiLCJfaXNDcml0RmFpbCIsIl9pc0NyaXRTdWNjZXNzIiwibWFyZ2luT2ZTdWNjZXNzIiwiQWJzdHJhY3RSb2xsUmVuZGVyZXIiLCJyZW5kZXJlciIsImV2YWx1YXRlZEZvcm11bGEiLCJwYXJ0cyIsImZvdW5kcnlEaWNlIiwiZGllIiwid29yc3RGYWNlIiwiX2dldFdvcnN0RGllRmFjZSIsImJlc3RGYWNlIiwiX2dldEJlc3REaWVGYWNlIiwiZmFjZXMiLCJyb2xscyIsInJlc3VsdCIsImNsYXNzZXMiLCJjb25zdHJ1Y3RvciIsInRvTG93ZXJDYXNlIiwiZmlsdGVyIiwicmVuZGVyVGVtcGxhdGUiLCJDT05GSUciLCJEaWNlIiwidG9vbHRpcCIsIm1heCIsInNpZGVzIiwibWluIiwib3B0aW9ucyIsIm1lcmdlT2JqZWN0IiwidGVtcGxhdGUiLCJ1c2VUb29sdGlwIiwidXNlTW91c2VvdmVyIiwidXNlciIsImdhbWUiLCJfaWQiLCJmbGF2b3IiLCJfZ2V0Rm9ybXVsYSIsImdldFRvb2x0aXAiLCJtb3VzZW92ZXIiLCJfZ2V0TW91c2VvdmVyIiwiX2dldFRvdGFsIiwicm91bmQiLCJldmVyeSIsImxpU3R5bGUiLCJmb3JtdWxhV2l0aG91dE1vZExpc3QiLCJldmFsdWF0ZWRNb2RpZmllcnMiLCJfZ2V0Rm9ybXVsYVdpdGhvdXRNb2RzIiwiZXZhbHVhdGVkTGV2ZWwiLCJpc1N1Y2Nlc3MiLCJpc0NyaXRTdWNjZXNzIiwiaXNDcml0RmFpbCJdLCJtYXBwaW5ncyI6Im9DQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQTBEZixPQXJEQUYsRUFBb0JRLEVBQUlGLEVBR3hCTixFQUFvQlMsRUFBSVYsRUFHeEJDLEVBQW9CVSxFQUFJLFNBQVNSLEVBQVNTLEVBQU1DLEdBQzNDWixFQUFvQmEsRUFBRVgsRUFBU1MsSUFDbENHLE9BQU9DLGVBQWViLEVBQVNTLEVBQU0sQ0FBRUssWUFBWSxFQUFNQyxJQUFLTCxLQUtoRVosRUFBb0JrQixFQUFJLFNBQVNoQixHQUNYLG9CQUFYaUIsUUFBMEJBLE9BQU9DLGFBQzFDTixPQUFPQyxlQUFlYixFQUFTaUIsT0FBT0MsWUFBYSxDQUFFQyxNQUFPLFdBRTdEUCxPQUFPQyxlQUFlYixFQUFTLGFBQWMsQ0FBRW1CLE9BQU8sS0FRdkRyQixFQUFvQnNCLEVBQUksU0FBU0QsRUFBT0UsR0FFdkMsR0FEVSxFQUFQQSxJQUFVRixFQUFRckIsRUFBb0JxQixJQUMvQixFQUFQRSxFQUFVLE9BQU9G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QkFBaUJqQixHQUNiLE9BQU92TCxLQUFLdU0sT0FBT2hCLEVBQUlpQixPQVEzQixZQUFZckUsR0FDUixJQUFJSCxFQUFVekksS0FBS3NPLHVCQUF1QjFGLEdBSzFDLE9BSnVCLE9BQW5CQSxFQUFLTyxZQUNMVixFQUFVLEdBQUdBLEtBQVdHLEVBQUtPLGtCQUFrQlAsRUFBSzJGLHNCQUdqRDlGLEVBUVgsdUJBQXVCRyxHQUVuQixNQUFPLEdBRFNBLEVBQUtJLE1BQVdKLEVBQUtJLE1BQVIsSUFBbUIsb0JBQzVCSixFQUFLSyxRQVE3QixVQUFVTCxHQUNOLElBQUlpQixFQUFjakIsRUFBSzRGLFVBQVksVUFBWSxVQUUvQyxHQUFJNUYsRUFBSzZGLGVBQWlCN0YsRUFBSzhGLFdBQVksQ0FFdkM3RSxFQUFjLG1CQURBakIsRUFBSzZGLGNBQWdCLFVBQVksdUJBQ0s1RSxRQUd4RCxNQUFPLEdBQUdBLFFBQWtCakIsRUFBSzRGLFVBQVk1RixFQUFLOEMsaUJBQW1COUMsRUFBSzhDLGtCQTRCOUUsY0FBYzlDLEdBQ1YsR0FBNEIsSUFBeEJBLEVBQUtTLFFBQVFwSixPQUNiLE9BQU8sS0FHWCxHQUFJMkksRUFBS1MsUUFBUTZFLE1BQU0xSyxHQUEyQixPQUFwQkEsRUFBSXFHLGtCQUE0Q25ELElBQXBCbEQsRUFBSXFHLGFBQXdELElBQTNCckcsRUFBSXFHLFlBQVk1SixRQUN2RyxPQUFPLEtBR1gsTUFDTWtPLEVBQVUsOENBRWhCLE1BQU8sd0VBQXFDQSxNQUFZbk8sS0FBS3NPLHVCQUF1QjFGLFVBQWFBLEVBQUtTLFFBQVFZLElBQUl6RyxHQUFPLGNBQWMySyxNQUFZM0ssRUFBSW1HLFlBQVluRyxFQUFJcUcsb0JBQW9CUyxLQUFLLGdCIiwiZmlsZSI6Imd1cnBzLWZvdW5kcnktcm9sbC1saWIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNSk7XG4iLCJ2YXIgTWV4cD1yZXF1aXJlKCcuL3Bvc3RmaXhfZXZhbHVhdG9yLmpzJyk7XHJcbk1leHAucHJvdG90eXBlLmZvcm11bGFFdmFsID0gZnVuY3Rpb24gKCkge1xyXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cdHZhciBzdGFjaz1bXSxwb3AxLHBvcDIscG9wMztcclxuXHR2YXIgZGlzcD1bXTtcclxuXHR2YXIgdGVtcD0nJztcclxuXHR2YXIgYXJyPXRoaXMudmFsdWU7XHJcblx0Zm9yKHZhciBpPTA7aTxhcnIubGVuZ3RoO2krKyl7XHJcblx0XHRpZihhcnJbaV0udHlwZT09PTF8fGFycltpXS50eXBlPT09Myl7XHJcblx0XHRcdGRpc3AucHVzaCh7dmFsdWU6YXJyW2ldLnR5cGU9PT0zP2FycltpXS5zaG93OmFycltpXS52YWx1ZSx0eXBlOjF9KTtcclxuXHRcdH1cclxuXHRcdGVsc2UgaWYoYXJyW2ldLnR5cGU9PT0xMyl7XHJcblx0XHRcdGRpc3AucHVzaCh7dmFsdWU6YXJyW2ldLnNob3csdHlwZToxfSk7XHJcblx0XHR9XHJcblx0XHRlbHNlIGlmKGFycltpXS50eXBlPT09MCl7XHJcblx0XHRcdGRpc3BbZGlzcC5sZW5ndGgtMV09e3ZhbHVlOmFycltpXS5zaG93KyhhcnJbaV0uc2hvdyE9XCItXCI/XCIoXCI6XCJcIikrZGlzcFtkaXNwLmxlbmd0aC0xXS52YWx1ZSsoYXJyW2ldLnNob3chPVwiLVwiP1wiKVwiOlwiXCIpLHR5cGU6MH07XHJcblx0XHR9XHJcblx0XHRlbHNlIGlmKGFycltpXS50eXBlPT09Nyl7XHJcblx0XHRcdGRpc3BbZGlzcC5sZW5ndGgtMV09e3ZhbHVlOihkaXNwW2Rpc3AubGVuZ3RoLTFdLnR5cGUhPTE/XCIoXCI6XCJcIikrZGlzcFtkaXNwLmxlbmd0aC0xXS52YWx1ZSsoZGlzcFtkaXNwLmxlbmd0aC0xXS50eXBlIT0xP1wiKVwiOlwiXCIpK2FycltpXS5zaG93LHR5cGU6N307XHJcblx0XHR9XHJcblx0XHRlbHNlIGlmKGFycltpXS50eXBlPT09MTApe1xyXG5cdFx0XHRwb3AxPWRpc3AucG9wKCk7XHJcblx0XHRcdHBvcDI9ZGlzcC5wb3AoKTtcclxuXHRcdFx0aWYoYXJyW2ldLnNob3c9PT0nUCd8fGFycltpXS5zaG93PT09J0MnKWRpc3AucHVzaCh7dmFsdWU6XCI8c3VwPlwiK3BvcDIudmFsdWUrXCI8L3N1cD5cIithcnJbaV0uc2hvdytcIjxzdWI+XCIrcG9wMS52YWx1ZStcIjwvc3ViPlwiLHR5cGU6MTB9KTtcclxuXHRcdFx0ZWxzZSBkaXNwLnB1c2goe3ZhbHVlOihwb3AyLnR5cGUhPTE/XCIoXCI6XCJcIikrcG9wMi52YWx1ZSsocG9wMi50eXBlIT0xP1wiKVwiOlwiXCIpK1wiPHN1cD5cIitwb3AxLnZhbHVlK1wiPC9zdXA+XCIsdHlwZToxfSk7XHJcblx0XHR9XHJcblx0XHRlbHNlIGlmKGFycltpXS50eXBlPT09Mnx8YXJyW2ldLnR5cGU9PT05KXtcclxuXHRcdFx0cG9wMT1kaXNwLnBvcCgpO1xyXG5cdFx0XHRwb3AyPWRpc3AucG9wKCk7XHJcblx0XHRcdGRpc3AucHVzaCh7dmFsdWU6KHBvcDIudHlwZSE9MT9cIihcIjpcIlwiKStwb3AyLnZhbHVlKyhwb3AyLnR5cGUhPTE/XCIpXCI6XCJcIikrYXJyW2ldLnNob3crKHBvcDEudHlwZSE9MT9cIihcIjpcIlwiKStwb3AxLnZhbHVlKyhwb3AxLnR5cGUhPTE/XCIpXCI6XCJcIiksdHlwZTphcnJbaV0udHlwZX0pO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZihhcnJbaV0udHlwZT09PTEyKXtcclxuXHRcdFx0cG9wMT1kaXNwLnBvcCgpO1xyXG5cdFx0XHRwb3AyPWRpc3AucG9wKCk7XHJcblx0XHRcdHBvcDM9ZGlzcC5wb3AoKTtcclxuXHRcdFx0ZGlzcC5wdXNoKHt2YWx1ZTphcnJbaV0uc2hvdytcIihcIitwb3AzLnZhbHVlK1wiLFwiK3BvcDIudmFsdWUrXCIsXCIrcG9wMS52YWx1ZStcIilcIix0eXBlOjEyfSk7XHJcblx0XHR9XHJcblx0fVxyXG5cdHJldHVybiBkaXNwWzBdLnZhbHVlO1xyXG59O1xyXG5tb2R1bGUuZXhwb3J0cz1NZXhwOyIsInZhciBNZXhwPXJlcXVpcmUoJy4vcG9zdGZpeC5qcycpO1xyXG5NZXhwLnByb3RvdHlwZS5wb3N0Zml4RXZhbCA9IGZ1bmN0aW9uIChVc2VyRGVmaW5lZCkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHRVc2VyRGVmaW5lZD1Vc2VyRGVmaW5lZHx8e307XHJcblx0VXNlckRlZmluZWQuUEk9TWF0aC5QSTtcclxuXHRVc2VyRGVmaW5lZC5FPU1hdGguRTtcclxuXHR2YXIgc3RhY2s9W10scG9wMSxwb3AyLHBvcDM7XHJcblx0dmFyIGRpc3A9W107XHJcblx0dmFyIHRlbXA9Jyc7XHJcblx0dmFyIGFycj10aGlzLnZhbHVlO1xyXG5cdHZhciBib29sPSh0eXBlb2YgVXNlckRlZmluZWQubiE9PVwidW5kZWZpbmVkXCIpO1xyXG5cdGZvcih2YXIgaT0wO2k8YXJyLmxlbmd0aDtpKyspe1xyXG5cdFx0aWYoYXJyW2ldLnR5cGU9PT0xKXtcclxuXHRcdFx0c3RhY2sucHVzaCh7dmFsdWU6YXJyW2ldLnZhbHVlLHR5cGU6MX0pO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZihhcnJbaV0udHlwZT09PTMpe1xyXG5cdFx0XHRzdGFjay5wdXNoKHt2YWx1ZTpVc2VyRGVmaW5lZFthcnJbaV0udmFsdWVdLHR5cGU6MX0pO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZihhcnJbaV0udHlwZT09PTApe1xyXG5cdFx0XHRpZih0eXBlb2Ygc3RhY2tbc3RhY2subGVuZ3RoLTFdLnR5cGU9PT1cInVuZGVmaW5lZFwiKXtcclxuXHRcdFx0XHRzdGFja1tzdGFjay5sZW5ndGgtMV0udmFsdWUucHVzaChhcnJbaV0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Ugc3RhY2tbc3RhY2subGVuZ3RoLTFdLnZhbHVlPWFycltpXS52YWx1ZShzdGFja1tzdGFjay5sZW5ndGgtMV0udmFsdWUpO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZihhcnJbaV0udHlwZT09PTcpe1xyXG5cdFx0XHRpZih0eXBlb2Ygc3RhY2tbc3RhY2subGVuZ3RoLTFdLnR5cGU9PT1cInVuZGVmaW5lZFwiKXtcclxuXHRcdFx0XHRzdGFja1tzdGFjay5sZW5ndGgtMV0udmFsdWUucHVzaChhcnJbaV0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Ugc3RhY2tbc3RhY2subGVuZ3RoLTFdLnZhbHVlPWFycltpXS52YWx1ZShzdGFja1tzdGFjay5sZW5ndGgtMV0udmFsdWUpO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZihhcnJbaV0udHlwZT09PTgpe1xyXG5cdFx0XHRwb3AxPXN0YWNrLnBvcCgpO1xyXG5cdFx0XHRwb3AyPXN0YWNrLnBvcCgpO1xyXG5cdFx0XHRzdGFjay5wdXNoKHt0eXBlOjEsdmFsdWU6YXJyW2ldLnZhbHVlKHBvcDIudmFsdWUscG9wMS52YWx1ZSl9KTtcclxuXHRcdH1cclxuXHRcdGVsc2UgaWYoYXJyW2ldLnR5cGU9PT0xMCl7XHJcblx0XHRcdHBvcDE9c3RhY2sucG9wKCk7XHJcblx0XHRcdHBvcDI9c3RhY2sucG9wKCk7XHJcblx0XHRcdGlmKHR5cGVvZiBwb3AyLnR5cGU9PT1cInVuZGVmaW5lZFwiKXtcclxuXHRcdFx0XHRwb3AyLnZhbHVlPXBvcDIuY29uY2F0KHBvcDEpO1xyXG5cdFx0XHRcdHBvcDIudmFsdWUucHVzaChhcnJbaV0pO1xyXG5cdFx0XHRcdHN0YWNrLnB1c2gocG9wMik7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBpZiAodHlwZW9mIHBvcDEudHlwZT09PVwidW5kZWZpbmVkXCIpIHtcclxuXHRcdFx0XHRwb3AxLnVuc2hpZnQocG9wMik7XHJcblx0XHRcdFx0cG9wMS5wdXNoKGFycltpXSk7XHJcblx0XHRcdFx0c3RhY2sucHVzaChwb3AxKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNle1xyXG5cdFx0XHRcdHN0YWNrLnB1c2goe3R5cGU6MSx2YWx1ZTphcnJbaV0udmFsdWUocG9wMi52YWx1ZSxwb3AxLnZhbHVlKX0pO1xyXG4gICAgICAgICAgICB9XHJcblx0XHR9XHJcblx0XHRlbHNlIGlmKGFycltpXS50eXBlPT09Mnx8YXJyW2ldLnR5cGU9PT05KXtcclxuXHRcdFx0cG9wMT1zdGFjay5wb3AoKTtcclxuXHRcdFx0cG9wMj1zdGFjay5wb3AoKTtcclxuXHRcdFx0aWYodHlwZW9mIHBvcDIudHlwZT09PVwidW5kZWZpbmVkXCIpe1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocG9wMik7XHJcblx0XHRcdFx0cG9wMj1wb3AyLmNvbmNhdChwb3AxKTtcclxuXHRcdFx0XHRwb3AyLnB1c2goYXJyW2ldKTtcclxuXHRcdFx0XHRzdGFjay5wdXNoKHBvcDIpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2UgaWYgKHR5cGVvZiBwb3AxLnR5cGU9PT1cInVuZGVmaW5lZFwiKSB7XHJcblx0XHRcdFx0cG9wMS51bnNoaWZ0KHBvcDIpO1xyXG5cdFx0XHRcdHBvcDEucHVzaChhcnJbaV0pO1xyXG5cdFx0XHRcdHN0YWNrLnB1c2gocG9wMSk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZXtcclxuXHRcdFx0XHRzdGFjay5wdXNoKHt0eXBlOjEsdmFsdWU6YXJyW2ldLnZhbHVlKHBvcDIudmFsdWUscG9wMS52YWx1ZSl9KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZihhcnJbaV0udHlwZT09PTEyKXtcclxuXHRcdFx0cG9wMT1zdGFjay5wb3AoKTtcclxuXHRcdFx0aWYgKHR5cGVvZiBwb3AxLnR5cGUhPT1cInVuZGVmaW5lZFwiKSB7XHJcblx0XHRcdFx0cG9wMT1bcG9wMV07XHJcblx0XHRcdH1cclxuXHRcdFx0cG9wMj1zdGFjay5wb3AoKTtcclxuXHRcdFx0cG9wMz1zdGFjay5wb3AoKTtcclxuXHRcdFx0c3RhY2sucHVzaCh7dHlwZToxLHZhbHVlOmFycltpXS52YWx1ZShwb3AzLnZhbHVlLHBvcDIudmFsdWUsbmV3IE1leHAocG9wMSkpfSk7XHJcblx0XHR9XHJcblx0XHRlbHNlIGlmKGFycltpXS50eXBlPT09MTMpe1xyXG5cdFx0XHRpZihib29sKXtcclxuXHRcdFx0XHRzdGFjay5wdXNoKHt2YWx1ZTpVc2VyRGVmaW5lZFthcnJbaV0udmFsdWVdLHR5cGU6M30pO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Ugc3RhY2sucHVzaChbYXJyW2ldXSk7XHJcblx0XHR9XHJcblx0fVxyXG5cdGlmIChzdGFjay5sZW5ndGg+MSkge1xyXG5cdFx0dGhyb3cobmV3IE1leHAuZXhjZXB0aW9uKFwiVW5jYXVnaHQgU3ludGF4IGVycm9yXCIpKTtcclxuXHR9XHJcblx0cmV0dXJuIHN0YWNrWzBdLnZhbHVlPjEwMDAwMDAwMDAwMDAwMDA/XCJJbmZpbml0eVwiOnBhcnNlRmxvYXQoc3RhY2tbMF0udmFsdWUudG9GaXhlZCgxNSkpO1xyXG59O1xyXG5NZXhwLmV2YWw9ZnVuY3Rpb24oc3RyLHRva2VucyxvYmope1xyXG5cdGlmICh0eXBlb2YgdG9rZW5zPT09XCJ1bmRlZmluZWRcIikge1xyXG5cdFx0cmV0dXJuIHRoaXMubGV4KHN0cikudG9Qb3N0Zml4KCkucG9zdGZpeEV2YWwoKTtcclxuXHR9XHJcblx0ZWxzZSBpZiAodHlwZW9mIG9iaj09PVwidW5kZWZpbmVkXCIpIHtcclxuXHRcdGlmICh0eXBlb2YgdG9rZW5zLmxlbmd0aCE9PVwidW5kZWZpbmVkXCIpIFxyXG5cdFx0XHRyZXR1cm4gdGhpcy5sZXgoc3RyLHRva2VucykudG9Qb3N0Zml4KCkucG9zdGZpeEV2YWwoKTtcclxuXHRcdGVsc2VcclxuXHRcdFx0cmV0dXJuIHRoaXMubGV4KHN0cikudG9Qb3N0Zml4KCkucG9zdGZpeEV2YWwodG9rZW5zKTtcclxuXHR9XHJcblx0ZWxzZVxyXG5cdFx0cmV0dXJuIHRoaXMubGV4KHN0cix0b2tlbnMpLnRvUG9zdGZpeCgpLnBvc3RmaXhFdmFsKG9iaik7XHJcbn07XHJcbm1vZHVsZS5leHBvcnRzPU1leHA7IiwiXHJcbiAgICB2YXIgTWV4cD1yZXF1aXJlKCcuL2xleGVyLmpzJyk7XHJcblxyXG5cdE1leHAucHJvdG90eXBlLnRvUG9zdGZpeCA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdCd1c2Ugc3RyaWN0JztcclxuXHRcdHZhciBwb3N0PVtdLGVsZW0scG9wcGVkLHByZXAscHJlLGVsZTtcclxuICAgIFx0dmFyIHN0YWNrPVt7dmFsdWU6XCIoXCIsdHlwZTo0LHByZTowfV07XHJcblx0XHR2YXIgYXJyPXRoaXMudmFsdWU7XHJcblx0XHRmb3IgKHZhciBpPTE7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0aWYoYXJyW2ldLnR5cGU9PT0xfHxhcnJbaV0udHlwZT09PTN8fGFycltpXS50eXBlPT09MTMpe1x0Ly9pZiB0b2tlbiBpcyBudW1iZXIsY29uc3RhbnQsb3Igbih3aGljaCBpcyBhbHNvIGEgc3BlY2lhbCBjb25zdGFudCBpbiBvdXIgY2FzZSlcclxuXHRcdFx0XHRpZihhcnJbaV0udHlwZT09PTEpXHJcblx0XHRcdFx0XHRhcnJbaV0udmFsdWU9TnVtYmVyKGFycltpXS52YWx1ZSk7XHJcblx0XHRcdFx0cG9zdC5wdXNoKGFycltpXSk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBpZihhcnJbaV0udHlwZT09PTQpe1xyXG5cdFx0XHRcdHN0YWNrLnB1c2goYXJyW2ldKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGlmKGFycltpXS50eXBlPT09NSl7XHJcblx0XHRcdFx0d2hpbGUoKHBvcHBlZD1zdGFjay5wb3AoKSkudHlwZSE9PTQpe1xyXG5cdFx0XHRcdFx0cG9zdC5wdXNoKHBvcHBlZCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2UgaWYoYXJyW2ldLnR5cGU9PT0xMSl7XHJcblx0XHRcdFx0d2hpbGUoKHBvcHBlZD1zdGFjay5wb3AoKSkudHlwZSE9PTQpe1xyXG5cdFx0XHRcdFx0cG9zdC5wdXNoKHBvcHBlZCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHN0YWNrLnB1c2gocG9wcGVkKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRlbGVtPWFycltpXTtcclxuXHRcdFx0XHRwcmU9ZWxlbS5wcmU7XHJcblx0XHRcdFx0ZWxlPXN0YWNrW3N0YWNrLmxlbmd0aC0xXTtcclxuXHRcdFx0XHRwcmVwPWVsZS5wcmU7XHJcblx0XHRcdFx0dmFyIGZsYWc9ZWxlLnZhbHVlPT0nTWF0aC5wb3cnJiZlbGVtLnZhbHVlPT0nTWF0aC5wb3cnO1xyXG5cdFx0XHRcdGlmKHByZT5wcmVwKXN0YWNrLnB1c2goZWxlbSk7XHJcblx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHR3aGlsZShwcmVwPj1wcmUmJiFmbGFnfHxmbGFnJiZwcmU8cHJlcCl7XHJcblx0XHRcdFx0XHRcdHBvcHBlZD1zdGFjay5wb3AoKTtcclxuXHRcdFx0XHRcdFx0ZWxlPXN0YWNrW3N0YWNrLmxlbmd0aC0xXTtcclxuXHRcdFx0XHRcdFx0cG9zdC5wdXNoKHBvcHBlZCk7XHJcblx0XHRcdFx0XHRcdHByZXA9ZWxlLnByZTtcclxuXHRcdFx0XHRcdFx0ZmxhZz1lbGVtLnZhbHVlPT0nTWF0aC5wb3cnJiZlbGUudmFsdWU9PSdNYXRoLnBvdyc7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRzdGFjay5wdXNoKGVsZW0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIG5ldyBNZXhwKHBvc3QpO1xyXG5cdH07XHJcbiAgICBtb2R1bGUuZXhwb3J0cz1NZXhwOyIsInZhciBNZXhwID0gcmVxdWlyZSgnLi9tYXRoX2Z1bmN0aW9uLmpzJylcclxuZnVuY3Rpb24gaW5jIChhcnIsIHZhbCkge1xyXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBhcnJbaV0gKz0gdmFsXHJcbiAgfVxyXG4gIHJldHVybiBhcnJcclxufVxyXG52YXIgdG9rZW4gPSBbJ3NpbicsICdjb3MnLCAndGFuJywgJ3BpJywgJygnLCAnKScsICdQJywgJ0MnLFxyXG4gICdhc2luJywgJ2Fjb3MnLCAnYXRhbicsICc3JywgJzgnLCAnOScsICdpbnQnLFxyXG4gICdjb3NoJywgJ2Fjb3NoJywgJ2xuJywgJ14nLCAncm9vdCcsICc0JywgJzUnLCAnNicsICcvJywgJyEnLFxyXG4gICd0YW5oJywgJ2F0YW5oJywgJ01vZCcsICcxJywgJzInLCAnMycsICcqJyxcclxuICAnc2luaCcsICdhc2luaCcsICdlJywgJ2xvZycsICcwJywgJy4nLCAnKycsICctJywgJywnLCAnU2lnbWEnLCAnbicsICdQaScsICdwb3cnXVxyXG52YXIgc2hvdyA9IFsnc2luJywgJ2NvcycsICd0YW4nLCAnJnBpOycsICcoJywgJyknLCAnUCcsICdDJyxcclxuICAnYXNpbicsICdhY29zJywgJ2F0YW4nLCAnNycsICc4JywgJzknLCAnSW50JyxcclxuICAnY29zaCcsICdhY29zaCcsICcgbG4nLCAnXicsICdyb290JywgJzQnLCAnNScsICc2JywgJyZkaXZpZGU7JywgJyEnLFxyXG4gICd0YW5oJywgJ2F0YW5oJywgJyBNb2QgJywgJzEnLCAnMicsICczJywgJyZ0aW1lczsnLFxyXG4gICdzaW5oJywgJ2FzaW5oJywgJ2UnLCAnIGxvZycsICcwJywgJy4nLCAnKycsICctJywgJywnLCAnJlNpZ21hOycsICduJywgJyZQaTsnLCAncG93J11cclxudmFyIGV2YSA9IFtNZXhwLm1hdGguc2luLCBNZXhwLm1hdGguY29zLCBNZXhwLm1hdGgudGFuLCAnUEknLCAnKCcsICcpJywgTWV4cC5tYXRoLlAsIE1leHAubWF0aC5DLFxyXG4gIE1leHAubWF0aC5hc2luLCBNZXhwLm1hdGguYWNvcywgTWV4cC5tYXRoLmF0YW4sICc3JywgJzgnLCAnOScsIE1hdGguZmxvb3IsXHJcbiAgTWV4cC5tYXRoLmNvc2gsIE1leHAubWF0aC5hY29zaCwgTWF0aC5sb2csIE1hdGgucG93LCBNYXRoLnNxcnQsICc0JywgJzUnLCAnNicsIE1leHAubWF0aC5kaXYsIE1leHAubWF0aC5mYWN0LFxyXG4gIE1leHAubWF0aC50YW5oLCBNZXhwLm1hdGguYXRhbmgsIE1leHAubWF0aC5tb2QsICcxJywgJzInLCAnMycsIE1leHAubWF0aC5tdWwsXHJcbiAgTWV4cC5tYXRoLnNpbmgsIE1leHAubWF0aC5hc2luaCwgJ0UnLCBNZXhwLm1hdGgubG9nLCAnMCcsICcuJywgTWV4cC5tYXRoLmFkZCwgTWV4cC5tYXRoLnN1YiwgJywnLCBNZXhwLm1hdGguc2lnbWEsICduJywgTWV4cC5tYXRoLlBpLCBNYXRoLnBvd11cclxudmFyIHByZWNlZCA9IHtcclxuICAwOiAxMSxcclxuICAxOiAwLFxyXG4gIDI6IDMsXHJcbiAgMzogMCxcclxuICA0OiAwLFxyXG4gIDU6IDAsXHJcbiAgNjogMCxcclxuICA3OiAxMSxcclxuICA4OiAxMSxcclxuICA5OiAxLFxyXG4gIDEwOiAxMCxcclxuICAxMTogMCxcclxuICAxMjogMTEsXHJcbiAgMTM6IDBcclxufSAvLyBzdG9yZXMgcHJlY2VkZW5jZSBieSB0eXBlc1xyXG52YXIgdHlwZSA9IFswLCAwLCAwLCAzLCA0LCA1LCAxMCwgMTAsXHJcbiAgMCwgMCwgMCwgMSwgMSwgMSwgMCxcclxuICAwLCAwLCAwLCAxMCwgMCwgMSwgMSwgMSwgMiwgNyxcclxuICAwLCAwLCAyLCAxLCAxLCAxLCAyLFxyXG4gIDAsIDAsIDMsIDAsIDEsIDYsIDksIDksIDExLCAxMiwgMTMsIDEyLCA4XVxyXG4vKlxyXG4wIDogZnVuY3Rpb24gd2l0aCBzeW50YXggZnVuY3Rpb25fbmFtZShNYXRoc19leHApXHJcbjEgOiBudW1iZXJzXHJcbjIgOiBiaW5hcnkgb3BlcmF0b3JzIGxpa2UgKiAvIE1vZCBsZWZ0IGFzc29jaWF0ZSBhbmQgc2FtZSBwcmVjZWRlbmNlXHJcbjMgOiBNYXRoIGNvbnN0YW50IHZhbHVlcyBsaWtlIGUscGksQ3J1bmNoZXIgYW5zXHJcbjQgOiBvcGVuaW5nIGJyYWNrZXRcclxuNSA6IGNsb3NpbmcgYnJhY2tldFxyXG42IDogZGVjaW1hbFxyXG43IDogZnVuY3Rpb24gd2l0aCBzeW50YXggKE1hdGhfZXhwKWZ1bmN0aW9uX25hbWVcclxuODogZnVuY3Rpb24gd2l0aCBzeW50YXggZnVuY3Rpb25fbmFtZShNYXRoX2V4cDEsTWF0aF9leHAyKVxyXG45IDogYmluYXJ5IG9wZXJhdG9yIGxpa2UgKywtXHJcbjEwOiBiaW5hcnkgb3BlcmF0b3IgbGlrZSBQIEMgb3IgXlxyXG4xMTogLFxyXG4xMjogZnVuY3Rpb24gd2l0aCAsIHNlcGVyYXRlZCB0aHJlZSBwYXJhbWV0ZXJzXHJcbjEzOiB2YXJpYWJsZSBvZiBTaWdtYSBmdW5jdGlvblxyXG4qL1xyXG52YXIgdHlwZTAgPSB7XHJcbiAgMDogdHJ1ZSxcclxuICAxOiB0cnVlLFxyXG4gIDM6IHRydWUsXHJcbiAgNDogdHJ1ZSxcclxuICA2OiB0cnVlLFxyXG4gIDg6IHRydWUsXHJcbiAgOTogdHJ1ZSxcclxuICAxMjogdHJ1ZSxcclxuICAxMzogdHJ1ZVxyXG59IC8vIHR5cGUyOnRydWUsdHlwZTQ6dHJ1ZSx0eXBlOTp0cnVlLHR5cGUxMTp0cnVlLHR5cGUyMTp0cnVlLHR5cGUyMlxyXG52YXIgdHlwZTEgPSB7XHJcbiAgMDogdHJ1ZSxcclxuICAxOiB0cnVlLFxyXG4gIDI6IHRydWUsXHJcbiAgMzogdHJ1ZSxcclxuICA0OiB0cnVlLFxyXG4gIDU6IHRydWUsXHJcbiAgNjogdHJ1ZSxcclxuICA3OiB0cnVlLFxyXG4gIDg6IHRydWUsXHJcbiAgOTogdHJ1ZSxcclxuICAxMDogdHJ1ZSxcclxuICAxMTogdHJ1ZSxcclxuICAxMjogdHJ1ZSxcclxuICAxMzogdHJ1ZVxyXG59IC8vIHR5cGUzOnRydWUsdHlwZTU6dHJ1ZSx0eXBlNzp0cnVlLHR5cGUyM1xyXG52YXIgdHlwZTFBc3RlcmljayA9IHtcclxuICAwOiB0cnVlLFxyXG4gIDM6IHRydWUsXHJcbiAgNDogdHJ1ZSxcclxuICA4OiB0cnVlLFxyXG4gIDEyOiB0cnVlLFxyXG4gIDEzOiB0cnVlXHJcbn1cclxudmFyIGVtcHR5ID0ge31cclxudmFyIHR5cGUzQXN0ZXJpY2sgPSB7XHJcbiAgMDogdHJ1ZSxcclxuICAxOiB0cnVlLFxyXG4gIDM6IHRydWUsXHJcbiAgNDogdHJ1ZSxcclxuICA2OiB0cnVlLFxyXG4gIDg6IHRydWUsXHJcbiAgMTI6IHRydWUsXHJcbiAgMTM6IHRydWVcclxufSAvLyB0eXBlXzU6dHJ1ZSx0eXBlXzc6dHJ1ZSx0eXBlXzIzXHJcbnZhciB0eXBlNiA9IHtcclxuICAxOiB0cnVlXHJcbn1cclxudmFyIG5ld0FyID0gW1xyXG4gIFtdLFxyXG4gIFsnMScsICcyJywgJzMnLCAnNycsICc4JywgJzknLCAnNCcsICc1JywgJzYnLCAnKycsICctJywgJyonLCAnLycsICcoJywgJyknLCAnXicsICchJywgJ1AnLCAnQycsICdlJywgJzAnLCAnLicsICcsJywgJ24nXSxcclxuICBbJ3BpJywgJ2xuJywgJ1BpJ10sXHJcbiAgWydzaW4nLCAnY29zJywgJ3RhbicsICdEZWwnLCAnaW50JywgJ01vZCcsICdsb2cnLCAncG93J10sXHJcbiAgWydhc2luJywgJ2Fjb3MnLCAnYXRhbicsICdjb3NoJywgJ3Jvb3QnLCAndGFuaCcsICdzaW5oJ10sXHJcbiAgWydhY29zaCcsICdhdGFuaCcsICdhc2luaCcsICdTaWdtYSddXHJcbl1cclxuXHJcbmZ1bmN0aW9uIG1hdGNoIChzdHIxLCBzdHIyLCBpLCB4KSB7XHJcbiAgZm9yICh2YXIgZiA9IDA7IGYgPCB4OyBmKyspIHtcclxuICAgIGlmIChzdHIxW2kgKyBmXSAhPT0gc3RyMltmXSkge1xyXG4gICAgICByZXR1cm4gZmFsc2VcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIHRydWVcclxufVxyXG5NZXhwLmFkZFRva2VuID0gZnVuY3Rpb24gKHRva2Vucykge1xyXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdG9rZW5zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICB2YXIgeCA9IHRva2Vuc1tpXS50b2tlbi5sZW5ndGhcclxuICAgIHZhciB0ZW1wID0gLTFcclxuXHJcbiAgICAvLyBuZXdBciBpcyBhIHNwZWNpYWxseSBkZXNpZ25lZCBkYXRhIHN0cnVjdHVyZSBpbmRleCBvZiAxZCBhcnJheSA9IGxlbmd0aCBvZiB0b2tlbnNcclxuXHJcbiAgICBpZiAoeCA8IG5ld0FyLmxlbmd0aCkgeyAvLyBtYXRjaCB0byBjaGVjayBpZiB0b2tlbiBpcyByZWFsbHkgaHVnZSBhbmQgbm90IGV4aXN0aW5nXHJcbiAgICAvLyBpZiBub3QgY2hlY2tlZCBpdCB3aWxsIGJyZWFrIGluIG5leHQgbGluZSBhcyB1bmRlZmluZWQgaW5kZXhcclxuICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBuZXdBclt4XS5sZW5ndGg7IHkrKykge1xyXG4gICAgICAgIGlmICh0b2tlbnNbaV0udG9rZW4gPT09IG5ld0FyW3hdW3ldKSB7XHJcbiAgICAgICAgICB0ZW1wID0gdG9rZW4uaW5kZXhPZihuZXdBclt4XVt5XSlcclxuICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAodGVtcCA9PT0gLTEpIHtcclxuICAgICAgdG9rZW4ucHVzaCh0b2tlbnNbaV0udG9rZW4pXHJcbiAgICAgIHR5cGUucHVzaCh0b2tlbnNbaV0udHlwZSlcclxuICAgICAgaWYgKG5ld0FyLmxlbmd0aCA8PSB0b2tlbnNbaV0udG9rZW4ubGVuZ3RoKSB7XHJcbiAgICAgICAgbmV3QXJbdG9rZW5zW2ldLnRva2VuLmxlbmd0aF0gPSBbXVxyXG4gICAgICB9XHJcbiAgICAgIG5ld0FyW3Rva2Vuc1tpXS50b2tlbi5sZW5ndGhdLnB1c2godG9rZW5zW2ldLnRva2VuKVxyXG4gICAgICBldmEucHVzaCh0b2tlbnNbaV0udmFsdWUpXHJcbiAgICAgIHNob3cucHVzaCh0b2tlbnNbaV0uc2hvdylcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRva2VuW3RlbXBdID0gdG9rZW5zW2ldLnRva2VuXHJcbiAgICAgIHR5cGVbdGVtcF0gPSB0b2tlbnNbaV0udHlwZVxyXG4gICAgICBldmFbdGVtcF0gPSB0b2tlbnNbaV0udmFsdWVcclxuICAgICAgc2hvd1t0ZW1wXSA9IHRva2Vuc1tpXS5zaG93XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbk1leHAubGV4ID0gZnVuY3Rpb24gKGlucCwgdG9rZW5zKSB7XHJcbiAgJ3VzZSBzdHJpY3QnXHJcbiAgdmFyIGNoYW5nZVNpZ25PYmogPSB7XHJcbiAgICB2YWx1ZTogTWV4cC5tYXRoLmNoYW5nZVNpZ24sXHJcbiAgICB0eXBlOiAwLFxyXG4gICAgcHJlOiAyMSxcclxuICAgIHNob3c6ICctJ1xyXG4gIH1cclxuICB2YXIgY2xvc2luZ1Bhck9iaiA9IHtcclxuICAgIHZhbHVlOiAnKScsXHJcbiAgICBzaG93OiAnKScsXHJcbiAgICB0eXBlOiA1LFxyXG4gICAgcHJlOiAwXHJcbiAgfVxyXG4gIHZhciBvcGVuaW5nUGFyT2JqID0ge1xyXG4gICAgdmFsdWU6ICcoJyxcclxuICAgIHR5cGU6IDQsXHJcbiAgICBwcmU6IDAsXHJcbiAgICBzaG93OiAnKCdcclxuICB9XHJcbiAgdmFyIHN0ciA9IFtvcGVuaW5nUGFyT2JqXVxyXG4gIHZhciBwdGMgPSBbXSAvLyBQYXJlbnRoZXNpcyB0byBjbG9zZSBhdCB0aGUgYmVnaW5uaW5nIGlzIGFmdGVyIG9uZSB0b2tlblxyXG4gIHZhciBpbnBTdHIgPSBpbnBcclxuICB2YXIga2V5XHJcbiAgdmFyIGFsbG93ZWQgPSB0eXBlMFxyXG4gIHZhciBicmFjVG9DbG9zZSA9IDBcclxuICB2YXIgYXN0ZXJpY2sgPSBlbXB0eVxyXG4gIHZhciBwcmV2S2V5ID0gJydcclxuICB2YXIgaSwgeCwgeVxyXG4gIGlmICh0eXBlb2YgdG9rZW5zICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgTWV4cC5hZGRUb2tlbih0b2tlbnMpXHJcbiAgfVxyXG4gIHZhciBvYmogPSB7fVxyXG4gIGZvciAoaSA9IDA7IGkgPCBpbnBTdHIubGVuZ3RoOyBpKyspIHtcclxuICAgIGlmIChpbnBTdHJbaV0gPT09ICcgJykge1xyXG4gICAgICBjb250aW51ZVxyXG4gICAgfVxyXG4gICAga2V5ID0gJydcclxuICAgIGZvciAoeCA9IChpbnBTdHIubGVuZ3RoIC0gaSA+IChuZXdBci5sZW5ndGggLSAyKSA/IG5ld0FyLmxlbmd0aCAtIDEgOiBpbnBTdHIubGVuZ3RoIC0gaSk7IHggPiAwOyB4LS0pIHtcclxuICAgICAgaWYgKG5ld0FyW3hdID09PSB1bmRlZmluZWQpIGNvbnRpbnVlO1xyXG4gICAgICBmb3IgKHkgPSAwOyB5IDwgbmV3QXJbeF0ubGVuZ3RoOyB5KyspIHtcclxuICAgICAgICBpZiAobWF0Y2goaW5wU3RyLCBuZXdBclt4XVt5XSwgaSwgeCkpIHtcclxuICAgICAgICAgIGtleSA9IG5ld0FyW3hdW3ldXHJcbiAgICAgICAgICB5ID0gbmV3QXJbeF0ubGVuZ3RoXHJcbiAgICAgICAgICB4ID0gMFxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaSArPSBrZXkubGVuZ3RoIC0gMVxyXG4gICAgaWYgKGtleSA9PT0gJycpIHtcclxuICAgICAgdGhyb3cgKG5ldyBNZXhwLkV4Y2VwdGlvbignQ2FuXFwndCB1bmRlcnN0YW5kIGFmdGVyICcgKyBpbnBTdHIuc2xpY2UoaSkpKVxyXG4gICAgfVxyXG4gICAgdmFyIGluZGV4ID0gdG9rZW4uaW5kZXhPZihrZXkpXHJcbiAgICB2YXIgY1Rva2VuID0ga2V5XHJcbiAgICB2YXIgY1R5cGUgPSB0eXBlW2luZGV4XVxyXG4gICAgdmFyIGNFdiA9IGV2YVtpbmRleF1cclxuICAgIHZhciBjUHJlID0gcHJlY2VkW2NUeXBlXVxyXG4gICAgdmFyIGNTaG93ID0gc2hvd1tpbmRleF1cclxuICAgIHZhciBwcmUgPSBzdHJbc3RyLmxlbmd0aCAtIDFdXHJcbiAgICB2YXIgalxyXG4gICAgZm9yIChqID0gcHRjLmxlbmd0aDsgai0tOykgeyAvLyBsb29wIG92ZXIgcHRjXHJcbiAgICAgIGlmIChwdGNbal0gPT09IDApIHtcclxuICAgICAgICBpZiAoWzAsIDIsIDMsIDQsIDUsIDksIDExLCAxMiwgMTNdLmluZGV4T2YoY1R5cGUpICE9PSAtMSkge1xyXG4gICAgICAgICAgaWYgKGFsbG93ZWRbY1R5cGVdICE9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIHRocm93IChuZXcgTWV4cC5FeGNlcHRpb24oa2V5ICsgJyBpcyBub3QgYWxsb3dlZCBhZnRlciAnICsgcHJldktleSkpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBzdHIucHVzaChjbG9zaW5nUGFyT2JqKVxyXG4gICAgICAgICAgYWxsb3dlZCA9IHR5cGUxXHJcbiAgICAgICAgICBhc3RlcmljayA9IHR5cGUzQXN0ZXJpY2tcclxuICAgICAgICAgIGluYyhwdGMsIC0xKS5wb3AoKVxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIGJyZWFrXHJcbiAgICB9XHJcbiAgICBpZiAoYWxsb3dlZFtjVHlwZV0gIT09IHRydWUpIHtcclxuICAgICAgdGhyb3cgKG5ldyBNZXhwLkV4Y2VwdGlvbihrZXkgKyAnIGlzIG5vdCBhbGxvd2VkIGFmdGVyICcgKyBwcmV2S2V5KSlcclxuICAgIH1cclxuICAgIGlmIChhc3Rlcmlja1tjVHlwZV0gPT09IHRydWUpIHtcclxuICAgICAgY1R5cGUgPSAyXHJcbiAgICAgIGNFdiA9IE1leHAubWF0aC5tdWxcclxuICAgICAgY1Nob3cgPSAnJnRpbWVzOydcclxuICAgICAgY1ByZSA9IDNcclxuICAgICAgaSA9IGkgLSBrZXkubGVuZ3RoXHJcbiAgICB9XHJcbiAgICBvYmogPSB7XHJcbiAgICAgIHZhbHVlOiBjRXYsXHJcbiAgICAgIHR5cGU6IGNUeXBlLFxyXG4gICAgICBwcmU6IGNQcmUsXHJcbiAgICAgIHNob3c6IGNTaG93XHJcbiAgICB9XHJcbiAgICBpZiAoY1R5cGUgPT09IDApIHtcclxuICAgICAgYWxsb3dlZCA9IHR5cGUwXHJcbiAgICAgIGFzdGVyaWNrID0gZW1wdHlcclxuICAgICAgaW5jKHB0YywgMikucHVzaCgyKVxyXG4gICAgICBzdHIucHVzaChvYmopXHJcbiAgICAgIHN0ci5wdXNoKG9wZW5pbmdQYXJPYmopXHJcbiAgICB9IGVsc2UgaWYgKGNUeXBlID09PSAxKSB7XHJcbiAgICAgIGlmIChwcmUudHlwZSA9PT0gMSkge1xyXG4gICAgICAgIHByZS52YWx1ZSArPSBjRXZcclxuICAgICAgICBpbmMocHRjLCAxKVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHN0ci5wdXNoKG9iailcclxuICAgICAgfVxyXG4gICAgICBhbGxvd2VkID0gdHlwZTFcclxuICAgICAgYXN0ZXJpY2sgPSB0eXBlMUFzdGVyaWNrXHJcbiAgICB9IGVsc2UgaWYgKGNUeXBlID09PSAyKSB7XHJcbiAgICAgIGFsbG93ZWQgPSB0eXBlMFxyXG4gICAgICBhc3RlcmljayA9IGVtcHR5XHJcbiAgICAgIGluYyhwdGMsIDIpXHJcbiAgICAgIHN0ci5wdXNoKG9iailcclxuICAgIH0gZWxzZSBpZiAoY1R5cGUgPT09IDMpIHsgLy8gY29uc3RhbnRcclxuICAgICAgc3RyLnB1c2gob2JqKVxyXG4gICAgICBhbGxvd2VkID0gdHlwZTFcclxuICAgICAgYXN0ZXJpY2sgPSB0eXBlM0FzdGVyaWNrXHJcbiAgICB9IGVsc2UgaWYgKGNUeXBlID09PSA0KSB7XHJcbiAgICAgIGluYyhwdGMsIDEpXHJcbiAgICAgIGJyYWNUb0Nsb3NlKytcclxuICAgICAgYWxsb3dlZCA9IHR5cGUwXHJcbiAgICAgIGFzdGVyaWNrID0gZW1wdHlcclxuICAgICAgc3RyLnB1c2gob2JqKVxyXG4gICAgfSBlbHNlIGlmIChjVHlwZSA9PT0gNSkge1xyXG4gICAgICBpZiAoIWJyYWNUb0Nsb3NlKSB7XHJcbiAgICAgICAgdGhyb3cgKG5ldyBNZXhwLkV4Y2VwdGlvbignQ2xvc2luZyBwYXJlbnRoZXNpcyBhcmUgbW9yZSB0aGFuIG9wZW5pbmcgb25lLCB3YWl0IFdoYXQhISEnKSlcclxuICAgICAgfVxyXG4gICAgICBicmFjVG9DbG9zZS0tXHJcbiAgICAgIGFsbG93ZWQgPSB0eXBlMVxyXG4gICAgICBhc3RlcmljayA9IHR5cGUzQXN0ZXJpY2tcclxuICAgICAgc3RyLnB1c2gob2JqKVxyXG4gICAgfSBlbHNlIGlmIChjVHlwZSA9PT0gNikge1xyXG4gICAgICBpZiAocHJlLmhhc0RlYykge1xyXG4gICAgICAgIHRocm93IChuZXcgTWV4cC5FeGNlcHRpb24oJ1R3byBkZWNpbWFscyBhcmUgbm90IGFsbG93ZWQgaW4gb25lIG51bWJlcicpKVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChwcmUudHlwZSAhPT0gMSkge1xyXG4gICAgICAgIHByZSA9IHtcclxuICAgICAgICAgIHZhbHVlOiAwLFxyXG4gICAgICAgICAgdHlwZTogMSxcclxuICAgICAgICAgIHByZTogMFxyXG4gICAgICAgIH0gLy8gcHJlIG5lZWRzIHRvIGJlIGNoYW5nZWQgYXMgaXQgd2lsbCB0aGUgbGFzdCB2YWx1ZSBub3cgdG8gYmUgc2FmZSBpbiBsYXRlciBjb2RlXHJcbiAgICAgICAgc3RyLnB1c2gocHJlKVxyXG4gICAgICAgIGluYyhwdGMsIC0xKVxyXG4gICAgICB9XHJcbiAgICAgIGFsbG93ZWQgPSB0eXBlNlxyXG4gICAgICBpbmMocHRjLCAxKVxyXG4gICAgICBhc3RlcmljayA9IGVtcHR5XHJcbiAgICAgIHByZS52YWx1ZSArPSBjRXZcclxuICAgICAgcHJlLmhhc0RlYyA9IHRydWVcclxuICAgIH0gZWxzZSBpZiAoY1R5cGUgPT09IDcpIHtcclxuICAgICAgYWxsb3dlZCA9IHR5cGUxXHJcbiAgICAgIGFzdGVyaWNrID0gdHlwZTNBc3Rlcmlja1xyXG4gICAgICBpbmMocHRjLCAxKVxyXG4gICAgICBzdHIucHVzaChvYmopXHJcbiAgICB9XHJcbiAgICBpZiAoY1R5cGUgPT09IDgpIHtcclxuICAgICAgYWxsb3dlZCA9IHR5cGUwXHJcbiAgICAgIGFzdGVyaWNrID0gZW1wdHlcclxuICAgICAgaW5jKHB0YywgNCkucHVzaCg0KVxyXG4gICAgICBzdHIucHVzaChvYmopXHJcbiAgICAgIHN0ci5wdXNoKG9wZW5pbmdQYXJPYmopXHJcbiAgICB9IGVsc2UgaWYgKGNUeXBlID09PSA5KSB7XHJcbiAgICAgIGlmIChwcmUudHlwZSA9PT0gOSkge1xyXG4gICAgICAgIGlmIChwcmUudmFsdWUgPT09IE1leHAubWF0aC5hZGQpIHtcclxuICAgICAgICAgIHByZS52YWx1ZSA9IGNFdlxyXG4gICAgICAgICAgcHJlLnNob3cgPSBjU2hvd1xyXG4gICAgICAgICAgaW5jKHB0YywgMSlcclxuICAgICAgICB9IGVsc2UgaWYgKHByZS52YWx1ZSA9PT0gTWV4cC5tYXRoLnN1YiAmJiBjU2hvdyA9PT0gJy0nKSB7XHJcbiAgICAgICAgICBwcmUudmFsdWUgPSBNZXhwLm1hdGguYWRkXHJcbiAgICAgICAgICBwcmUuc2hvdyA9ICcrJ1xyXG4gICAgICAgICAgaW5jKHB0YywgMSlcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSBpZiAocHJlLnR5cGUgIT09IDUgJiYgcHJlLnR5cGUgIT09IDcgJiYgcHJlLnR5cGUgIT09IDEgJiYgcHJlLnR5cGUgIT09IDMgJiYgcHJlLnR5cGUgIT09IDEzKSB7IC8vIGNoYW5nZXNpZ24gb25seSB3aGVuIG5lZ2F0aXZlIGlzIGZvdW5kXHJcbiAgICAgICAgaWYgKGNUb2tlbiA9PT0gJy0nKSB7IC8vIGRvIG5vdGhpbmcgZm9yICsgdG9rZW5cclxuICAgICAgICAgIC8vIGRvbid0IGFkZCB3aXRoIHRoZSBhYm92ZSBpZiBzdGF0ZW1lbnQgYXMgdGhhdCB3aWxsIHJ1biB0aGUgZWxzZSBzdGF0ZW1lbnQgb2YgcGFyZW50IGlmIG9uIEN0b2tlbiArXHJcbiAgICAgICAgICBhbGxvd2VkID0gdHlwZTBcclxuICAgICAgICAgIGFzdGVyaWNrID0gZW1wdHlcclxuICAgICAgICAgIGluYyhwdGMsIDIpLnB1c2goMilcclxuICAgICAgICAgIHN0ci5wdXNoKGNoYW5nZVNpZ25PYmopXHJcbiAgICAgICAgICBzdHIucHVzaChvcGVuaW5nUGFyT2JqKVxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzdHIucHVzaChvYmopXHJcbiAgICAgICAgaW5jKHB0YywgMilcclxuICAgICAgfVxyXG4gICAgICBhbGxvd2VkID0gdHlwZTBcclxuICAgICAgYXN0ZXJpY2sgPSBlbXB0eVxyXG4gICAgfSBlbHNlIGlmIChjVHlwZSA9PT0gMTApIHtcclxuICAgICAgYWxsb3dlZCA9IHR5cGUwXHJcbiAgICAgIGFzdGVyaWNrID0gZW1wdHlcclxuICAgICAgaW5jKHB0YywgMilcclxuICAgICAgc3RyLnB1c2gob2JqKVxyXG4gICAgfSBlbHNlIGlmIChjVHlwZSA9PT0gMTEpIHtcclxuICAgICAgYWxsb3dlZCA9IHR5cGUwXHJcbiAgICAgIGFzdGVyaWNrID0gZW1wdHlcclxuICAgICAgc3RyLnB1c2gob2JqKVxyXG4gICAgfSBlbHNlIGlmIChjVHlwZSA9PT0gMTIpIHtcclxuICAgICAgYWxsb3dlZCA9IHR5cGUwXHJcbiAgICAgIGFzdGVyaWNrID0gZW1wdHlcclxuICAgICAgaW5jKHB0YywgNikucHVzaCg2KVxyXG4gICAgICBzdHIucHVzaChvYmopXHJcbiAgICAgIHN0ci5wdXNoKG9wZW5pbmdQYXJPYmopXHJcbiAgICB9IGVsc2UgaWYgKGNUeXBlID09PSAxMykge1xyXG4gICAgICBhbGxvd2VkID0gdHlwZTFcclxuICAgICAgYXN0ZXJpY2sgPSB0eXBlM0FzdGVyaWNrXHJcbiAgICAgIHN0ci5wdXNoKG9iailcclxuICAgIH1cclxuICAgIGluYyhwdGMsIC0xKVxyXG4gICAgcHJldktleSA9IGtleVxyXG4gIH1cclxuICBmb3IgKGogPSBwdGMubGVuZ3RoOyBqLS07KSB7IC8vIGxvb3Agb3ZlciBwdGNcclxuICAgIGlmIChwdGNbal0gPT09IDApIHtcclxuICAgICAgc3RyLnB1c2goY2xvc2luZ1Bhck9iailcclxuICAgICAgaW5jKHB0YywgLTEpLnBvcCgpXHJcbiAgICB9IGVsc2UgYnJlYWsgIC8vIGlmIGl0IGlzIG5vdCB6ZXJvIHNvIGJlZm9yZSBwdGMgYWxzbyBjYW50IGJlIHplcm9cclxuICB9XHJcbiAgaWYgKGFsbG93ZWRbNV0gIT09IHRydWUpIHtcclxuICAgIHRocm93IChuZXcgTWV4cC5FeGNlcHRpb24oJ2NvbXBsZXRlIHRoZSBleHByZXNzaW9uJykpXHJcbiAgfVxyXG4gIHdoaWxlIChicmFjVG9DbG9zZS0tKSB7XHJcbiAgICBzdHIucHVzaChjbG9zaW5nUGFyT2JqKVxyXG4gIH1cclxuXHJcbiAgc3RyLnB1c2goY2xvc2luZ1Bhck9iailcclxuICAvLyAgICAgICAgY29uc29sZS5sb2coc3RyKTtcclxuICByZXR1cm4gbmV3IE1leHAoc3RyKVxyXG59XHJcbm1vZHVsZS5leHBvcnRzID0gTWV4cFxyXG4iLCJ2YXIgTWV4cCA9IGZ1bmN0aW9uIChwYXJzZWQpIHtcclxuICB0aGlzLnZhbHVlID0gcGFyc2VkXHJcbn1cclxuXHJcbk1leHAubWF0aCA9IHtcclxuICBpc0RlZ3JlZTogdHJ1ZSwgLy8gbW9kZSBvZiBjYWxjdWxhdG9yXHJcbiAgYWNvczogZnVuY3Rpb24gKHgpIHtcclxuICAgIHJldHVybiAoTWV4cC5tYXRoLmlzRGVncmVlID8gMTgwIC8gTWF0aC5QSSAqIE1hdGguYWNvcyh4KSA6IE1hdGguYWNvcyh4KSlcclxuICB9LFxyXG4gIGFkZDogZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgIHJldHVybiBhICsgYlxyXG4gIH0sXHJcbiAgYXNpbjogZnVuY3Rpb24gKHgpIHtcclxuICAgIHJldHVybiAoTWV4cC5tYXRoLmlzRGVncmVlID8gMTgwIC8gTWF0aC5QSSAqIE1hdGguYXNpbih4KSA6IE1hdGguYXNpbih4KSlcclxuICB9LFxyXG4gIGF0YW46IGZ1bmN0aW9uICh4KSB7XHJcbiAgICByZXR1cm4gKE1leHAubWF0aC5pc0RlZ3JlZSA/IDE4MCAvIE1hdGguUEkgKiBNYXRoLmF0YW4oeCkgOiBNYXRoLmF0YW4oeCkpXHJcbiAgfSxcclxuICBhY29zaDogZnVuY3Rpb24gKHgpIHtcclxuICAgIHJldHVybiBNYXRoLmxvZyh4ICsgTWF0aC5zcXJ0KHggKiB4IC0gMSkpXHJcbiAgfSxcclxuICBhc2luaDogZnVuY3Rpb24gKHgpIHtcclxuICAgIHJldHVybiBNYXRoLmxvZyh4ICsgTWF0aC5zcXJ0KHggKiB4ICsgMSkpXHJcbiAgfSxcclxuICBhdGFuaDogZnVuY3Rpb24gKHgpIHtcclxuICAgIHJldHVybiBNYXRoLmxvZygoMSArIHgpIC8gKDEgLSB4KSlcclxuICB9LFxyXG4gIEM6IGZ1bmN0aW9uIChuLCByKSB7XHJcbiAgICB2YXIgcHJvID0gMVxyXG4gICAgdmFyIG90aGVyID0gbiAtIHJcclxuICAgIHZhciBjaG9pY2UgPSByXHJcbiAgICBpZiAoY2hvaWNlIDwgb3RoZXIpIHtcclxuICAgICAgY2hvaWNlID0gb3RoZXJcclxuICAgICAgb3RoZXIgPSByXHJcbiAgICB9XHJcbiAgICBmb3IgKHZhciBpID0gY2hvaWNlICsgMTsgaSA8PSBuOyBpKyspIHtcclxuICAgICAgcHJvICo9IGlcclxuICAgIH1cclxuICAgIHJldHVybiBwcm8gLyBNZXhwLm1hdGguZmFjdChvdGhlcilcclxuICB9LFxyXG4gIGNoYW5nZVNpZ246IGZ1bmN0aW9uICh4KSB7XHJcbiAgICByZXR1cm4gLXhcclxuICB9LFxyXG4gIGNvczogZnVuY3Rpb24gKHgpIHtcclxuICAgIGlmIChNZXhwLm1hdGguaXNEZWdyZWUpIHggPSBNZXhwLm1hdGgudG9SYWRpYW4oeClcclxuICAgIHJldHVybiBNYXRoLmNvcyh4KVxyXG4gIH0sXHJcbiAgY29zaDogZnVuY3Rpb24gKHgpIHtcclxuICAgIHJldHVybiAoTWF0aC5wb3coTWF0aC5FLCB4KSArIE1hdGgucG93KE1hdGguRSwgLTEgKiB4KSkgLyAyXHJcbiAgfSxcclxuICBkaXY6IGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICByZXR1cm4gYSAvIGJcclxuICB9LFxyXG4gIGZhY3Q6IGZ1bmN0aW9uIChuKSB7XHJcbiAgICBpZiAobiAlIDEgIT09IDApIHJldHVybiAnTmFOJ1xyXG4gICAgdmFyIHBybyA9IDFcclxuICAgIGZvciAodmFyIGkgPSAyOyBpIDw9IG47IGkrKykge1xyXG4gICAgICBwcm8gKj0gaVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHByb1xyXG4gIH0sXHJcbiAgaW52ZXJzZTogZnVuY3Rpb24gKHgpIHtcclxuICAgIHJldHVybiAxIC8geFxyXG4gIH0sXHJcbiAgbG9nOiBmdW5jdGlvbiAoaSkge1xyXG4gICAgcmV0dXJuIE1hdGgubG9nKGkpIC8gTWF0aC5sb2coMTApXHJcbiAgfSxcclxuICBtb2Q6IGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICByZXR1cm4gYSAlIGJcclxuICB9LFxyXG4gIG11bDogZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgIHJldHVybiBhICogYlxyXG4gIH0sXHJcbiAgUDogZnVuY3Rpb24gKG4sIHIpIHtcclxuICAgIHZhciBwcm8gPSAxXHJcbiAgICBmb3IgKHZhciBpID0gTWF0aC5mbG9vcihuKSAtIE1hdGguZmxvb3IocikgKyAxOyBpIDw9IE1hdGguZmxvb3Iobik7IGkrKykge1xyXG4gICAgICBwcm8gKj0gaVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHByb1xyXG4gIH0sXHJcbiAgUGk6IGZ1bmN0aW9uIChsb3csIGhpZ2gsIGV4KSB7XHJcbiAgICB2YXIgcHJvID0gMVxyXG4gICAgZm9yICh2YXIgaSA9IGxvdzsgaSA8PSBoaWdoOyBpKyspIHtcclxuICAgICAgcHJvICo9IE51bWJlcihleC5wb3N0Zml4RXZhbCh7XHJcbiAgICAgICAgbjogaVxyXG4gICAgICB9KSlcclxuICAgIH1cclxuICAgIHJldHVybiBwcm9cclxuICB9LFxyXG4gIHBvdzEweDogZnVuY3Rpb24gKGUpIHtcclxuICAgIHZhciB4ID0gMVxyXG4gICAgd2hpbGUgKGUtLSkge1xyXG4gICAgICB4ICo9IDEwXHJcbiAgICB9XHJcbiAgICByZXR1cm4geFxyXG4gIH0sXHJcbiAgc2lnbWE6IGZ1bmN0aW9uIChsb3csIGhpZ2gsIGV4KSB7XHJcbiAgICB2YXIgc3VtID0gMFxyXG4gICAgZm9yICh2YXIgaSA9IGxvdzsgaSA8PSBoaWdoOyBpKyspIHtcclxuICAgICAgc3VtICs9IE51bWJlcihleC5wb3N0Zml4RXZhbCh7XHJcbiAgICAgICAgbjogaVxyXG4gICAgICB9KSlcclxuICAgIH1cclxuICAgIHJldHVybiBzdW1cclxuICB9LFxyXG4gIHNpbjogZnVuY3Rpb24gKHgpIHtcclxuICAgIGlmIChNZXhwLm1hdGguaXNEZWdyZWUpIHggPSBNZXhwLm1hdGgudG9SYWRpYW4oeClcclxuICAgIHJldHVybiBNYXRoLnNpbih4KVxyXG4gIH0sXHJcbiAgc2luaDogZnVuY3Rpb24gKHgpIHtcclxuICAgIHJldHVybiAoTWF0aC5wb3coTWF0aC5FLCB4KSAtIE1hdGgucG93KE1hdGguRSwgLTEgKiB4KSkgLyAyXHJcbiAgfSxcclxuICBzdWI6IGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICByZXR1cm4gYSAtIGJcclxuICB9LFxyXG4gIHRhbjogZnVuY3Rpb24gKHgpIHtcclxuICAgIGlmIChNZXhwLm1hdGguaXNEZWdyZWUpIHggPSBNZXhwLm1hdGgudG9SYWRpYW4oeClcclxuICAgIHJldHVybiBNYXRoLnRhbih4KVxyXG4gIH0sXHJcbiAgdGFuaDogZnVuY3Rpb24gKHgpIHtcclxuICAgIHJldHVybiBNZXhwLnNpbmhhKHgpIC8gTWV4cC5jb3NoYSh4KVxyXG4gIH0sXHJcbiAgdG9SYWRpYW46IGZ1bmN0aW9uICh4KSB7XHJcbiAgICByZXR1cm4geCAqIE1hdGguUEkgLyAxODBcclxuICB9XHJcbn1cclxuTWV4cC5FeGNlcHRpb24gPSBmdW5jdGlvbiAobWVzc2FnZSkge1xyXG4gIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2VcclxufVxyXG5tb2R1bGUuZXhwb3J0cyA9IE1leHBcclxuIiwiLyoqXHJcbiAqIEFic3RyYWN0IGNsYXNzIHJlcHJlc2VudGluZyBhIGRpY2Ugcm9sbCB0byBiZSBleHRlbmRlZCBmb3Igc3BlY2lmaWMgcm9sbCBwdXJwb3Nlcy5cclxuICpcclxuICogQGFic3RyYWN0XHJcbiAqIEBwdWJsaWNcclxuICogQGhpZGVjb25zdHJ1Y3RvclxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQWJzdHJhY3RSb2xsIHtcclxuICAgIC8qKlxyXG4gICAgICogQHByb3RlY3RlZFxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAdHlwZSB7Um9sbH1cclxuICAgICAgICAgKiBAcHJvdGVjdGVkXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fZm91bmRyeVJvbGwgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRXZhbHVhdGVkIHJvbGwgZm9ybXVsYSBleHByZXNzZWQgYXMgWGRZK1pcclxuICAgICAqXHJcbiAgICAgKiBAcHVibGljXHJcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxyXG4gICAgICovXHJcbiAgICBnZXQgZXZhbHVhdGVkRm9ybXVsYSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZm91bmRyeVJvbGwuZm9ybXVsYTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJvbGwgcmVzdWx0LiBOdWxsIGlmIHRoZSByb2xsIGhhc24ndCBiZWVuIG1hZGUgeWV0LlxyXG4gICAgICpcclxuICAgICAqIEBwdWJsaWNcclxuICAgICAqIEB0eXBlIHtOdW1iZXJ8bnVsbH1cclxuICAgICAqL1xyXG4gICAgZ2V0IHRvdGFsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9mb3VuZHJ5Um9sbC50b3RhbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEZvdW5kcnkgZGljZSBkYXRhXHJcbiAgICAgKlxyXG4gICAgICogQHB1YmxpY1xyXG4gICAgICogQHR5cGUge0FycmF5LjxEaWU+fVxyXG4gICAgICovXHJcbiAgICBnZXQgZm91bmRyeURpY2UoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZvdW5kcnlSb2xsLmRpY2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNYWtlcyB0aGUgcm9sbFxyXG4gICAgICpcclxuICAgICAqIEBwdWJsaWNcclxuICAgICAqIEByZXR1cm5zIHtBYnN0cmFjdFJvbGx9IFNlbGZcclxuICAgICAqL1xyXG4gICAgcm9sbCgpIHtcclxuICAgICAgICB0aGlzLl9mb3VuZHJ5Um9sbC5yb2xsKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybXVsYVBhcnNlciB7XHJcbiAgICBzdGF0aWMgc3VjY2Vzc1JvbGxGb3JtdWxhKGZvcm11bGEpIHtcclxuICAgICAgICBjb25zdCByZWdleE1hdGNoID0gKGZvcm11bGEgKyAnJykubWF0Y2goL14oPzooW2EtekEtWl1bXi1cXHJcXG5cXGZcXHZcXDBdKiktKT8oICpcXGQrKSgoPzogKlsrLV0gKlswLTldKyAqKD86ICpcXChbXlxcclxcblxcZlxcdlxcMCgpXStcXCkgKik/KSopJC8pO1xyXG4gICAgICAgIGlmIChyZWdleE1hdGNoID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAgICAgICAgIGBDYW4ndCBwYXJzZSBzdWNjZXNzIHJvbGwgZm9ybXVsYSAnJHtmb3JtdWxhfScgLSBpdCBtdXN0IGFkaGVyZSB0byB0aGUgZm9sbG93aW5nIGZvcm1hdDogWzx0cmFpdCBuYW1lIGJlZ2lubmluZyB3aXRoIGEgbGV0dGVyIGFuZCBjb250YWluaW5nIG5vIC0gc2lnbnM+LV08bGV2ZWw+WzxudW1lcmljIG1vZGlmaWVycyBpbmNsdWRpbmcgdGhlICsgYW5kIC0gc2lnbnMsIGFuZCBvcHRpb25hbGx5IHNwYWNlcz5dYFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHsgdHJhaXQ6IHJlZ2V4TWF0Y2hbMV0gfHwgbnVsbCwgbGV2ZWw6IHBhcnNlSW50KHJlZ2V4TWF0Y2hbMl0sIDEwKSwgbW9kaWZpZXJzOiByZWdleE1hdGNoWzNdIHx8IG51bGwgfTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgbW9kTGlzdChtb2RpZmllcnNGb3JtdWxhTGVmdFRvTWF0Y2gpIHtcclxuICAgICAgICBjb25zdCBtb2RMaXN0ID0gW107XHJcblxyXG4gICAgICAgIHdoaWxlIChtb2RpZmllcnNGb3JtdWxhTGVmdFRvTWF0Y2gubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb25zdCBmb3JtdWxhTWF0Y2ggPSBtb2RpZmllcnNGb3JtdWxhTGVmdFRvTWF0Y2gubWF0Y2goL14oICpbKy1dICpbMC05XSsgKig/OiAqXFwoW15cXHJcXG5cXGZcXHZcXDAoKV0rXFwpICopPykrJC8pO1xyXG4gICAgICAgICAgICBpZiAoZm9ybXVsYU1hdGNoID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgYENhbid0IHBhcnNlIG1vZGlmaWVyIGxpc3QgZm9ybXVsYSAnJHttb2RpZmllcnNGb3JtdWxhTGVmdFRvTWF0Y2h9JyAtIGl0IG11c3QgYWRoZXJlIHRvIHRoZSBmb2xsb3dpbmcgZm9ybWF0OiA8bWFuZGF0b3J5IG51bWVyaWMgbW9kaWZpZXIgaW5jbHVkaW5nIHRoZSArIG9yIC0gc2lnbj5bPG9wdGlvbmFsIG1vZGlmaWVyIGRlc2NyaXB0aW9uIGVuY2xvc2VkIGluIHBhcmVudGhlc2lzPl0sIG9jY3VycmluZyBvbmUgb3IgbW9yZSB0aW1lc2BcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGZvcm11bGFNYXRjaFsxXSB3aWxsIGNvbnRhaW4gdGhlIGxhc3QgbW9kaWZpZXIvZGVzY3JpcHRpb24gc3RyaW5nIHByZXNlbnQgaW4gbW9kaWZpZXJzRm9ybXVsYUxlZnRUb01hdGNoXHJcbiAgICAgICAgICAgIC8vIHNpbmdsZU1vZEV4cHJlc3Npb24gd2lsbCBub3cgYmUgc29tZXRoaW5nIGxpa2UgJyszIChmb28gYmFyKScgb3IganVzdCAnLTInXHJcbiAgICAgICAgICAgIGNvbnN0IHNpbmdsZU1vZEV4cHJlc3Npb24gPSBmb3JtdWxhTWF0Y2hbMV07XHJcbiAgICAgICAgICAgIC8vIHdlIGN1dCBvZmYgdGhhdCBsYXN0IG1vZC9kZXNjcmlwdGlvbiBzdHJpbmcgZnJvbSB0aGUgZm9ybXVsYSBmb3IgdGhlIGZvbGxvd2luZyBpdGVyYXRpb25cclxuICAgICAgICAgICAgbW9kaWZpZXJzRm9ybXVsYUxlZnRUb01hdGNoID0gbW9kaWZpZXJzRm9ybXVsYUxlZnRUb01hdGNoLnN1YnN0cigwLCBtb2RpZmllcnNGb3JtdWxhTGVmdFRvTWF0Y2gubGVuZ3RoIC0gc2luZ2xlTW9kRXhwcmVzc2lvbi5sZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgLy8gc2luZ2xlTW9kRXhwcmVzc2lvbk1hdGNoIHdpbGwgY29udGFpbiB0aGUgbnVtZXJpYyBtb2RpZmllciBhdCBwb3NpdGlvbiAxLCBhbmQgYSBkZXNjcmlwdGlvbiBhdFxyXG4gICAgICAgICAgICAvLyBwb3NpdGlvbiAyIGlmIG9uZSB3YXMgc3VwcGxpZWQ7IGl0IGl0IHdhc24ndCwgcG9zaXRpb24gMiB3aWxsIGJlIHVuZGVmaW5lZFxyXG4gICAgICAgICAgICBjb25zdCBzaW5nbGVNb2RFeHByZXNzaW9uTWF0Y2ggPSBzaW5nbGVNb2RFeHByZXNzaW9uLnRyaW0oKS5tYXRjaCgvXihbKy1dICpbMC05XSspICooPzogKlxcKChbXlxcclxcblxcZlxcdlxcMCgpXSspXFwpKT8kLyk7XHJcblxyXG4gICAgICAgICAgICBtb2RMaXN0LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgbW9kaWZpZXI6IHNpbmdsZU1vZEV4cHJlc3Npb25NYXRjaFsxXS5yZXBsYWNlKC9cXHMvLCAnJyksXHJcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogc2luZ2xlTW9kRXhwcmVzc2lvbk1hdGNoWzJdICE9PSB1bmRlZmluZWQgPyBzaW5nbGVNb2RFeHByZXNzaW9uTWF0Y2hbMl0udHJpbSgpIDogJycsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG1vZExpc3Q7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGRhbWFnZVJvbGxGb3JtdWxhKGZvcm11bGEpIHtcclxuICAgICAgICBjb25zdCByZWdleE1hdGNoID0gKGZvcm11bGEgKyAnJykubWF0Y2goL14oWzEtOV1bMC05XSopZDY/KCg/OiAqWystXSAqWzAtOV0rICooPzogKlxcKFteXFxkXFxyXFxuXFxmXFx2XFwwKCldW15cXHJcXG5cXGZcXHZcXDAoKV0qXFwpICopPykqKSguKikkLyk7XHJcbiAgICAgICAgaWYgKHJlZ2V4TWF0Y2ggPT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgICAgICAgICAgYENhbid0IHBhcnNlIGRhbWFnZSByb2xsIGZvcm11bGEgJyR7Zm9ybXVsYX0nIC0gaXQgbXVzdCBhZGhlcmUgdG8gdGhlIGZvbGxvd2luZyBmb3JtYXQ6IDxudW1iZXIgb2YgZGljZT5kWzxudW1lcmljIG1vZGlmaWVycyBpbmNsdWRpbmcgdGhlICsgYW5kIC0gc2lnbnMsIGFuZCBvcHRpb25hbGx5IHNwYWNlcz5dWzxleHRyYSBub24tcm9sbCBpbmZvcm1hdGlvbiBzdWNoIGFzIGFybW9yIGRpdmlzb3IsIGRhbWFnZSB0eXBlIGV0Yz5dYFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHsgZGljZTogcGFyc2VJbnQocmVnZXhNYXRjaFsxXSwgMTApLCBhZGRzOiByZWdleE1hdGNoWzJdIHx8ICcnLCBtZXRhOiByZWdleE1hdGNoWzNdIHx8ICcnIH07XHJcbiAgICB9XHJcbn1cclxuIiwiZXhwb3J0IGNvbnN0IGNhbm9uaWNpemVNb2RMaXN0ID0gbW9kTGlzdCA9PiBtb2RMaXN0Lm1hcChtb2QgPT4ge1xyXG4gICAgbGV0IG1vZGlmaWVyID0gcGFyc2VJbnQobW9kLm1vZGlmaWVyLCAxMCk7XHJcbiAgICBpZiAobW9kaWZpZXIgPiAwKSB7XHJcbiAgICAgICAgbW9kaWZpZXIgPSBgKyR7bW9kaWZpZXJ9YDtcclxuICAgIH0gZWxzZSBpZiAobW9kaWZpZXIgPCAwKSB7XHJcbiAgICAgICAgbW9kaWZpZXIgPSBgJHttb2RpZmllcn1gO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7Li4ubW9kLCBtb2RpZmllcn07XHJcbn0pOyIsImltcG9ydCBBYnN0cmFjdFJvbGwgZnJvbSAnLi9BYnN0cmFjdFJvbGwuanMnO1xyXG5pbXBvcnQgbWV4cCBmcm9tICdtYXRoLWV4cHJlc3Npb24tZXZhbHVhdG9yJztcclxuaW1wb3J0IHBhcnNlIGZyb20gJy4vRm9ybXVsYVBhcnNlci5qcyc7XHJcbmltcG9ydCB7IGNhbm9uaWNpemVNb2RMaXN0IH0gZnJvbSAnLi9Nb2RMaXN0LmpzJztcclxuXHJcbi8qKlxyXG4gKiBDbGFzcyByZXByZXNlbnRpbmcgYSBkYW1hZ2Ugcm9sbC5cclxuICpcclxuICogQGV4dGVuZHMgQWJzdHJhY3RSb2xsXHJcbiAqIEBoaWRlY29uc3RydWN0b3JcclxuICogQGluaGVyaXREb2NcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGFtYWdlUm9sbCBleHRlbmRzIEFic3RyYWN0Um9sbCB7XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBkYW1hZ2Ugcm9sbCBvYmplY3QgYnkgcGFyc2luZyBhIGZvcm11bGEgYmFzZWQgb24gdGhlIHN0YW5kYXJkIEdVUlBTIGRhbWFnZSBub3RhdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcHVibGljXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZm9ybXVsYSBVc2VzIHRoZSAmbHQ7bnVtYmVyIG9mIGRpY2UmZ3Q7ZFsmbHQ7bGlzdCBvZiBhZGRzJmd0O11bJmx0O21ldGEgaW5mb3JtYXRpb24mZ3Q7XSBmb3JtYXQuIFRoZSBudW1iZXIgb2YgZGljZSByZXByZXNlbnRlZCBieSBhbiBpbnRlZ2VyIGlzIHJlcXVpcmVkLiBUaGUgb3B0aW9uYWwgbGlzdCBvZiBhZGRzIG1heSBjb250YWluIG9uZSBvciBtb3JlIGFkZHMgc3VwcGxpZWQgaW4gK1ggb3IgLVkgZm9ybSBmb2xsb3dlZCBieSBhbiBvcHRpb25hbCBkZXNjcmlwdGlvbiBpbiBwYXJlbnRoZXNlczsgb3B0aW9uYWwgc3BhY2VzIGFyZSBhbGxvd2VkIGJldHdlZW4gdGhlIGFkZHMgYXMgd2VsbCBhcyBiZXR3ZWVuIHRoZW0gYW5kIHRoZSArLy0gc2lnbnMsIGJ1dCBubyBvdGhlciBjaGFyYWN0ZXJzIGFyZSBhbGxvd2VkIGFuZCBldmVyeSBudW1lcmljIGFkZCBtdXN0IGhhdmUgZWl0aGVyIGEgKyBvciAtIHNpZ24gcHJlY2VkaW5nIGl0LiBPcHRpb25hbCBhZGQgZGVzY3JpcHRpb25zIG1heSBjb250YWluIGFueSBjaGFyYWN0ZXJzIGV4Y2VwdCBwYXJlbnRoZXNlcyBidXQgbWF5IG5vdCBzdGFydCB3aXRoIGRpZ2l0cy4gRmluYWxseSwgYWRkaXRpb25hbCBub24tcm9sbGFibGUgaW5mb3JtYXRpb24gc3VjaCBhcyBhcm1vciBkaXZpc29yLCBkYW1hZ2UgdHlwZSBldGMsIG1heSBiZSBzdXBwbGllZCBhZnRlciB0aGUgYWRkcy4gVGhpcyBzZWN0aW9uIG1heSBjb250YWluIGFueSBjaGFyYWN0ZXJzIGV4Y2VwdCBsaW5lIGJyZWFrcywgYnV0IG11c3Qgbm90IGJlZ2luIHdpdGggYSArIG9yIC0gc2lnbiBmb2xsb3dlZCBieSBhIGRpZ2l0ICh3aGljaCB3b3VsZCBiZSBwYXJzZWQgYXMgcGFydCBvZiB0aGUgZGFtYWdlIGFkZHMpLiBOb25lIG9mIHRoaXMgbWV0YS1pbmZvcm1hdGlvbiBhZmZlY3RzIHRoZSByb2xsIGluIGFueSB3YXkuXHJcbiAgICAgKiBAcmV0dXJuIHtEYW1hZ2VSb2xsfVxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiAvLyBSb2xsIDJkIGRhbWFnZVxyXG4gICAgICogRGFtYWdlUm9sbC5mcm9tRm9ybXVsYSgnMmQnKTtcclxuICAgICAqXHJcbiAgICAgKiAvLyBSb2xsIDRkKzIgY3J1c2hpbmcgZGFtYWdlXHJcbiAgICAgKiBEYW1hZ2VSb2xsLmZyb21Gb3JtdWxhKCc0ZCsyIGNyJyk7XHJcbiAgICAgKlxyXG4gICAgICogLy8gUm9sbCAxZC0xIGN1dHRpbmcgZGFtYWdlIGJ1dCBhZGQgKzIgZm9yIGFuIEFsbC1PdXQgQXR0YWNrIChTdHJvbmcpIGFuZCArMSBmb3IgYSBkd2FydmVuIHdoZXRzdG9uZVxyXG4gICAgICogRGFtYWdlUm9sbC5mcm9tRm9ybXVsYSgnMWQtMSArMiArMSBjdXQnKTtcclxuICAgICAqXHJcbiAgICAgKiAvLyBSb2xsIDZkKzIgYnVybiBkYW1hZ2Ugd2l0aCBhcm1vciBkaXZpc29yIDUgYW5kIHRoZSBzdXJnZSBtb2RpZmllclxyXG4gICAgICogRGFtYWdlUm9sbC5mcm9tRm9ybXVsYSgnNmQrMig1KSBidXJuIHN1cicpXHJcbiAgICAgKlxyXG4gICAgICogLy8gUm9sbCAyZC0xIGN1dHRpbmcgZGFtYWdlIHdpdGggKzIgZnJvbSBBbGwgT3V0IEF0dGFjayAoU3Ryb25nKVxyXG4gICAgICogRGFtYWdlUm9sbC5mcm9tRm9ybXVsYSgnMmQtMSArMiAoQWxsIE91dCBBdHRhY2sgU3Ryb25nKSBjdXQnKTtcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGZyb21Gb3JtdWxhKGZvcm11bGEpIHtcclxuICAgICAgICByZXR1cm4gbmV3IERhbWFnZVJvbGwoeyBmb3JtdWxhIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIGRhbWFnZSByb2xsIG9iamVjdCBmcm9tIHN0cnVjdHVyZWQgZGF0YS5cclxuICAgICAqXHJcbiAgICAgKiBAcHVibGljXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YVxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGRhdGEuZGljZSBOdW1iZXIgb2YgZGFtYWdlIGRpY2UgdG8gcm9sbFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGRhdGEuYWRkcyBPcHRpb25hbCBsaXN0IG9mIGRhbWFnZSBhZGRzLiBNYXkgY29udGFpbiBvbmUgb3IgbW9yZSBkYW1hZ2UgYWRkcyBzdXBwbGllZCBpbiArWCBvciAtWSBmb3JtOyBvcHRpb25hbCBzcGFjZXMgYXJlIGFsbG93ZWQgYmV0d2VlbiB0aGUgYWRkcyBhcyB3ZWxsIGFzIGJldHdlZW4gdGhlbSBhbmQgdGhlICsvLSBzaWducywgYnV0IG5vIG90aGVyIGNoYXJhY3RlcnMgYXJlIGFsbG93ZWQgYW5kIGV2ZXJ5IGFkZCBtdXN0IGhhdmUgZWl0aGVyIGEgKyBvciAtIHNpZ24gcHJlY2VkaW5nIGl0XHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZGF0YS5tZXRhIE9wdGlvbmFsIG5vbi1yb2xsYWJsZSBpbmZvcm1hdGlvbiBzdWNoIGFzIGFybW9yIGRpdmlzb3IsIGRhbWFnZSB0eXBlIGV0Yy4gTm9uZSBvZiB0aGlzIG1ldGEtaW5mb3JtYXRpb24gYWZmZWN0cyB0aGUgcm9sbCBpbiBhbnkgd2F5LlxyXG4gICAgICogQHBhcmFtIHtPYmplY3RbXX0gZGF0YS5tb2RMaXN0IEFycmF5IG9mIG1vZGlmaWVyIG9iamVjdHMgaW4gdGhlIGZvcm0gb2Yge21vZGlmaWVyOiAnKzInLCBkZXNjcmlwdGlvbjogJ0FsbCBPdXQgQXR0YWNrIFN0cm9uZyd9IGFsbG93aW5nIGZvciBzdHJ1Y3R1cmVkIG1hbmFnZW1lbnQgb2YgZXh0ZXJuYWwgZGFtYWdlIG1vZGlmaWVycy4gVGhpcyBpcyB1c2VkIGluIGFkZGl0aW9uIHRvIHRoZSBhZGRzIGFyZ3VtZW50OyBpZiB1c2luZyBtb2RMaXN0LCBhZGRzIHNob3VsZCBjb250YWluIG9ubHkgdGhlIGRhbWFnZSBhZGQgZnJvbSB0aGUgYXR0YWNrJ3MgYmFzZSBkYW1hZ2UsIHdoaWxlIG1vZExpc3Qgc2hvdWxkIGNvbnRhaW4gYWxsIG9mIHRoZSBleHRlcm5hbCBtb2RpZmllcnMuXHJcbiAgICAgKiBAcmV0dXJuIHtEYW1hZ2VSb2xsfVxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiAvLyBSb2xsIDJkIGRhbWFnZVxyXG4gICAgICogRGFtYWdlUm9sbC5mcm9tRGF0YSh7IGRpY2U6IDIgfSk7XHJcbiAgICAgKlxyXG4gICAgICogLy8gUm9sbCA0ZCsyIGNydXNoaW5nIGRhbWFnZVxyXG4gICAgICogRGFtYWdlUm9sbC5mcm9tRGF0YSh7IGRpY2U6IDQsIGFkZHM6ICcrMicsIG1ldGE6ICcgY3InIH0pO1xyXG4gICAgICpcclxuICAgICAqIC8vIFJvbGwgMWQtMSBjdXR0aW5nIGRhbWFnZSBidXQgYWRkICsyIGZvciBhbiBBbGwtT3V0IEF0dGFjayAoU3Ryb25nKSBhbmQgKzEgZm9yIGEgZHdhcnZlbiB3aGV0c3RvbmVcclxuICAgICAqIERhbWFnZVJvbGwuZnJvbURhdGEoeyBkaWNlOiAxLCBhZGRzOiAnLTEgKzIgKzEnLCBtZXRhOiAnIGN1dCcgfSk7XHJcbiAgICAgKlxyXG4gICAgICogLy8gUm9sbCA2ZCsyIGJ1cm4gZGFtYWdlIHdpdGggYXJtb3IgZGl2aXNvciA1IGFuZCB0aGUgc3VyZ2UgbW9kaWZpZXJcclxuICAgICAqIERhbWFnZVJvbGwuZnJvbURhdGEoeyBkaWNlOiA2LCBhZGRzOiAnKzInLCBtZXRhOiAnKDUpIGJ1cm4gc3VyJyB9KVxyXG4gICAgICpcclxuICAgICAqIC8vIFJvbGwgMmQtMSBjdXR0aW5nIGRhbWFnZSB3aXRoICsyIGZyb20gQWxsIE91dCBBdHRhY2sgKFN0cm9uZylcclxuICAgICAqIERhbWFnZVJvbGwuZnJvbURhdGEoeyBkaWNlOiAyLCBhZGRzOiAnLTEnLCBtZXRhOiAnIGN1dCcsIG1vZExpc3Q6IFt7bW9kaWZpZXI6ICcrMicsIGRlc2NyaXB0aW9uOiAnQWxsIE91dCBBdHRhY2sgU3Ryb25nJ31dIH0pO1xyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZnJvbURhdGEoeyBkaWNlLCBhZGRzID0gJycsIG1ldGEgPSAnJywgbW9kTGlzdCA9IFtdIH0pIHtcclxuICAgICAgICByZXR1cm4gbmV3IERhbWFnZVJvbGwoeyBkaWNlLCBhZGRzLCBtZXRhLCBtb2RMaXN0IH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBkaWNlIE51bWJlciBvZiBkYW1hZ2UgZGljZSB0byByb2xsXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gYWRkcyBEYW1hZ2UgYWRkcyBpbiB0aGUgZm9ybSBvZiArLy1YIHdpdGggb3B0aW9uYWwgc3BhY2VzIGJldHdlZW4gdGhlbVxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG1ldGEgSW5mb3JtYXRpb24gYWJvdXQgdGhlIGRhbWFnZSBzdWNoIGFzIGFybW9yIGRpdmlzb3IsIGRhbWFnZSB0eXBlIGV0Y1xyXG4gICAgICogQHBhcmFtIHtPYmplY3RbXX0gbW9kTGlzdCBBcnJheSBvZiBtb2RpZmllciBvYmplY3RzIGluIHRoZSBmb3JtIG9mIHttb2RpZmllcjogJysyJywgZGVzY3JpcHRpb246ICdBbGwgT3V0IEF0dGFjayBTdHJvbmcnfSBhbGxvd2luZyBmb3Igc3RydWN0dXJlZCBtYW5hZ2VtZW50IG9mIGV4dGVybmFsIGRhbWFnZSBtb2RpZmllcnMuIFRoaXMgaXMgdXNlZCBpbiBhZGRpdGlvbiB0byB0aGUgYWRkcyBhcmd1bWVudDsgaWYgdXNpbmcgbW9kTGlzdCwgYWRkcyBzaG91bGQgY29udGFpbiBvbmx5IHRoZSBkYW1hZ2UgYWRkIGZyb20gdGhlIGF0dGFjaydzIGJhc2UgZGFtYWdlLCB3aGlsZSBtb2RMaXN0IHNob3VsZCBjb250YWluIGFsbCBvZiB0aGUgZXh0ZXJuYWwgbW9kaWZpZXJzLlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGZvcm11bGEgRGFtYWdlIHJvbGwgZm9ybXVsYSB0byBiZSBwYXJzZWQsIHRoaXMgY2FuIGJlIHBhc3NlZCBpbnN0ZWFkIG9mIHRoZSBwcmV2aW91cyBmb3VyIHBhcmFtZXRlcnMgd2hpY2ggaXQgb3ZlcnJpZGVzIGNvbXBsZXRlbHlcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoeyBkaWNlID0gbnVsbCwgYWRkcyA9ICcnLCBtZXRhID0gJycsIGZvcm11bGEgPSBudWxsLCBtb2RMaXN0ID0gW10gfSkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcblxyXG4gICAgICAgIGlmIChmb3JtdWxhID09PSBudWxsICYmIGRpY2UgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBdHRlbXB0ZWQgdG8gY3JlYXRlIGEgRGFtYWdlUm9sbCB3aXRoIGJvdGggZGljZSBhbmQgZm9ybXVsYSBlcXVhbCB0byBudWxsOyBhdCBsZWFzdCBvbmUgb2YgdGhlbSBtdXN0IGJlIG5vbi1udWxsIScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGZvcm11bGEgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgY29uc3QgcGFyc2VkRm9ybXVsYSA9IHBhcnNlLmRhbWFnZVJvbGxGb3JtdWxhKGZvcm11bGEpO1xyXG4gICAgICAgICAgICBkaWNlID0gcGFyc2VkRm9ybXVsYS5kaWNlO1xyXG4gICAgICAgICAgICBhZGRzID0gcGFyc2VkRm9ybXVsYS5hZGRzO1xyXG4gICAgICAgICAgICBtZXRhID0gcGFyc2VkRm9ybXVsYS5tZXRhO1xyXG5cclxuICAgICAgICAgICAgaWYgKGFkZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgbW9kTGlzdCA9IHBhcnNlLm1vZExpc3QoYWRkcyk7XHJcbiAgICAgICAgICAgICAgICBtb2RMaXN0ID0gY2Fub25pY2l6ZU1vZExpc3QobW9kTGlzdCk7XHJcbiAgICAgICAgICAgICAgICAvLyBsYXN0IGVsZW1lbnQgaW4gYXJyYXkgaXMgdGhlIGZpcnN0IFwibmF0dXJhbFwiIGRhbWFnZSBhZGRcclxuICAgICAgICAgICAgICAgIGFkZHMgPSBtb2RMaXN0LnBvcCgpLm1vZGlmaWVyO1xyXG4gICAgICAgICAgICAgICAgbW9kTGlzdCA9IG1vZExpc3QucmV2ZXJzZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChtb2RMaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgbW9kTGlzdCA9IGNhbm9uaWNpemVNb2RMaXN0KG1vZExpc3QpO1xyXG4gICAgICAgICAgICBmb3JtdWxhID0gYCR7ZGljZX1kJHthZGRzfSAke21vZExpc3QubWFwKG1vZCA9PiBtb2QubW9kaWZpZXIpLmpvaW4oJyAnKX0gJHttZXRhfWA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZm9ybXVsYSA9IGAke2RpY2V9ZCR7YWRkc30gJHttZXRhfWA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3JtdWxhID0gZm9ybXVsYS5yZXBsYWNlKC9cXHMrLywgJyAnKTtcclxuICAgICAgICBmb3JtdWxhID0gZm9ybXVsYS50cmltKCk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgICAgICogQHByb3RlY3RlZFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX2Zvcm11bGEgPSBmb3JtdWxhO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfVxyXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9mb3JtdWxhV2l0aG91dE1vZExpc3QgPSBgJHtkaWNlfWQke2FkZHN9YDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAgICAgKiBAcHJvdGVjdGVkXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fbWV0YSA9IG1ldGE7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtBcnJheX1cclxuICAgICAgICAgKiBAcHJvdGVjdGVkXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fbW9kTGlzdCA9IG1vZExpc3Q7XHJcblxyXG4gICAgICAgIGlmIChtb2RMaXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgYWRkcyA9IGAke2FkZHN9ICR7bW9kTGlzdC5tYXAobW9kID0+IG1vZC5tb2RpZmllcikuam9pbignICcpfWA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9mb3VuZHJ5Um9sbCA9IG5ldyBSb2xsKGAke2RpY2V9ZDYrJHttZXhwLmV2YWwoKGFkZHMgfHwgMCkudG9TdHJpbmcoKSl9YCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSb2xsIGZvcm11bGEgaW4gdGhlIHN0YW5kYXJkIEdVUlBTIGRhbWFnZSBub3RhdGlvblxyXG4gICAgICpcclxuICAgICAqIEBwdWJsaWNcclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKi9cclxuICAgIGdldCBmb3JtdWxhKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9mb3JtdWxhO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQmFzZSBkYW1hZ2UgZm9yIHJvbGwgd2l0aG91dCBhbnkgbW9kaWZpZXJzIGZyb20gbW9kTGlzdFxyXG4gICAgICpcclxuICAgICAqIEBwdWJsaWNcclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKi9cclxuICAgIGdldCBmb3JtdWxhV2l0aG91dE1vZExpc3QoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Zvcm11bGFXaXRob3V0TW9kTGlzdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE5vbi1yb2xsYWJsZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgZGFtYWdlIHN1Y2ggYXMgYXJtb3IgZGl2aXNvciwgZGFtYWdlIHR5cGUgZXRjXHJcbiAgICAgKlxyXG4gICAgICogQHB1YmxpY1xyXG4gICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAqL1xyXG4gICAgZ2V0IG1ldGEoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX21ldGE7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBcnJheSBvZiBtb2RpZmllcnMgYXBwbGllZCB0byB0aGUgZGFtYWdlIHJvbGwgd2l0aCB0aGVpciBkZXNjcmlwdGlvbnMuIEVsZW1lbnRzIG9mIHRoZSBhcnJheSBhcmUgb2JqZWN0cyBpbiB0aGUge21vZGlmaWVyOiAnKzEnLCBkZXNjcmlwdGlvbjogJ3NvbWUgbW9kaWZpZXInfSBmb3JtYXRcclxuICAgICAqXHJcbiAgICAgKiBAcHVibGljXHJcbiAgICAgKiBAdHlwZSB7T2JqZWN0W119XHJcbiAgICAgKi9cclxuICAgIGdldCBtb2RMaXN0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9tb2RMaXN0O1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBBYnN0cmFjdFJvbGwgZnJvbSAnLi9BYnN0cmFjdFJvbGwuanMnO1xuaW1wb3J0IG1leHAgZnJvbSAnbWF0aC1leHByZXNzaW9uLWV2YWx1YXRvcic7XG5cbi8qKlxuICogQ2xhc3MgcmVwcmVzZW50aW5nIGEgcmVhY3Rpb24gcm9sbC5cbiAqXG4gKiBAZXh0ZW5kcyBBYnN0cmFjdFJvbGxcbiAqIEBoaWRlY29uc3RydWN0b3JcbiAqIEBpbmhlcml0RG9jXG4gKiBAcHVibGljXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlYWN0aW9uUm9sbCBleHRlbmRzIEFic3RyYWN0Um9sbCB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHJlYWN0aW9uIHJvbGwgb2JqZWN0IGZyb20gc3RydWN0dXJlZCBkYXRhLlxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fG51bGx9IGRhdGFcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xudWxsfSBkYXRhLm1vZGlmaWVycyBSZWFjdGlvbiByb2xsIG1vZGlmaWVyc1xuICAgICAqIEByZXR1cm5zIHtSZWFjdGlvblJvbGx9XG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIC8vIFBsYWluIHJlYWN0aW9uIHJvbGxcbiAgICAgKiBSZWFjdGlvblJvbGwuZnJvbURhdGEoKTtcbiAgICAgKlxuICAgICAqIC8vIFJlYWN0aW9uIHJvbGwgd2l0aCBhICs1IGJvbnVzXG4gICAgICogUmVhY3Rpb25Sb2xsLmZyb21EYXRhKHsgbW9kaWZpZXJzOiAnKzUnIH0pO1xuICAgICAqXG4gICAgICogLy8gUmVhY3Rpb24gcm9sbCB3aXRoICsyIGZyb20gb25lIHNvdXJjZSBhbmQgLTEgZnJvbSBhbm90aGVyXG4gICAgICogUmVhY3Rpb25Sb2xsLmZyb21EYXRhKHsgbW9kaWZpZXJzOiAnKzIgLTEnIH0pO1xuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tRGF0YShkYXRhID0gbnVsbCkge1xuICAgICAgICByZXR1cm4gbmV3IFJlYWN0aW9uUm9sbCh7IG1vZGlmaWVyczogZGF0YSA/IGRhdGEubW9kaWZpZXJzIHx8IG51bGwgOiBudWxsIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xudWxsfSBkYXRhLm1vZGlmaWVycyBSZWFjdGlvbiByb2xsIG1vZGlmaWVyc1xuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHsgbW9kaWZpZXJzID0gbnVsbCB9KSB7XG4gICAgICAgIHN1cGVyKCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2V2YWx1YXRlZE1vZGlmaWVycyA9IG51bGw7XG5cbiAgICAgICAgaWYgKG1vZGlmaWVycykge1xuICAgICAgICAgICAgY29uc3QgcmVnZXhNYXRjaCA9IChtb2RpZmllcnMgKyAnJykubWF0Y2goL14oKCAqWystXSAqWzAtOV0rKSopLyk7XG4gICAgICAgICAgICBpZihyZWdleE1hdGNoID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICAgICAgICBgQ2FuJ3QgcGFyc2UgUmVhY3Rpb25Sb2xsIG1vZGlmaWVycyBmb3JtdWxhICcke21vZGlmaWVyc30nIC0gaXQgbXVzdCBjb21wcmlzZSBvZiBudW1lcmljIG1vZGlmaWVycyBpbmNsdWRpbmcgdGhlICsgYW5kIC0gc2lnbnMsIGFuZCBvcHRpb25hbGx5IHNwYWNlcyBiZXR3ZWVuIHRoZW1gXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5fZXZhbHVhdGVkTW9kaWZpZXJzID0gbWV4cC5ldmFsKChyZWdleE1hdGNoWzFdKS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIHRoaXMuX2ZvdW5kcnlSb2xsID0gbmV3IFJvbGwoYDNkNiske3RoaXMuX2V2YWx1YXRlZE1vZGlmaWVyc31gKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2V2YWx1YXRlZE1vZGlmaWVycyA9IDA7XG4gICAgICAgICAgICB0aGlzLl9mb3VuZHJ5Um9sbCA9IG5ldyBSb2xsKCczZDYnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfG51bGx9XG4gICAgICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX21vZGlmaWVycyA9IG1vZGlmaWVycztcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgICAgICogQHByb3RlY3RlZFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fdG90YWwgPSBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1vZGlmaWVycyB0byB0aGUgcmVhY3Rpb24gcm9sbCBhcyBwYXNzZWQgZHVyaW5nIHJvbGwgY3JlYXRpb25cbiAgICAgKlxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAdHlwZSB7U3RyaW5nfG51bGx9XG4gICAgICovXG4gICAgZ2V0IG1vZGlmaWVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX21vZGlmaWVycztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFdmFsdWF0ZWQgbW9kaWZpZXJzIHRvIHRoZSByZWFjdGlvbiByb2xsXG4gICAgICpcbiAgICAgKiBAcHVibGljXG4gICAgICogQHR5cGUge051bWJlcn1cbiAgICAgKi9cbiAgICBnZXQgZXZhbHVhdGVkTW9kaWZpZXJzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZXZhbHVhdGVkTW9kaWZpZXJzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE51bGwgaWYgdGhlIHJvbGwgaGFzbid0IGJlZW4gbWFkZSB5ZXQuXG4gICAgICpcbiAgICAgKiBAcHVibGljXG4gICAgICogQHR5cGUge1N0cmluZ3xudWxsfVxuICAgICAqL1xuICAgIGdldCB0b3RhbCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9mb3VuZHJ5Um9sbC5fcm9sbGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLl90b3RhbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYWtlcyB0aGUgcm9sbFxuICAgICAqXG4gICAgICogQHB1YmxpY1xuICAgICAqIEByZXR1cm5zIHtSZWFjdGlvblJvbGx9IFNlbGZcbiAgICAgKi9cbiAgICByb2xsKCkge1xuICAgICAgICBzdXBlci5yb2xsKCk7XG5cbiAgICAgICAgdGhpcy5fdG90YWwgPSAnRGlzYXN0cm91cydcblxuICAgICAgICBpZiAodGhpcy5fZm91bmRyeVJvbGwudG90YWwgPj0gMSkge1xuICAgICAgICAgICAgdGhpcy5fdG90YWwgPSAnVmVyeSBCYWQnXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5fZm91bmRyeVJvbGwudG90YWwgPj0gNCkge1xuICAgICAgICAgICAgdGhpcy5fdG90YWwgPSAnQmFkJ1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX2ZvdW5kcnlSb2xsLnRvdGFsID49IDcpIHtcbiAgICAgICAgICAgIHRoaXMuX3RvdGFsID0gJ1Bvb3InXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5fZm91bmRyeVJvbGwudG90YWwgPj0gMTApIHtcbiAgICAgICAgICAgIHRoaXMuX3RvdGFsID0gJ05ldXRyYWwnXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5fZm91bmRyeVJvbGwudG90YWwgPj0gMTMpIHtcbiAgICAgICAgICAgIHRoaXMuX3RvdGFsID0gJ0dvb2QnXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5fZm91bmRyeVJvbGwudG90YWwgPj0gMTYpIHtcbiAgICAgICAgICAgIHRoaXMuX3RvdGFsID0gJ1ZlcnkgR29vZCdcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9mb3VuZHJ5Um9sbC50b3RhbCA+PSAxOSkge1xuICAgICAgICAgICAgdGhpcy5fdG90YWwgPSAnRXhjZWxsZW50J1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuIiwiaW1wb3J0IEFic3RyYWN0Um9sbCBmcm9tICcuL0Fic3RyYWN0Um9sbC5qcyc7XHJcbmltcG9ydCBtZXhwIGZyb20gJ21hdGgtZXhwcmVzc2lvbi1ldmFsdWF0b3InO1xyXG5pbXBvcnQgcGFyc2UgZnJvbSAnLi9Gb3JtdWxhUGFyc2VyLmpzJztcclxuaW1wb3J0IHsgY2Fub25pY2l6ZU1vZExpc3QgfSBmcm9tICcuL01vZExpc3QuanMnO1xyXG5cclxuLyoqXHJcbiAqIENsYXNzIHJlcHJlc2VudGluZyBhIHN1Y2Nlc3Mgcm9sbC5cclxuICpcclxuICogQGV4dGVuZHMgQWJzdHJhY3RSb2xsXHJcbiAqIEBoaWRlY29uc3RydWN0b3JcclxuICogQGluaGVyaXREb2NcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3VjY2Vzc1JvbGwgZXh0ZW5kcyBBYnN0cmFjdFJvbGwge1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgYSBzdWNjZXNzIHJvbGwgb2JqZWN0IGJ5IHBhcnNpbmcgYSBmb3JtdWxhIGJhc2VkIG9uIHRoZSBub3RhdGlvbiBmb3Igc2tpbGwgbGV2ZWxzIHB1Ymxpc2hlZCBvbiBzYW1wbGUgY2hhcmFjdGVycyBpbiBzb21lIEdVUlBTIHN1cHBsZW1lbnRzLlxyXG4gICAgICpcclxuICAgICAqIEBwdWJsaWNcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmb3JtdWxhIE11c3QgaW5jbHVkZSB0aGUgdGFyZ2V0IG51bWJlciB0byBiZSByb2xsZWQgYWdhaW5zdC4gQ2FuIGFsc28gb3B0aW9uYWxseSBpbmNsdWRlIHRoZSBuYW1lIG9mIHRoZSBhYmlsaXR5IGJlaW5nIHJvbGxlZCBhZ2FpbnN0IGFuZCBhbnkgKy8tIG1vZGlmaWVycy4gQWNjZXB0ZWQgZm9ybWF0IGlzIFsmbHQ7YWJpbGl0eSBuYW1lJmd0Oy1dJmx0O2xldmVsJmd0O1smbHQ7bW9kaWZpZXJzJmd0O10uIFRoZSBhYmlsaXR5IG5hbWUgbXVzdCBzdGFydCB3aXRoIGEgbGV0dGVyIGJ1dCBjYW4gb3RoZXJ3aXNlIGNvbnRhaW4gYW55IGNoYXJhY3RlciBleGNlcHQgbGluZSBicmVha3MgYW5kIHRoZSAtIGNoYXJhY3Rlciwgd2hpY2ggaWYgdGhlIGFiaWxpdHkgbmFtZSBpcyBwYXNzZWQgbXVzdCBiZSB1c2VkIGJldHdlZW4gdGhlIGFiaWxpdHkgbmFtZSBhbmQgbGV2ZWwuIFRoZSBvcHRpb25hbCBsaXN0IG9mIG1vZGlmaWVycyBtYXkgY29udGFpbiBvbmUgb3IgbW9yZSBtb2RpZmllcnMgc3VwcGxpZWQgaW4gK1ggb3IgLVkgZm9ybSBmb2xsb3dlZCBieSBhbiBvcHRpb25hbCBkZXNjcmlwdGlvbiBpbiBwYXJlbnRoZXNlczsgb3B0aW9uYWwgc3BhY2VzIGFyZSBhbGxvd2VkIGJldHdlZW4gdGhlIG1vZGlmaWVycyBhcyB3ZWxsIGFzIGJldHdlZW4gdGhlbSBhbmQgdGhlICsvLSBzaWducywgYnV0IG5vIG90aGVyIGNoYXJhY3RlcnMgYXJlIGFsbG93ZWQgYW5kIGV2ZXJ5IG51bWVyaWMgbW9kaWZpZXIgbXVzdCBoYXZlIGVpdGhlciBhICsgb3IgLSBzaWduIHByZWNlZGluZyBpdC4gT3B0aW9uYWwgbW9kaWZpZXIgZGVzY3JpcHRpb25zIG1heSBjb250YWluIGFueSBjaGFyYWN0ZXJzIGV4Y2VwdCBwYXJlbnRoZXNlcy5cclxuICAgICAqIEByZXR1cm5zIHtTdWNjZXNzUm9sbH1cclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogLy8gUm9sbCBhZ2FpbnN0IDExXHJcbiAgICAgKiBTdWNjZXNzUm9sbC5mcm9tRm9ybXVsYSgnMTEnKVxyXG4gICAgICpcclxuICAgICAqIC8vIFJvbGwgYWdhaW5zdCAxMSBtb2RpZmllZCBieSAtNCBhbmQgKzFcclxuICAgICAqIFN1Y2Nlc3NSb2xsLmZyb21Gb3JtdWxhKCcxMS00KzEnKVxyXG4gICAgICpcclxuICAgICAqIC8vIFJvbGwgYWdhaW5zdCB0aGUgU3RlYWx0aCBza2lsbCBhdCBsZXZlbCAxMlxyXG4gICAgICogU3VjY2Vzc1JvbGwuZnJvbUZvcm11bGEoJ1N0ZWFsdGgtMTInKVxyXG4gICAgICpcclxuICAgICAqIC8vIFJvbGwgYWdhaW5zdCBTVCAxMCB3aXRoIGEgYm9udXMgb2YgKzMgYW5kIGEgcGVuYWx0eSBvZiAtMiB0byB0aGUgcm9sbFxyXG4gICAgICogU3VjY2Vzc1JvbGwuZnJvbUZvcm11bGEoJ1NULTEwICszIC0yJylcclxuICAgICAqXHJcbiAgICAgKiAvLyBSb2xsIGFnYWluc3QgQWNyb2JhdGljcyBhdCBsZXZlbCAxNCBtb2RpZmllZCBieSArMSBmcm9tIFBlcmZlY3QgQmFsYW5jZSBhbmQgLTIgZnJvbSBtZWRpdW0gZW5jdW1icmFuY2VcclxuICAgICAqIFN1Y2Nlc3NSb2xsLmZyb21Gb3JtdWxhKCdBY3JvYmF0aWNzLTE0ICsxIChQZXJmZWN0IEJhbGFuY2UpIC0yIChtZWRpdW0gZW5jdW1icmFuY2UpJylcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGZyb21Gb3JtdWxhKGZvcm11bGEpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFN1Y2Nlc3NSb2xsKHsgZm9ybXVsYSB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBzdWNjZXNzIHJvbGwgb2JqZWN0IGZyb20gc3RydWN0dXJlZCBkYXRhLlxyXG4gICAgICpcclxuICAgICAqIEBwdWJsaWNcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXHJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gZGF0YS5sZXZlbCBMZXZlbCBvZiB0aGUgdHJhaXQgdG8gcm9sbCBhZ2FpbnN0XHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xudWxsfSBkYXRhLnRyYWl0IE5hbWUgb2YgdGhlIHRyYWl0IGJlaW5nIHJvbGxlZFxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd8bnVsbH0gZGF0YS5tb2RpZmllcnMgVmFyaW91cyBtb2RpZmllcnMgdG8gYXBwbHkgdG8gdGhlIHJvbGwgc3VwcGxpZWQgaW4gK1ggb3IgLVkgZm9ybS4gT3B0aW9uYWwgc3BhY2VzIGFyZSBhbGxvd2VkIGJldHdlZW4gdGhlIG1vZGlmaWVycyBhcyB3ZWxsIGFzIGJldHdlZW4gdGhlbSBhbmQgdGhlICsvLSBzaWducywgYnV0IG5vIG90aGVyIGNoYXJhY3RlcnMgYXJlIGFsbG93ZWQgYW5kIGV2ZXJ5IG51bWVyaWMgbW9kaWZpZXIgbXVzdCBoYXZlIGVpdGhlciBhICsgb3IgLSBzaWduIHByZWNlZGluZyBpdC5cclxuICAgICAqIEBwYXJhbSB7T2JqZWN0W119IGRhdGEubW9kTGlzdCBBcnJheSBvZiBtb2RpZmllciBvYmplY3RzIGluIHRoZSBmb3JtIG9mIHttb2RpZmllcjogJysxJywgZGVzY3JpcHRpb246ICdTbmVha3kgc2hvZXMnfSBhbGxvd2luZyBmb3Igc3RydWN0dXJlZCBtYW5hZ2VtZW50IG9mIG1vZGlmaWVycy4gT3ZlcnJpZGVzIHRoZSAnbW9kaWZpZXJzJyBwYXJhbS5cclxuICAgICAqIEByZXR1cm5zIHtTdWNjZXNzUm9sbH1cclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogLy8gUm9sbCBhZ2FpbnN0IHRoZSBTdGVhbHRoIHNraWxsIGF0IGxldmVsIDEyXHJcbiAgICAgKiBTdWNjZXNzUm9sbC5mcm9tRGF0YSh7IGxldmVsOiAxMiwgdHJhaXQ6ICdTdGVhbHRoJyB9KVxyXG4gICAgICpcclxuICAgICAqIC8vIFJvbGwgYWdhaW5zdCBTVCAxMCB3aXRoIGEgYm9udXMgb2YgKzMgYW5kIGEgcGVuYWx0eSBvZiAtMiB0byB0aGUgcm9sbFxyXG4gICAgICogU3VjY2Vzc1JvbGwuZnJvbURhdGEoeyBsZXZlbDogMTAsIHRyYWl0OiAnU1QnLCBtb2RpZmllcnM6ICcgKzMgLTInIH0pXHJcbiAgICAgKlxyXG4gICAgICogLy8gUm9sbCBhZ2FpbnN0IDExXHJcbiAgICAgKiBTdWNjZXNzUm9sbC5mcm9tRGF0YSh7IGxldmVsOiAxMSB9KVxyXG4gICAgICpcclxuICAgICAqIC8vIFJvbGwgYWdhaW5zdCAxMSBtb2RpZmllZCBieSAtNCBhbmQgKzFcclxuICAgICAqIFN1Y2Nlc3NSb2xsLmZyb21EYXRhKHsgbGV2ZWw6IDExLCBtb2RpZmllcnM6ICctNCsxJyB9KVxyXG4gICAgICpcclxuICAgICAqIC8vIFJvbGwgYWdhaW5zdCBBY3JvYmF0aWNzIGF0IGxldmVsIDE0IG1vZGlmaWVkIGJ5ICsxIGZyb20gUGVyZmVjdCBCYWxhbmNlIGFuZCAtMiBmcm9tIG1lZGl1bSBlbmN1bWJyYW5jZVxyXG4gICAgICogU3VjY2Vzc1JvbGwuZnJvbURhdGEoeyBsZXZlbDogMTQsIHRyYWl0OiAnQWNyb2JhdGljcycsIG1vZExpc3Q6IFt7bW9kaWZpZXI6ICcrMScsIGRlc2NyaXB0aW9uOiAnUGVyZmVjdCBCYWxhbmNlJ30sIHttb2RpZmllcjogJy0yJywgZGVzY3JpcHRpb246ICdtZWRpdW0gZW5jdW1icmFuY2UnfV0gfSlcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGZyb21EYXRhKHsgbGV2ZWwsIHRyYWl0ID0gbnVsbCwgbW9kaWZpZXJzID0gbnVsbCwgbW9kTGlzdCA9IFtdIH0pIHtcclxuICAgICAgICByZXR1cm4gbmV3IFN1Y2Nlc3NSb2xsKHsgbGV2ZWwsIHRyYWl0LCBtb2RpZmllcnMsIG1vZExpc3QgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGxldmVsIExldmVsIG9mIHRoZSB0cmFpdCB0byByb2xsIGFnYWluc3RcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0cmFpdCBOYW1lIG9mIHRoZSB0cmFpdCBiZWluZyByb2xsZWRcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtb2RpZmllcnMgVmFyaW91cyArLy0gbW9kaWZpZXJzIHRvIGFwcGx5IHRvIHRoZSByb2xsXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdFtdfSBtb2RMaXN0IEFycmF5IG9mIG1vZGlmaWVyIG9iamVjdHMgaW4gdGhlIGZvcm0gb2Yge21vZGlmaWVyOiAnKzEnLCBkZXNjcmlwdGlvbjogJ1NuZWFreSBzaG9lcyd9IGFsbG93aW5nIGZvciBzdHJ1Y3R1cmVkIG1hbmFnZW1lbnQgb2YgbW9kaWZpZXJzLiBPdmVycmlkZXMgdGhlICdtb2RpZmllcnMnIHBhcmFtLlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGZvcm11bGEgU3VjY2VzcyByb2xsIGZvcm11bGEgdG8gYmUgcGFyc2VkLCB0aGlzIGNhbiBiZSBwYXNzZWQgaW5zdGVhZCBvZiB0aGUgcHJldmlvdXMgZm91ciBwYXJhbWV0ZXJzICh3aGljaCBpdCBvdmVycmlkZXMgY29tcGxldGVseSlcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoeyBsZXZlbCA9IG51bGwsIHRyYWl0ID0gbnVsbCwgZm9ybXVsYSA9IG51bGwsIG1vZGlmaWVycyA9IG51bGwsIG1vZExpc3QgPSBbXSB9KSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuXHJcbiAgICAgICAgaWYgKGZvcm11bGEgPT09IG51bGwgJiYgbGV2ZWwgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBdHRlbXB0ZWQgdG8gY3JlYXRlIGEgU3VjY2Vzc1JvbGwgd2l0aCBib3RoIGxldmVsIGFuZCBmb3JtdWxhIGVxdWFsIHRvIG51bGw7IGF0IGxlYXN0IG9uZSBvZiB0aGVtIG11c3QgYmUgbm9uLW51bGwhJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBmb3JtdWxhIGhhcyBoaWdoZXN0IHByaW9yaXR5LCBtb2RMaXN0IGhhcyBwcmVjZWRlbmNlIG92ZXIgbW9kaWZpZXJzLCBhbmQgbW9kaWZpZXJzIGFyZSB1c2VkIG9ubHkgaWYgbm9uZSBvZiB0aGUgb3RoZXIgdHdvIGlzXHJcbiAgICAgICAgaWYgKGZvcm11bGEgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgY29uc3QgcGFyc2VkRm9ybXVsYSA9IHBhcnNlLnN1Y2Nlc3NSb2xsRm9ybXVsYShmb3JtdWxhKTtcclxuICAgICAgICAgICAgdHJhaXQgPSBwYXJzZWRGb3JtdWxhLnRyYWl0O1xyXG4gICAgICAgICAgICBsZXZlbCA9IHBhcnNlZEZvcm11bGEubGV2ZWw7XHJcbiAgICAgICAgICAgIG1vZGlmaWVycyA9IHBhcnNlZEZvcm11bGEubW9kaWZpZXJzO1xyXG4gICAgICAgICAgICBtb2RMaXN0ID0gbW9kaWZpZXJzICE9PSBudWxsID8gcGFyc2UubW9kTGlzdChtb2RpZmllcnMpIDogW107XHJcbiAgICAgICAgfSBlbHNlIGlmIChtb2RMaXN0Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBtb2RMaXN0ID0gbW9kaWZpZXJzICE9PSBudWxsID8gcGFyc2UubW9kTGlzdChtb2RpZmllcnMpIDogW107XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXZlbCA9IHBhcnNlSW50KGxldmVsLCAxMCk7XHJcbiAgICAgICAgbW9kTGlzdCA9IGNhbm9uaWNpemVNb2RMaXN0KG1vZExpc3QpO1xyXG5cclxuICAgICAgICBtb2RMaXN0ID0gbW9kTGlzdC5yZXZlcnNlKCk7XHJcbiAgICAgICAgbW9kaWZpZXJzID0gbW9kTGlzdC5sZW5ndGggPiAwID8gbW9kTGlzdC5tYXAobW9kID0+IG1vZC5tb2RpZmllcikuam9pbignICcpIDogbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy5fZm91bmRyeVJvbGwgPSBuZXcgUm9sbCgnM2Q2Jyk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtOdW1iZXJ9XHJcbiAgICAgICAgICogQHByb3RlY3RlZFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX2xldmVsID0gbGV2ZWw7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtTdHJpbmd8bnVsbH1cclxuICAgICAgICAgKiBAcHJvdGVjdGVkXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fdHJhaXQgPSB0cmFpdDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge1N0cmluZ3xudWxsfVxyXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9tb2RpZmllcnMgPSBtb2RpZmllcnM7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtBcnJheX1cclxuICAgICAgICAgKiBAcHJvdGVjdGVkXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fbW9kTGlzdCA9IG1vZExpc3Q7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtOdW1iZXJ9XHJcbiAgICAgICAgICogQHByb3RlY3RlZFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX2V2YWx1YXRlZE1vZGlmaWVycyA9IG1vZExpc3QucmVkdWNlKChzdW0sIG1vZCkgPT4gc3VtICsgbWV4cC5ldmFsKChtb2QubW9kaWZpZXIpLnRvU3RyaW5nKCkpLCAwKTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHR5cGUge0Jvb2xlYW59XHJcbiAgICAgICAgICogQHByb3RlY3RlZFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX2lzU3VjY2VzcyA9IG51bGw7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtOdW1iZXJ9XHJcbiAgICAgICAgICogQHByb3RlY3RlZFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX21hcmdpbk9mU3VjY2VzcyA9IG51bGw7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtCb29sZWFufVxyXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9pc0NyaXRGYWlsID0gZmFsc2U7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEB0eXBlIHtCb29sZWFufVxyXG4gICAgICAgICAqIEBwcm90ZWN0ZWRcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9pc0NyaXRTdWNjZXNzID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBMZXZlbCBvZiB0aGUgdHJhaXQgYmVpbmcgcm9sbGVkIGFnYWluc3QuIFRoaXMgZG9lcyBub3QgaW5jbHVkZSBhbnkgbW9kaWZpZXJzIHN1cHBsaWVkIHRvIHRoZSByb2xsLlxyXG4gICAgICpcclxuICAgICAqIEBwdWJsaWNcclxuICAgICAqIEB0eXBlIHtOdW1iZXJ9XHJcbiAgICAgKi9cclxuICAgIGdldCBsZXZlbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbGV2ZWw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBOYW1lIG9mIHRoZSB0cmFpdCBiZWluZyByb2xsZWQgYWdhaW5zdFxyXG4gICAgICpcclxuICAgICAqIEBwdWJsaWNcclxuICAgICAqIEB0eXBlIHtTdHJpbmd8bnVsbH1cclxuICAgICAqL1xyXG4gICAgZ2V0IHRyYWl0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl90cmFpdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE1vZGlmaWVycyBhcHBsaWVkIHRvIHRoZSBzdWNjZXNzIHJvbGxcclxuICAgICAqXHJcbiAgICAgKiBAcHVibGljXHJcbiAgICAgKiBAdHlwZSB7U3RyaW5nfG51bGx9XHJcbiAgICAgKi9cclxuICAgIGdldCBtb2RpZmllcnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX21vZGlmaWVycztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFycmF5IG9mIG1vZGlmaWVycyBhcHBsaWVkIHRvIHRoZSBzdWNjZXNzIHJvbGwgd2l0aCB0aGVpciBkZXNjcmlwdGlvbnMuIEVsZW1lbnRzIG9mIHRoZSBhcnJheSBhcmUgb2JqZWN0cyBpbiB0aGUge21vZGlmaWVyOiAnKzEnLCBkZXNjcmlwdGlvbjogJ3NvbWUgbW9kaWZpZXInfSBmb3JtYXRcclxuICAgICAqXHJcbiAgICAgKiBAcHVibGljXHJcbiAgICAgKiBAdHlwZSB7T2JqZWN0W119XHJcbiAgICAgKi9cclxuICAgIGdldCBtb2RMaXN0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9tb2RMaXN0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRWZmZWN0aXZlIGxldmVsIG9mIHRoZSB0cmFpdCBiZWluZyByb2xsZWQgYWdhaW5zdCBhZnRlciB0YWtpbmcgaW50byBhY2NvdW50IGFsbCBvZiB0aGUgbW9kaWZpZXJzXHJcbiAgICAgKlxyXG4gICAgICogQHB1YmxpY1xyXG4gICAgICogQHR5cGUge051bWJlcn1cclxuICAgICAqL1xyXG4gICAgZ2V0IGV2YWx1YXRlZExldmVsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxldmVsICsgdGhpcy5fZXZhbHVhdGVkTW9kaWZpZXJzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTnVsbCBpZiB0aGUgcm9sbCBoYXNuJ3QgYmVlbiBtYWRlIHlldC5cclxuICAgICAqXHJcbiAgICAgKiBAcHVibGljXHJcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbnxudWxsfVxyXG4gICAgICovXHJcbiAgICBnZXQgaXNTdWNjZXNzKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5fZm91bmRyeVJvbGwuX3JvbGxlZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9pc1N1Y2Nlc3M7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBOdWxsIGlmIHRoZSByb2xsIGhhc24ndCBiZWVuIG1hZGUgeWV0LlxyXG4gICAgICpcclxuICAgICAqIEBwdWJsaWNcclxuICAgICAqIEB0eXBlIHtOdW1iZXJ8bnVsbH1cclxuICAgICAqL1xyXG4gICAgZ2V0IG1hcmdpbk9mU3VjY2VzcygpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2ZvdW5kcnlSb2xsLl9yb2xsZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fbWFyZ2luT2ZTdWNjZXNzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTnVsbCBpZiB0aGUgcm9sbCBoYXNuJ3QgYmVlbiBtYWRlIHlldC5cclxuICAgICAqXHJcbiAgICAgKiBAcHVibGljXHJcbiAgICAgKiBAdHlwZSB7bnVsbHxib29sZWFufVxyXG4gICAgICovXHJcbiAgICBnZXQgaXNDcml0RmFpbCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2ZvdW5kcnlSb2xsLl9yb2xsZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5faXNDcml0RmFpbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE51bGwgaWYgdGhlIHJvbGwgaGFzbid0IGJlZW4gbWFkZSB5ZXQuXHJcbiAgICAgKlxyXG4gICAgICogQHB1YmxpY1xyXG4gICAgICogQHR5cGUge251bGx8Ym9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgZ2V0IGlzQ3JpdFN1Y2Nlc3MoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9mb3VuZHJ5Um9sbC5fcm9sbGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzQ3JpdFN1Y2Nlc3M7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNYWtlcyB0aGUgcm9sbFxyXG4gICAgICpcclxuICAgICAqIEBwdWJsaWNcclxuICAgICAqIEByZXR1cm5zIHtTdWNjZXNzUm9sbH0gU2VsZlxyXG4gICAgICovXHJcbiAgICByb2xsKCkge1xyXG4gICAgICAgIHN1cGVyLnJvbGwoKTtcclxuXHJcbiAgICAgICAgdGhpcy5fbWFyZ2luT2ZTdWNjZXNzID0gdGhpcy5sZXZlbCAtIHRoaXMudG90YWwgKyB0aGlzLl9ldmFsdWF0ZWRNb2RpZmllcnM7XHJcblxyXG4gICAgICAgIHRoaXMuX2lzU3VjY2VzcyA9IHRoaXMuX21hcmdpbk9mU3VjY2VzcyA+PSAwO1xyXG5cclxuICAgICAgICBpZiAodGhpcy50b3RhbCA8PSA0IHx8ICh0aGlzLnRvdGFsIDw9IDYgJiYgdGhpcy5tYXJnaW5PZlN1Y2Nlc3MgPj0gMTApKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzQ3JpdFN1Y2Nlc3MgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLl9pc1N1Y2Nlc3MgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMudG90YWwgPT09IDE3KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzU3VjY2VzcyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMudG90YWwgPT09IDE4IHx8ICh0aGlzLnRvdGFsID09PSAxNyAmJiB0aGlzLmxldmVsICsgdGhpcy5fZXZhbHVhdGVkTW9kaWZpZXJzIDw9IDE1KSB8fCB0aGlzLm1hcmdpbk9mU3VjY2VzcyA8PSAtMTApIHtcclxuICAgICAgICAgICAgdGhpcy5faXNDcml0RmFpbCA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzU3VjY2VzcyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbn1cclxuIiwiLyoqXHJcbiAqIEFic3RyYWN0IGNsYXNzIGNvbnRhaW5pbmcgdGhlIGNvcmUgcm9sbCByZW5kZXJpbmcgZnVuY3Rpb25hbGl0eS4gRXh0ZW5kZWQgYnkgY2xhc3NlcyBpbnRlbmRlZCB0byByZW5kZXIgc3BlY2lmaWMgdHlwZXMgb2Ygcm9sbHMuXHJcbiAqXHJcbiAqIEBhYnN0cmFjdFxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBYnN0cmFjdFJvbGxSZW5kZXJlciB7XHJcbiAgICAvKipcclxuICAgICAqIEEgcG9ydCBvZiB0aGUgRm91bmRyeSBBUEkgUm9sbDo6Z2V0VG9vbHRpcCBtZXRob2QuIFJlbmRlcnMgdGhlIHJvbGwgXCJ0b29sdGlwXCIgZGlzcGxheWluZyB0aGUgcmVzdWx0IG9mIGVhY2ggaW5kaXZpZHVhbCBkaWUuXHJcbiAgICAgKlxyXG4gICAgICogQHB1YmxpY1xyXG4gICAgICogQHBhcmFtIHtBYnN0cmFjdFJvbGx9IHJvbGxcclxuICAgICAqIEByZXR1cm4ge1Byb21pc2UuPEhUTUxFbGVtZW50Pn0gUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIEhUTUwgcmVwcmVzZW50aW5nIHRoZSB0b29sdGlwIHRoYXQgaXMgdG9nZ2xlZCB3aGVuIHRoZSByb2xsIGZvcm11bGEgaXMgY2xpY2tlZCBvbiB0aGUgcmVuZGVyZWQgcm9sbC4gVGhlIHRvb2x0aXAgZGlzcGxheXMgdGhlIHJvbGxlZCB2YWx1ZSBvZiBlYWNoIGRpZSBpbiB0aGUgcm9sbC5cclxuICAgICAqL1xyXG4gICAgZ2V0VG9vbHRpcChyb2xsKSB7XHJcbiAgICAgICAgY29uc3QgcmVuZGVyZXIgPSB0aGlzO1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgICAgICAgIGZvcm11bGE6IHJvbGwuZXZhbHVhdGVkRm9ybXVsYSxcclxuICAgICAgICAgICAgdG90YWw6IHJvbGwudG90YWwsXHJcbiAgICAgICAgICAgIHBhcnRzOiByb2xsLmZvdW5kcnlEaWNlLm1hcCgoZGllKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB3b3JzdEZhY2UgPSByZW5kZXJlci5fZ2V0V29yc3REaWVGYWNlKGRpZSksXHJcbiAgICAgICAgICAgICAgICAgICAgYmVzdEZhY2UgPSByZW5kZXJlci5fZ2V0QmVzdERpZUZhY2UoZGllKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcm11bGE6IGRpZS5mb3JtdWxhLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsOiBkaWUudG90YWwsXHJcbiAgICAgICAgICAgICAgICAgICAgZmFjZXM6IGRpZS5mYWNlcyxcclxuICAgICAgICAgICAgICAgICAgICByb2xsczogZGllLnJvbGxzLm1hcCgocm9sbCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiByb2xsLnJvbGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc2VzOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGllLmNvbnN0cnVjdG9yLm5hbWUudG9Mb3dlckNhc2UoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZCcgKyBkaWUuZmFjZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9sbC5yb2xsID09PSB3b3JzdEZhY2UgPyAnbWluJyA6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9sbC5yb2xsID09PSBiZXN0RmFjZSA/ICdtYXgnIDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKChjKSA9PiBjKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qb2luKCcgJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9KSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gcmVuZGVyVGVtcGxhdGUoQ09ORklHLkRpY2UudG9vbHRpcCwgZGF0YSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcHJvdGVjdGVkXHJcbiAgICAgKiBAcGFyYW0ge0Fic3RyYWN0Um9sbH0gcm9sbFxyXG4gICAgICogQHJldHVybiB7U3RyaW5nfSBIVE1MIHJlcHJlc2VudGluZyB0aGUgbW91c2VvdmVyIHRvb2x0aXAgdGhhdCBpcyB0b2dnbGVkIHdoZW4gdGhlIHJvbGwgZm9ybXVsYSBpbiB0aGUgcmVuZGVyZWQgcm9sbCBpcyBob3ZlcmVkIG92ZXIgd2l0aCB0aGUgbW91c2UgcG9pbnRlci5cclxuICAgICAqL1xyXG4gICAgX2dldE1vdXNlb3Zlcihyb2xsKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBmYWNlIG9mIHRoZSBwYXNzZWQgZGllIHRoYXQgaXMgY29uc2lkZXJlZCB0aGUgYmVzdCBwb3NzaWJsZSByZXN1bHQgdG8gYmUgcm9sbGVkLlxyXG4gICAgICpcclxuICAgICAqIEBwcm90ZWN0ZWRcclxuICAgICAqIEBwYXJhbSB7RGllfSBkaWVcclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XHJcbiAgICAgKi9cclxuICAgIF9nZXRCZXN0RGllRmFjZShkaWUpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5tYXgoLi4uZGllLnNpZGVzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGZhY2Ugb2YgdGhlIHBhc3NlZCBkaWUgdGhhdCBpcyBjb25zaWRlcmVkIHRoZSB3b3JzdCBwb3NzaWJsZSByZXN1bHQgdG8gYmUgcm9sbGVkLlxyXG4gICAgICpcclxuICAgICAqIEBwcm90ZWN0ZWRcclxuICAgICAqIEBwYXJhbSB7RGllfSBkaWVcclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XHJcbiAgICAgKi9cclxuICAgIF9nZXRXb3JzdERpZUZhY2UoZGllKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGgubWluKC4uLmRpZS5zaWRlcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBIHBvcnQgb2YgdGhlIEZvdW5kcnkgQVBJIFJvbGw6OnJlbmRlciBtZXRob2QuIElmIG5vIGRhdGEgYW5kIG5vIGN1c3RvbSB0ZW1wbGF0ZSBpcyBzdXBwbGllZCwgZGF0YSBleHRyYWN0ZWQgZnJvbSB0aGUgcGFzc2VkIHJvbGwgb2JqZWN0IHdpbGwgYmUgcmVuZGVyZWQgdGhyb3VnaCB0aGUgYG1vZHVsZXMvR1VSUFMtRm91bmRyeS1Sb2xsLVRlbXBsYXRlcy90ZW1wbGF0ZXMvcm9sbC5odG1sYCAocmVxdWlyaW5nIHRoZSBHVVJQUyBGb3VuZHJ5IFJvbGwgVGVtcGxhdGVzIG1vZHVsZSB0byBiZSBpbnN0YWxsZWQpLiBUaGlzIHRlbXBsYXRlIGlzIGEgY29weSBvZiB0aGUgZGVmYXVsdCBGb3VuZHJ5IHJvbGwgdGVtcGxhdGUgYnV0IHdpdGggYWxsIG9mIHRoZSBmaWVsZHMgYWJsZSB0byByZW5kZXIgSFRNTC5cclxuICAgICAqXHJcbiAgICAgKiBAcHVibGljXHJcbiAgICAgKiBAcGFyYW0ge0Fic3RyYWN0Um9sbH0gcm9sbFxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgQW4gb2JqZWN0IGNvbmZpZ3VyaW5nIHRoZSBiZWhhdmlvciBvZiB0aGUgcmVuZGVyZWQgY2hhdCBtZXNzYWdlLlxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBvcHRpb25zLnVzZVRvb2x0aXAgSWYgc2V0IHRvIHRydWUgYW5kIHVzaW5nIHRoZSBkZWZhdWx0IHRlbXBsYXRlLCBjbGlja2luZyBvbiB0aGUgZm9ybXVsYSBpbiB0aGUgcmVuZGVyZWQgcm9sbCB3aWxsIHNob3cgYSB0b29sdGlwIGNvbnRhaW5pbmcgd2hhdGV2ZXIgSFRNTCBpcyBwYXNzZWQgdW5kZXIgZGF0YS50b29sdGlwLiBJZiBkYXRhLnRvb2x0aXAgaXMgbm90IHBhc3NlZCwgdGhlIGdldFRvb2x0aXAgbWV0aG9kIHdpbGwgYmUgdXNlZCB0byByZW5kZXIgdGhlIHRvb2x0aXAuIERlZmF1bHRzIHRvIHRydWUuXHJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IG9wdGlvbnMudXNlTW91c2VvdmVyIElmIHNldCB0byB0cnVlIGFuZCB1c2luZyB0aGUgZGVmYXVsdCB0ZW1wbGF0ZSwgaG92ZXJpbmcgd2l0aCB0aGUgbW91c2UgcG9pbnRlciBvdmVyIHRoZSBmb3JtdWxhIGluIHRoZSByZW5kZXJlZCByb2xsIHdpbGwgc2hvdyBhIHRvb2x0aXAgY29udGFpbmluZyB3aGF0ZXZlciBIVE1MIGlzIHBhc3NlZCB1bmRlciBkYXRhLm1vdXNlb3Zlci4gSWYgZGF0YS5tb3VzZW92ZXIgaXMgbm90IHBhc3NlZCwgdGhlIF9nZXRNb3VzZW92ZXIgbWV0aG9kIHdpbGwgYmUgdXNlZCB0byByZW5kZXIgdGhlIG1vdXNlb3Zlci4gRGVmYXVsdHMgdG8gdHJ1ZS5cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLnRlbXBsYXRlIFBhdGggdG8gdGhlIHRlbXBsYXRlIHRvIHJlbmRlciB0aGUgcm9sbCB3aXRoLiBUaGlzIGlzIGEgcGF0aCByZWxhdGl2ZSBmcm9tIHRoZSBGb3VuZHJ5IFZUVCBkYXRhIGZvbGRlci4gRGVmYXVsdHMgdG8gYG1vZHVsZXMvR1VSUFMtRm91bmRyeS1Sb2xsLVRlbXBsYXRlcy90ZW1wbGF0ZXMvcm9sbC5odG1sYC5cclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhIE9iamVjdCBjb250YWluaW5nIGRhdGEgdG8gYmUgcmVuZGVyZWQgaW4gdGhlIHRlbXBsYXRlLiBJZiBubyBkYXRhIGlzIHBhc3NlZCwgZGVmYXVsdCBkYXRhIGlzIHRha2VuIGZyb20gdGhlIHJvbGwuIFRoZSBmb2xsb3dpbmcgcHJvcGVydGllcyBhcmUgdXNlZCBieSB0aGUgZGVmYXVsdCByZW5kZXJpbmcgdGVtcGxhdGU6XHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZGF0YS51c2VyIFRoZSBpZCBvZiB0aGUgdXNlciB3aG8gc2hvdWxkIGJlIGRpc3BsYXllZCBhcyB0aGUgbWVzc2FnZSBzZW5kZXIuIERlZmF1bHRzIHRvIGBnYW1lLnVzZXIuX2lkYC5cclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBkYXRhLmZsYXZvciBGbGF2b3IgdGV4dCB0byBiZSBkaXNwbGF5ZWQgYWJvdmUgdGhlIHJvbGwuIERlZmF1bHRzIHRvIG51bGwuXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZGF0YS5mb3JtdWxhIFJvbGwgZm9ybXVsYSB0byBkaXNwbGF5LiBEZWZhdWx0cyB0byBhIHZhbHVlIGRldGVybWluZWQgYnkgYSBjb25jcmV0ZSByZW5kZXJlciBjbGFzcy5cclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBkYXRhLnRvb2x0aXAgVGhlIHRvb2x0aXAgdG8gZGlzcGxheSB3aGVuIHRoZSByb2xsIGZvcm11bGEgaXMgY2xpY2tlZCBpbiB0aGUgcmVuZGVyZWQgbWVzc2FnZS4gRGVmYXVsdHMgdG8gSFRNTCBnZW5lcmF0ZWQgYnkgdGhlIGdldFRvb2x0aXAgbWV0aG9kLCBhbmQgd2lsbCBvbmx5IGJlIHNob3duIGlmIG9wdGlvbnMudXNlVG9vbHRpcCBpcyBzZXQgdG8gdHJ1ZS5cclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBkYXRhLm1vdXNlb3ZlciBUaGUgdG9vbHRpcCB0byBkaXNwbGF5IHdoZW4gdGhlIHJvbGwgZm9ybXVsYSBpcyBob3ZlcmVkIG92ZXIgd2l0aCB0aGUgbW91c2UgcG9pbnRlciBpbiB0aGUgcmVuZGVyZWQgbWVzc2FnZS4gRGVmYXVsdHMgdG8gSFRNTCBnZW5lcmF0ZWQgYnkgdGhlIF9nZXRNb3VzZW92ZXIgbWV0aG9kLCBhbmQgd2lsbCBvbmx5IGJlIHNob3duIGlmIG9wdGlvbnMudXNlTW91c2VvdmVyIGlzIHNldCB0byB0cnVlLlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGRhdGEudG90YWwgVGhlIHJlc3VsdCBvZiB0aGUgcm9sbCB0byBkaXNwbGF5LiBEZWZhdWx0cyB0byBhIHZhbHVlIGRldGVybWluZWQgYnkgYSBjb25jcmV0ZSByZW5kZXJlciBjbGFzcy5cclxuICAgICAqIEByZXR1cm4ge1Byb21pc2UuPEhUTUxFbGVtZW50Pn0gIEEgUHJvbWlzZSB3aGljaCByZXNvbHZlcyB0byB0aGUgcmVuZGVyZWQgSFRNTCByZXByZXNlbnRhdGlvbiBvZiB0aGUgcm9sbFxyXG4gICAgICovXHJcbiAgICBhc3luYyByZW5kZXIocm9sbCwgb3B0aW9ucyA9IHt9LCBkYXRhID0ge30pIHtcclxuICAgICAgICBvcHRpb25zID0gbWVyZ2VPYmplY3QoXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnbW9kdWxlcy9HVVJQUy1Gb3VuZHJ5LVJvbGwtVGVtcGxhdGVzL3RlbXBsYXRlcy9yb2xsLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgdXNlVG9vbHRpcDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHVzZU1vdXNlb3ZlcjogdHJ1ZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb3B0aW9uc1xyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGRhdGEgPSBtZXJnZU9iamVjdChcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdXNlcjogZ2FtZS51c2VyLl9pZCxcclxuICAgICAgICAgICAgICAgIGZsYXZvcjogbnVsbCxcclxuICAgICAgICAgICAgICAgIGZvcm11bGE6IHRoaXMuX2dldEZvcm11bGEocm9sbCksXHJcbiAgICAgICAgICAgICAgICB0b29sdGlwOiBvcHRpb25zLnVzZVRvb2x0aXAgPyBhd2FpdCB0aGlzLmdldFRvb2x0aXAocm9sbCkgOiAnJyxcclxuICAgICAgICAgICAgICAgIG1vdXNlb3Zlcjogb3B0aW9ucy51c2VNb3VzZW92ZXIgPyBhd2FpdCB0aGlzLl9nZXRNb3VzZW92ZXIocm9sbCk6IG51bGwsXHJcbiAgICAgICAgICAgICAgICB0b3RhbDogdGhpcy5fZ2V0VG90YWwocm9sbCksXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGRhdGFcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICAvLyBSZW5kZXIgdGhlIHJvbGwgZGlzcGxheSB0ZW1wbGF0ZVxyXG4gICAgICAgIHJldHVybiByZW5kZXJUZW1wbGF0ZShvcHRpb25zLnRlbXBsYXRlLCBkYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGZvcm11bGEgd2hpY2ggc2hvdWxkIGJlIGRpc3BsYXllZCBmb3IgdGhlIHJvbGwsIGJhc2VkIG9uIHJvbGwgZGF0YS5cclxuICAgICAqXHJcbiAgICAgKiBAcHJvdGVjdGVkXHJcbiAgICAgKiBAcGFyYW0ge0Fic3RyYWN0Um9sbH0gcm9sbFxyXG4gICAgICogQHJldHVybnMge3N0cmluZ31cclxuICAgICAqL1xyXG4gICAgX2dldEZvcm11bGEocm9sbCkge1xyXG4gICAgICAgIHJldHVybiByb2xsLmV2YWx1YXRlZEZvcm11bGE7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSByZXN1bHQgb2YgdGhlIHJvbGwgdG8gZGlzcGxheSwgYmFzZWQgb24gcm9sbCBkYXRhLlxyXG4gICAgICpcclxuICAgICAqIEBwcm90ZWN0ZWRcclxuICAgICAqIEBwYXJhbSB7QWJzdHJhY3RSb2xsfSByb2xsXHJcbiAgICAgKiBAcmV0dXJucyB7TnVtYmVyfVxyXG4gICAgICovXHJcbiAgICBfZ2V0VG90YWwocm9sbCkge1xyXG4gICAgICAgIHJldHVybiBNYXRoLnJvdW5kKHJvbGwudG90YWwgKiAxMDApIC8gMTAwO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBBYnN0cmFjdFJvbGxSZW5kZXJlciBmcm9tICcuL0Fic3RyYWN0Um9sbFJlbmRlcmVyLmpzJztcclxuXHJcbi8qKlxyXG4gKiBDbGFzcyB1c2VkIGZvciByZW5kZXJpbmcgZGFtYWdlIHJvbGxzLlxyXG4gKlxyXG4gKiBAZXh0ZW5kcyBBYnN0cmFjdFJvbGxSZW5kZXJlclxyXG4gKiBAaW5oZXJpdERvY1xyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEYW1hZ2VSb2xsUmVuZGVyZXIgZXh0ZW5kcyBBYnN0cmFjdFJvbGxSZW5kZXJlciB7XHJcbiAgICAvKipcclxuICAgICAqIEBwcm90ZWN0ZWRcclxuICAgICAqIEBwYXJhbSB7RGFtYWdlUm9sbH0gcm9sbFxyXG4gICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfVxyXG4gICAgICovXHJcbiAgICBfZ2V0Rm9ybXVsYShyb2xsKSB7XHJcbiAgICAgICAgcmV0dXJuICByb2xsLmZvcm11bGE7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcHJvdGVjdGVkXHJcbiAgICAgKiBAcGFyYW0ge0RhbWFnZVJvbGx9IHJvbGxcclxuICAgICAqIEByZXR1cm5zIHtTdHJpbmd9XHJcbiAgICAgKi9cclxuICAgIF9nZXRUb3RhbChyb2xsKSB7XHJcbiAgICAgICAgcmV0dXJuIGAke3JvbGwudG90YWx9JHtyb2xsLm1ldGF9YDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwcm90ZWN0ZWRcclxuICAgICAqIEBwYXJhbSB7RGFtYWdlUm9sbH0gcm9sbFxyXG4gICAgICogQHJldHVybiB7U3RyaW5nfSBIVE1MIHJlcHJlc2VudGluZyB0aGUgbW91c2VvdmVyIHRvb2x0aXAgdGhhdCBpcyB0b2dnbGVkIHdoZW4gdGhlIHJvbGwgZm9ybXVsYSBpbiB0aGUgcmVuZGVyZWQgcm9sbCBpcyBob3ZlcmVkIG92ZXIgd2l0aCB0aGUgbW91c2UgcG9pbnRlci5cclxuICAgICAqL1xyXG4gICAgX2dldE1vdXNlb3Zlcihyb2xsKSB7XHJcbiAgICAgICAgaWYgKHJvbGwubW9kTGlzdC5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocm9sbC5tb2RMaXN0LmV2ZXJ5KG1vZCA9PiBtb2QuZGVzY3JpcHRpb24gPT09IG51bGwgfHwgbW9kLmRlc2NyaXB0aW9uID09PSB1bmRlZmluZWQgfHwgbW9kLmRlc2NyaXB0aW9uLmxlbmd0aCA9PT0gMCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB1bFN0eWxlID0gJ2xpc3Qtc3R5bGUtdHlwZTogbm9uZTsgbWFyZ2luOiAwOyBwYWRkaW5nOiAwOyc7XHJcbiAgICAgICAgY29uc3QgbGlTdHlsZSA9ICdtYXJnaW46IDA7IHBhZGRpbmc6IDA7IGxpbmUtaGVpZ2h0OiAwLjlyZW07JztcclxuXHJcbiAgICAgICAgcmV0dXJuIGA8dWwgc3R5bGU9XCIke3VsU3R5bGV9XCI+PGxpIHN0eWxlPVwiJHtsaVN0eWxlfVwiPiR7cm9sbC5mb3JtdWxhV2l0aG91dE1vZExpc3R9IGJhc2U8L2xpPiR7cm9sbC5tb2RMaXN0Lm1hcChtb2QgPT4gYDxsaSBzdHlsZT1cIiR7bGlTdHlsZX1cIj4ke21vZC5tb2RpZmllcn0gJHttb2QuZGVzY3JpcHRpb259PC9saT5gKS5qb2luKCcnKX08L3VsPmA7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IEFic3RyYWN0Um9sbFJlbmRlcmVyIGZyb20gJy4vQWJzdHJhY3RSb2xsUmVuZGVyZXIuanMnO1xyXG5cclxuLyoqXHJcbiAqIENsYXNzIHVzZWQgZm9yIHJlbmRlcmluZyByZWFjdGlvbiByb2xscy5cclxuICpcclxuICogQGV4dGVuZHMgQWJzdHJhY3RSb2xsUmVuZGVyZXJcclxuICogQGluaGVyaXREb2NcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVhY3Rpb25Sb2xsUmVuZGVyZXIgZXh0ZW5kcyBBYnN0cmFjdFJvbGxSZW5kZXJlciB7XHJcbiAgICAvKipcclxuICAgICAqIEBwcm90ZWN0ZWRcclxuICAgICAqIEBwYXJhbSB7UmVhY3Rpb25Sb2xsfSByb2xsXHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9XHJcbiAgICAgKi9cclxuICAgIF9nZXRGb3JtdWxhKHJvbGwpIHtcclxuICAgICAgICBpZiAocm9sbC5tb2RpZmllcnMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGBSZWFjdGlvbiByb2xsIHdpdGggJHtyb2xsLm1vZGlmaWVyc308YiBzdHlsZT1cInBhZGRpbmctbGVmdDogMTBweFwiPj0gJHtyb2xsLmV2YWx1YXRlZE1vZGlmaWVyc308L2I+YDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAnUmVhY3Rpb24gcm9sbCc7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcHJvdGVjdGVkXHJcbiAgICAgKiBAcGFyYW0ge1JlYWN0aW9uUm9sbH0gcm9sbFxyXG4gICAgICogQHJldHVybnMge1N0cmluZ31cclxuICAgICAqL1xyXG4gICAgX2dldFRvdGFsKHJvbGwpIHtcclxuICAgICAgICByZXR1cm4gcm9sbC50b3RhbDtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgQWJzdHJhY3RSb2xsUmVuZGVyZXIgZnJvbSAnLi9BYnN0cmFjdFJvbGxSZW5kZXJlci5qcyc7XHJcblxyXG4vKipcclxuICogQ2xhc3MgdXNlZCBmb3IgcmVuZGVyaW5nIHN1Y2Nlc3Mgcm9sbHMuXHJcbiAqXHJcbiAqIEBleHRlbmRzIEFic3RyYWN0Um9sbFJlbmRlcmVyXHJcbiAqIEBpbmhlcml0RG9jXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN1Y2Nlc3NSb2xsUmVuZGVyZXIgZXh0ZW5kcyBBYnN0cmFjdFJvbGxSZW5kZXJlciB7XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgdGhlIGZhY2Ugb2YgdGhlIHBhc3NlZCBkaWUgdGhhdCBpcyBjb25zaWRlcmVkIHRoZSBiZXN0IHBvc3NpYmxlIHJlc3VsdCB0byBiZSByb2xsZWQuIEZvciBzdWNjZXNzIHJvbGxzLCB0aGlzIGlzIHRoZSBsb3dlc3QgZmFjZS5cclxuICAgICAqXHJcbiAgICAgKiBAcHJvdGVjdGVkXHJcbiAgICAgKiBAcGFyYW0ge0RpZX0gZGllXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxyXG4gICAgICovXHJcbiAgICBfZ2V0QmVzdERpZUZhY2UoZGllKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGgubWluKC4uLmRpZS5zaWRlcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBmYWNlIG9mIHRoZSBwYXNzZWQgZGllIHRoYXQgaXMgY29uc2lkZXJlZCB0aGUgd29yc3QgcG9zc2libGUgcmVzdWx0IHRvIGJlIHJvbGxlZC4gRm9yIHN1Y2Nlc3Mgcm9sbHMsIHRoaXMgaXMgdGhlIGhpZ2hlc3QgZmFjZS5cclxuICAgICAqXHJcbiAgICAgKiBAcHJvdGVjdGVkXHJcbiAgICAgKiBAcGFyYW0ge0RpZX0gZGllXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxyXG4gICAgICovXHJcbiAgICBfZ2V0V29yc3REaWVGYWNlKGRpZSkge1xyXG4gICAgICAgIHJldHVybiBNYXRoLm1heCguLi5kaWUuc2lkZXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHByb3RlY3RlZFxyXG4gICAgICogQHBhcmFtIHtTdWNjZXNzUm9sbH0gcm9sbFxyXG4gICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfVxyXG4gICAgICovXHJcbiAgICBfZ2V0Rm9ybXVsYShyb2xsKSB7XHJcbiAgICAgICAgbGV0IGZvcm11bGEgPSB0aGlzLl9nZXRGb3JtdWxhV2l0aG91dE1vZHMocm9sbCk7XHJcbiAgICAgICAgaWYgKHJvbGwubW9kaWZpZXJzICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGZvcm11bGEgPSBgJHtmb3JtdWxhfSAke3JvbGwubW9kaWZpZXJzfTxiPiA9ICR7cm9sbC5ldmFsdWF0ZWRMZXZlbH08L2I+YDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmb3JtdWxhO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHByb3RlY3RlZFxyXG4gICAgICogQHBhcmFtIHtTdWNjZXNzUm9sbH0gcm9sbFxyXG4gICAgICogQHJldHVybnMge3N0cmluZ3xudWxsfVxyXG4gICAgICovXHJcbiAgICBfZ2V0Rm9ybXVsYVdpdGhvdXRNb2RzKHJvbGwpIHtcclxuICAgICAgICBjb25zdCBmb3JtdWxhID0gcm9sbC50cmFpdCA/IGAke3JvbGwudHJhaXR9LWAgOiAnUm9sbGVkIGFnYWluc3QgJztcclxuICAgICAgICByZXR1cm4gYCR7Zm9ybXVsYX0ke3JvbGwubGV2ZWx9YDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7U3VjY2Vzc1JvbGx9IHJvbGxcclxuICAgICAqIEByZXR1cm5zIHtTdHJpbmd9XHJcbiAgICAgKiBAcHJvdGVjdGVkXHJcbiAgICAgKi9cclxuICAgIF9nZXRUb3RhbChyb2xsKSB7XHJcbiAgICAgICAgbGV0IGRlc2NyaXB0aW9uID0gcm9sbC5pc1N1Y2Nlc3MgPyAnU3VjY2VzcycgOiAnRmFpbHVyZSc7XHJcblxyXG4gICAgICAgIGlmIChyb2xsLmlzQ3JpdFN1Y2Nlc3MgfHwgcm9sbC5pc0NyaXRGYWlsKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbG9yID0gcm9sbC5pc0NyaXRTdWNjZXNzID8gJyMwMDg4MDAnIDogJyNERDAwMDAnO1xyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbiA9IGA8YiBzdHlsZT1cImNvbG9yOiR7Y29sb3J9XCI+Q3JpdGljYWwgJHtkZXNjcmlwdGlvbn08L2I+YDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBgJHtkZXNjcmlwdGlvbn0gYnkgJHtyb2xsLmlzU3VjY2VzcyA/IHJvbGwubWFyZ2luT2ZTdWNjZXNzIDogLXJvbGwubWFyZ2luT2ZTdWNjZXNzfWA7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVE9ETyBkZWZhdWx0IHRlbXBsYXRlIHdpdGggcm9sbCBtb2RzIHNob3VsZCBsb29rIGxpa2UgdGhpcyBhZnRlciAwLjcgaXMgcmVsZWFzZWQ6XHJcbiAgICAvLyBTdGVhbHRoLTEyICsyIC0xID0xM1xyXG4gICAgLy8gPG1vdXNlb3ZlciBjbGFzc2ljIHRvb2x0aXA+XHJcbiAgICAvLyBTdGVhbHRoLTEyXHJcbiAgICAvLyArMiB2ZXJ5IHNuZWFreSBzaG9lc1xyXG4gICAgLy8gLTEgcmF0dGxpbmcgY2hhaW4gbWFpbFxyXG4gICAgLy9cclxuICAgIC8vIDNkNiAgICAgICAgICA3XHJcbiAgICAvLyAzIDEgM1xyXG4gICAgLy8gPC9tb3VzZW92ZXIgY2xhc3NpYyB0b29sdGlwPlxyXG4gICAgLy8gPG9uLWNsaWNrIEZvdW5kcnkgdG9vbHRpcCB0aGF0IGV4cGFuZHMgYmV0d2VlbiBTdGVhbHRoLTEzIGFuZCBTdWNjZXNzL0ZhaWx1cmUgYnk+XHJcbiAgICAvLyBTdGVhbHRoLTEyXHJcbiAgICAvLyArMiB2ZXJ5IHNuZWFreSBzaG9lc1xyXG4gICAgLy8gLTEgcmF0dGxpbmcgY2hhaW4gbWFpbFxyXG4gICAgLy9cclxuICAgIC8vIDNkNiAgICAgICAgICA3XHJcbiAgICAvLyAzIDEgM1xyXG4gICAgLy8gPC9vbi1jbGljayBGb3VuZHJ5IHRvb2x0aXA+XHJcbiAgICAvLyBTdWNjZXNzIGJ5IDZcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwcm90ZWN0ZWRcclxuICAgICAqIEBwYXJhbSB7U3VjY2Vzc1JvbGx9IHJvbGxcclxuICAgICAqIEByZXR1cm4ge1N0cmluZ30gSFRNTCByZXByZXNlbnRpbmcgdGhlIG1vdXNlb3ZlciB0b29sdGlwIHRoYXQgaXMgdG9nZ2xlZCB3aGVuIHRoZSByb2xsIGZvcm11bGEgaW4gdGhlIHJlbmRlcmVkIHJvbGwgaXMgaG92ZXJlZCBvdmVyIHdpdGggdGhlIG1vdXNlIHBvaW50ZXIuXHJcbiAgICAgKi9cclxuICAgIF9nZXRNb3VzZW92ZXIocm9sbCkge1xyXG4gICAgICAgIGlmIChyb2xsLm1vZExpc3QubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHJvbGwubW9kTGlzdC5ldmVyeShtb2QgPT4gbW9kLmRlc2NyaXB0aW9uID09PSBudWxsIHx8IG1vZC5kZXNjcmlwdGlvbiA9PT0gdW5kZWZpbmVkIHx8IG1vZC5kZXNjcmlwdGlvbi5sZW5ndGggPT09IDApKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdWxTdHlsZSA9ICdsaXN0LXN0eWxlLXR5cGU6IG5vbmU7IG1hcmdpbjogMDsgcGFkZGluZzogMDsnO1xyXG4gICAgICAgIGNvbnN0IGxpU3R5bGUgPSAnbWFyZ2luOiAwOyBwYWRkaW5nOiAwOyBsaW5lLWhlaWdodDogMC45cmVtOyc7XHJcblxyXG4gICAgICAgIHJldHVybiBgPHVsIHN0eWxlPVwiJHt1bFN0eWxlfVwiPjxsaSBzdHlsZT1cIiR7bGlTdHlsZX1cIj4ke3RoaXMuX2dldEZvcm11bGFXaXRob3V0TW9kcyhyb2xsKX08L2xpPiR7cm9sbC5tb2RMaXN0Lm1hcChtb2QgPT4gYDxsaSBzdHlsZT1cIiR7bGlTdHlsZX1cIj4ke21vZC5tb2RpZmllcn0gJHttb2QuZGVzY3JpcHRpb259PC9saT5gKS5qb2luKCcnKX08L3VsPmA7XHJcbiAgICB9XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==