<form class="{{cssClass}} flexcol" autocomplete="off">

	<div id="sheet">

		{{!-- Sheet Header --}}
		<header class="sheet-header">

			<div id="personal">
				<div id="portrait">
					<img class="portrait" src="{{actor.img}}" data-edit="img" title="{{actor.name}}" />
				</div>
				<div id="actorname">
					<input class="charname" name="name" type="text" value="{{actor.name}}" placeholder="Name" />
				</div>
				<div id="racegender">
					<div>
						<div class="bold label right">
							<input type="text" name="data.bio.race.value"
								value="{{data.bio.race.value}}" placeholder="Race" />
						</div>
					</div>
                    <div>
                        <div class="bold label right">
                            <input type="text" name="data.bio.height.value"
                                   value="{{data.bio.height.value}}" placeholder="Height" />
                        </div>
                    </div>
                    <div>
                        <div class="bold label right">
							<span>SM:</span>
                            <input type="text" name="data.bio.sm.value"
                                   value="{{data.bio.sm.value}}" placeholder="Size Mod"
								   style="width: 80%;"/>
                        </div>
                    </div>
                    <div>
                        <div class="bold label right">
                            <input type="text" name="data.bio.gender.value"
                                   value="{{data.bio.gender.value}}" placeholder="Gender" />
                        </div>
                    </div>
                    <div>
                        <div class="bold label right">
                            <input type="text" name="data.bio.weight.value"
                                   value="{{data.bio.weight.value}}" placeholder="Weight" />
                        </div>
                    </div>
                    <div>
                        <div class="bold label right">
							<span>TL:</span>
                            <input type="text" name="data.bio.tl.value"
                                   value="{{data.bio.tl.value}}" placeholder="TL"
                                   style="width: 40%;"/>
							<span>Pts:</span>
                            <input type="text" name="data.bio.tl.points"
                                   value="{{data.bio.tl.points}}" placeholder="points"
                                   style="width: 40%;"/>
                        </div>
                    </div>
				</div>

				<!-- Here are the point reserves -->
				<div id="reserves" class="reserves-block">
					<div class="reserves-header">
						<label class="title">Cur</label>
						<label class="title">Max</label>
						<label class="title">Mod</label>
						<label class="title">Pts</label>
					</div>
					<div class="reserves">
						<label>{{data.reserves.hp.abbr}}</label>
						<input type="text" name="data.reserves.hp.value" class="atrVal" value="{{data.reserves.hp.value}}" data-dtype="Number"/>
						<input type="text" name="data.reserves.hp.max" class="atrVal" value="{{data.reserves.hp.max}}" data-dtype="Number" disabled />
						<input type="text" name="data.reserves.hp.mod" class="atrMod" value="{{data.reserves.hp.mod}}" data-dtype="Number" />
						<input type="text" name="data.reserves.hp.points" class="atrPoints" value="{{data.reserves.hp.points}}" data-dtype="Number" />

						<label>{{data.reserves.fp.abbr}}</label>
						<input type="text" name="data.reserves.fp.value" class="atrVal" value="{{data.reserves.fp.value}}" data-dtype="Number"/>
						<input type="text" name="data.reserves.fp.max" class="atrVal" value="{{data.reserves.fp.max}}" data-dtype="Number" disabled />
						<input type="text" name="data.reserves.fp.mod" class="atrMod" value="{{data.reserves.fp.mod}}" data-dtype="Number" />
						<input type="text" name="data.reserves.fp.points" class="atrPoints" value="{{data.reserves.fp.points}}" data-dtype="Number" />

						<label>{{data.reserves.er.abbr}}</label>
						<input type="text" name="data.reserves.er.value" class="atrVal" value="{{data.reserves.er.value}}" data-dtype="Number"/>
						<input type="text" name="data.reserves.er.max" class="atrVal" value="{{data.reserves.er.max}}" data-dtype="Number" disabled />
						<input type="text" name="data.reserves.er.mod" class="atrMod" value="{{data.reserves.er.mod}}" data-dtype="Number" />
						<input type="text" name="data.reserves.er.points" class="atrPoints" value="{{data.reserves.er.points}}" data-dtype="Number" />
					</div>
				</div>

				<div id="pointTotals">
					<table>
						<tr>
							<td class="">Total:</td>
							<td class="pointTotal">{{numberFormat data.points.total decimals=0}}</td>
						</tr>
						<tr>
							<td class="">Attributes:</td>
							<td class="pointTotal">{{numberFormat data.points.attributes decimals=0}}</td>
						</tr>
						<tr>
							<td class="">Traits:</td>
							<td class="pointTotal">{{numberFormat data.points.traits decimals=0}}</td>
						</tr>
						<tr>
							<td class="">Skills:</td>
							<td class="pointTotal">{{numberFormat data.points.skills decimals=0}}</td>
						</tr>
						<tr>
							<td class="">Unspent:</td>
							<td><input type="text" name="data.points.unspent" class="pointTotal unspentEntry" value="{{data.points.unspent}}" data-dtype="Number"/></td>
						</tr>
					</table>
				</div>
			</div>

		</header>

		{{!-- Sheet Tab Navigation --}}
		<nav id="tabselect" class="sheet-tabs tabs" data-group="primary">
				<div class="header">
						<a class="item" data-tab="stats">Main</a>
				</div>
				<div class="header">
						<a class="item" data-tab="traits">Advantages & Disadvantages</a>
				</div>
				<div class="header">
						<a class="item" data-tab="rollable">Skills & Techniques</a>
				</div>
				<div class="header">
						<a class="item" data-tab="combat">Combat</a>
				</div>
				<div class="header">
						<a class="item" data-tab="items">Items</a>
				</div>
		</nav>

		{{!-- Sheet Body --}}
		<section class="sheet-body">

			{{!-- Stats Tab --}}
			<div class="tab stats" data-tab="stats" data-group="primary">

				<div id="attributes_defences">
					<!-- Here are the primary attributes -->
					<div id="attribute-block">
                        <div class="primary-attribute-header" id="stHeader">
                            <label class="title">Val</label>
                            <label class="title">Mod</label>
                            <label class="title">Pts</label>
                        </div>
                        <div class="primary-attribute-header" id="dxHeader">
                            <label class="title">Val</label>
                            <label class="title">Mod</label>
                            <label class="title">Pts</label>
                        </div>
                        <div class="primary-attribute-header" id="iqHeader">
                            <label class="title">Val</label>
                            <label class="title">Mod</label>
                            <label class="title">Pts</label>
                        </div>
                        <div class="primary-attribute-header" id="htHeader">
                            <label class="title">Val</label>
                            <label class="title">Mod</label>
                            <label class="title">Pts</label>
                        </div>
						{{#each data.primaryAttributes as |attr id|}}
						<div class="primary-attribute" id="{{attr.id}}">
								<label style="font-weight: bold">{{attr.abbr}}</label>
								<input type="text" name="data.primaryAttributes.{{id}}.value" class="atrVal" value="{{attr.value}}"
									data-dtype="Number" disabled />
								<input type="text" name="data.primaryAttributes.{{id}}.mod" class="atrMod" value="{{attr.mod}}"
											 data-dtype="Number" />
								<input type="text" name="data.primaryAttributes.{{id}}.points" class="atrPoints" value="{{attr.points}}"
											 data-dtype="Number" />
							{{#unless (or (eq attr.abbr "Speed") (eq attr.abbr "Move") )}}
							<label for="data.primaryAttributes.{{id}}.value" class="fa fa-dice-six rollable"
										 data-level="{{attr.value}}" data-label="Makes a &lt;b&gt;{{attr.abbr}}&lt;/b&gt; check."
										 data-type="skill"></label>
							{{/unless}}
						</div>
						{{/each}}
					</div>
				</div>

				{{!-- Biography Tab --}}
				<div id="biography">
					<p>Notes</p>
					<textarea rows="13" name="data.biography">{{{data.biography}}}</textarea>
				</div>
			</div>

				{{!-- Traits Tab --}}
				<div id="traits" class="tab items" data-tab="traits" data-group="primary">
						<ol class="items-list">
								<li class="item flexrow item-header">
										<div class="item-image"></div>
										<div class="item-name">Name</div>
										<div class="item-notes">Notes</div>
										<div class="item-rolls">Skill</div>
										<div class="item-points">Points</div>
										<div class="item-controls">
												<!--<a class="item-control item-create" title="Create item" data-type="item"><i class="fas fa-plus"></i> Add</a>-->
										</div>
								</li>
								{{#each actor.items as |item id|}}
								{{#if (eq type "Trait") }}
								<li class="item flexrow" data-item-id="{{item._id}}">
									<div class="item-image">
										<img src="{{item.img}}" title="{{item.name}}" width="24" height="24" />
									</div>
									<div class="item-name">
											{{item.name}}
									</div>
									<div class="item-notes">
											{{data.notes}}
									</div>
									<div class="item-skill">
											<label for="data.level" class="fa fa-dice-six rollable" data-level="{{data.level}}"
														 data-label="Makes a &lt;b&gt;{{name}}&lt;/b&gt; roll." data-type="skill"></label>
											{{data.level}}
									</div>
									<div class="item-points">
										<div class="item-notes">
											{{data.points}}
										</div>
									</div>

									<div class="item-controls">
											<a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
											<a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
									</div>
								</li>
								{{/if}}
								{{/each}}
						</ol>
				</div>

			{{!-- Rollable Tab --}}
			<div id="rollable" class="tab items" data-tab="rollable" data-group="primary">
				<ol class="items-list">
					<li class="item flexrow item-header">
						<div class="item-image"></div>
						<div class="item-name">Skill</div>
						<div class="item-notes">Notes</div>
						<div class="item-points">Points</div>
						<div class="item-rolls">Skill</div>
						<div class="item-controls">
							<!--<a class="item-control item-create" title="Create item" data-type="item"><i class="fas fa-plus"></i> Add</a>-->
						</div>
					</li>
					{{#each actor.items as |item id|}}
					{{#if (and (eq type "Rollable") (eq data.category "skill")) }}
					<li class="item flexrow" data-item-id="{{item._id}}">
						<div class="item-image">
							<img src="{{item.img}}" title="{{item.name}}" width="24" height="24" />
						</div>
						<div class="item-name">
							{{item.name}}
						</div>
						<div class="item-notes">
							{{data.notes}}
						</div>
						<div class="item-points">
							<div class="item-notes">
								{{data.points}}
							</div>
						</div>
						<div class="item-skill">
							<label for="data.level" class="fa fa-dice-six rollable" data-level="{{data.level}}"
								   data-label="Makes a &lt;b&gt;{{name}}&lt;/b&gt; roll." data-type="skill"></label>
							{{data.level}}
						</div>
						<div class="item-controls">
							<a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
							<a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
						</div>
					</li>
					{{/if}}
					{{/each}}
				</ol>
				<ol class="items-list">
					<li class="item flexrow item-header">
						<div class="item-image"></div>
						<div class="item-name">Technique</div>
						<div class="item-notes">Notes</div>
						<div class="item-points">Points</div>
						<div class="item-rolls">Skill</div>
						<div class="item-controls">
							<!--<a class="item-control item-create" title="Create item" data-type="item"><i class="fas fa-plus"></i> Add</a>-->
						</div>
					</li>
					{{#each actor.items as |item id|}}
					{{#if (and (eq type "Rollable") (eq data.category "technique")) }}
					<li class="item flexrow" data-item-id="{{item._id}}">
						<div class="item-image">
							<img src="{{item.img}}" title="{{item.name}}" width="24" height="24" />
						</div>
						<div class="item-name">
							{{item.name}}
						</div>
						<div class="item-notes">
							{{data.notes}}
						</div>
						<div class="item-points">
							<div class="item-notes">
								{{data.points}}
							</div>
						</div>
						<div class="item-skill">
							<label for="data.level" class="fa fa-dice-six rollable" data-level="{{data.level}}"
								   data-label="Makes a &lt;b&gt;{{name}}&lt;/b&gt; roll." data-type="skill"></label>
							{{data.level}}
						</div>
						<div class="item-controls">
							<a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
							<a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
						</div>
					</li>
					{{/if}}
					{{/each}}
				</ol>
			</div>

			{{!-- Combat Tab --}}
			<div id="weapons" class="tab items" data-tab="combat" data-group="primary">
				<div class="encumbranceTable">
					<table>
						<tr class="bold">
							<td class="title">Level</td><td class="title">Max Load</td><td class="title">Move</td><td class="title">Dodge</td>
						</tr>
						{{#each data.encumbrance as |enc id|}}
						<tr>
							<td>{{enc.title}}</td>
							<td>{{enc.lbs}}</td>
							<td>{{enc.move}}</td>
							<td>{{enc.dodge}}
								<label for="enc.dodge" class="fa fa-dice-six rollable" data-level="{{enc.dodge}}"
									   data-label="Makes a &lt;b&gt;Dodge&lt;/b&gt; roll." data-type="skill"></label>
							</td>
						</tr>
						{{/each}}
					</table>
				</div>
				<ol class="items-list">
					<li class="item flexrow item-header">
						<div class="item-image"></div>
						<div class="item-name">Name</div>
						<div class="item-notes">Notes</div>
						<div class="item-rolls">Skill - - Damage - - ArmDiv</div>
						<div class="item-controls">
							<!--<a class="item-control item-create" title="Create item" data-type="item"><i class="fas fa-plus"></i> Add</a>-->
						</div>
					</li>
					{{#each actor.items as |item id|}}
					{{#if (or (eq type "Melee-Attack") (eq type "Ranged-Attack") ) }}
					<li class="item flexrow" data-item-id="{{item._id}}">
						<div class="item-image"><img src="{{item.img}}" title="{{item.name}}" width="24" height="24" /></div>
						<div class="item-name">
							<input type="text" value="{{item.name}}" title="{{item.name}}" style="text-align:left;" />
						</div>
						<div class="item-notes">
							<input type="text" value="{{data.notes}}" title="{{data.notes}}" style="text-align:left;" />
						</div>
						{{#if (ne data.level undefined)}}
						{{#if (or (eq type "Melee-Attack") (eq type "Ranged-Attack") ) }}
						<div class="item-attack">
							<label for="data.level" class="fa fa-dice-six rollable" data-level="{{data.level}}"
								data-label="Attacks with &lt;b&gt;{{name}}&lt;/b&gt;." data-type="skill"></label>
							{{data.level}} -
							- <label for="data.damage" class="fa fa-dice-six rollable" data-roll="{{data.damage}}"
								data-label="Rolls &lt;b&gt;{{data.damageType}}&lt;/b&gt; damage for &lt;b&gt;{{name}}&lt;/b&gt;."
								data-type="damage"></label>
							{{data.damage}}
							<label>{{data.damageType}} -</label>
							<label>- /{{data.armourDiv}}</label>
						</div>
						{{else}}
						<div class="item-skill">
							<label for="data.level" class="fa fa-dice-six rollable" data-level="{{data.level}}"
								data-label="Makes a &lt;b&gt;{{name}}&lt;/b&gt; roll." data-type="skill"></label>
							{{data.level}}
						</div>
						{{/if}}
						{{else}}
						<div></div>
						{{/if}}
						<div class="item-controls">
							<a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
							<a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
						</div>
					</li>
					{{/if}}
					{{/each}}
				</ol>
			</div>

			{{!-- Items Tab --}}
			<div id="items" class="tab items" data-tab="items" data-group="primary">
				<div class="encumbranceTable">
					<table>
						<tr class="bold">
							<td class="title">Level</td><td class="title">Max Load</td><td class="title">Move</td><td class="title">Dodge</td>
						</tr>
						{{#each data.encumbrance as |enc id|}}
						<tr>
							<td>{{enc.title}}</td>
							<td>{{enc.lbs}}</td>
							<td>{{enc.move}}</td>
							<td>{{enc.dodge}}
								<label for="enc.dodge" class="fa fa-dice-six rollable" data-level="{{enc.dodge}}"
								   data-label="Makes a &lt;b&gt;Dodge&lt;/b&gt; roll." data-type="skill"></label>
							</td>
						</tr>
						{{/each}}
					</table>
				</div>
				{{!-- List of Items --}}
				<ol class="items-list">
					<li class="item-row bold">
						<div class="item-image"></div>
						<div class="item-name">Name</div>
						<div class="item-notes">Notes</div>
						<div class="item-title">TL</div>
						<div class="item-title">LC</div>
						<div class="item-title">Qty</div>
						<div class="item-title">lbs</div>
						<div class="item-title">$</div>
						<div class="item-title">Status</div>
						<div class="item-controls">
							<!--<a class="item-control item-create" title="Create item" data-type="item"><i class="fas fa-plus"></i> Add</a>-->
						</div>
					</li>
					{{#each actor.items as |item id|}}
					{{#if (eq type "Equipment") }}
					<li class="item-row item" data-item-id="{{item._id}}">
						<div class="item-image"><img src="{{item.img}}" title="{{item.name}}" width="24" height="24" /></div>
						<div class="item-name"><span>{{item.name}}</span></div>
						<div class="item-notes"><span>{{data.notes}}</span></div>
						<div><span>{{data.tl}}</span></div>
						<div><span>{{data.lc}}</span></div>
						<div><span>{{data.quantity}}</span></div>
						<div><span>{{data.ttlCost}}</span></div>
						<div><span>{{data.ttlWeight}}</span></div>
						<div><span>{{data.equipStatus}}</span></div>
						<div class="item-controls">
							<a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
							<a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
						</div>
					</li>
					{{/if}}
					{{/each}}

					<li class="item-row item">
						<div class="item-image"></div>
						<div class="item-name"><span></span></div>
						<div class="item-notes"><span></span></div>
						<div><span></span></div>
						<div><span></span></div>
						<div><span>Total:</span></div>
						<div><span>{{data.ttlCost}}</span></div>
						<div><span>{{data.ttlWeight}}</span></div>
						<div><span></span></div>
						<div class="item-controls"></div>
					</li>

				</ol>
			</div>
		</section>
	</div>
</form>
