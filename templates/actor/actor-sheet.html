<form class="{{cssClass}} flexcol" autocomplete="off">

	<div id="sheet">

		{{!-- Sheet Header --}}
		<header class="sheet-header">

			<div id="personal">
				<div id="portrait">
					<img class="portrait" src="{{actor.img}}" data-edit="img" title="{{actor.name}}" />
				</div>
				<div id="actorname">
					<input class="charname" name="name" type="text" value="{{actor.name}}" placeholder="Name" />
				</div>
				<div id="racegender">
					<div>
						<div class="bold label right">
							<input type="text" name="data.bio.race.value"
								value="{{data.bio.race.value}}" placeholder="Race" />
						</div>
					</div>
                    <div>
                        <div class="bold label right">
                            <input type="text" name="data.bio.height.value"
                                   value="{{data.bio.height.value}}" placeholder="Height" />
                        </div>
                    </div>
                    <div>
                        <div class="bold label right">
							<span>SM:</span>
                            <input type="text" name="data.bio.sm.value"
                                   value="{{data.bio.sm.value}}" placeholder="Size Mod"
								   style="width: 80%;"/>
                        </div>
                    </div>
                    <div>
                        <div class="bold label right">
                            <input type="text" name="data.bio.gender.value"
                                   value="{{data.bio.gender.value}}" placeholder="Gender" />
                        </div>
                    </div>
                    <div>
                        <div class="bold label right">
                            <input type="text" name="data.bio.weight.value"
                                   value="{{data.bio.weight.value}}" placeholder="Weight" />
                        </div>
                    </div>
                    <div>
                        <div class="bold label right">
							<span>TL:</span>
                            <input type="text" name="data.bio.tl.value"
                                   value="{{data.bio.tl.value}}" placeholder="TL"
                                   style="width: 40%;"/>
							<span>Pts:</span>
                            <input type="text" name="data.bio.tl.points"
                                   value="{{data.bio.tl.points}}" placeholder="points"
                                   style="width: 40%;"/>
                        </div>
                    </div>
				</div>

				<!-- Here are the point reserves -->
				<div id="reserves" class="reserves-block">
					<div class="reserves-header">
						<label class="title">Cur</label>
						<label class="title">Max</label>
						<label class="title">Mod</label>
						<label class="title">Pts</label>
					</div>
					<div class="reserves">
						<label>{{data.reserves.hp.abbr}}</label>
						<input type="text" name="data.reserves.hp.value" class="atrVal" value="{{data.reserves.hp.value}}" data-dtype="Number"/>
						<input type="text" name="data.reserves.hp.max" class="atrVal" value="{{data.reserves.hp.max}}" data-dtype="Number" disabled />
						<input type="text" name="data.reserves.hp.mod" class="atrMod" value="{{data.reserves.hp.mod}}" data-dtype="Number" />
						<input type="text" name="data.reserves.hp.points" class="atrPoints" value="{{data.reserves.hp.points}}" data-dtype="Number" />

						<label>{{data.reserves.fp.abbr}}</label>
						<input type="text" name="data.reserves.fp.value" class="atrVal" value="{{data.reserves.fp.value}}" data-dtype="Number"/>
						<input type="text" name="data.reserves.fp.max" class="atrVal" value="{{data.reserves.fp.max}}" data-dtype="Number" disabled />
						<input type="text" name="data.reserves.fp.mod" class="atrMod" value="{{data.reserves.fp.mod}}" data-dtype="Number" />
						<input type="text" name="data.reserves.fp.points" class="atrPoints" value="{{data.reserves.fp.points}}" data-dtype="Number" />

						<label>{{data.reserves.er.abbr}}</label>
						<input type="text" name="data.reserves.er.value" class="atrVal" value="{{data.reserves.er.value}}" data-dtype="Number"/>
						<input type="text" name="data.reserves.er.max" class="atrVal" value="{{data.reserves.er.max}}" data-dtype="Number" disabled />
						<input type="text" name="data.reserves.er.mod" class="atrMod" value="{{data.reserves.er.mod}}" data-dtype="Number" />
						<input type="text" name="data.reserves.er.points" class="atrPoints" value="{{data.reserves.er.points}}" data-dtype="Number" />
					</div>
				</div>

				<div id="pointTotals">
					<table>
						<tr>
							<td class="">Total:</td>
							<td class="pointTotal">{{numberFormat data.points.total decimals=0}}</td>
						</tr>
						<tr>
							<td class="">Attributes:</td>
							<td class="pointTotal">{{numberFormat data.points.attributes decimals=0}}</td>
						</tr>
						<tr>
							<td class="">Traits:</td>
							<td class="pointTotal">{{numberFormat data.points.traits decimals=0}}</td>
						</tr>
						<tr>
							<td class="">Skills:</td>
							<td class="pointTotal">{{numberFormat data.points.skills decimals=0}}</td>
						</tr>
						<tr>
							<td class="">Unspent:</td>
							<td><input type="text" name="data.points.unspent" class="pointTotal unspentEntry" value="{{data.points.unspent}}" data-dtype="Number"/></td>
						</tr>
					</table>
				</div>
			</div>

		</header>

		{{!-- Sheet Tab Navigation --}}
		<nav id="tabselect" class="sheet-tabs tabs" data-group="primary">
				<div class="header">
						<a class="item" data-tab="stats">Main</a>
				</div>
				<div class="header">
						<a class="item" data-tab="traits">Advantages & Disadvantages</a>
				</div>
				<div class="header">
						<a class="item" data-tab="rollable">Skills & Techniques</a>
				</div>
				<div class="header">
						<a class="item" data-tab="combat">Combat</a>
				</div>
				<div class="header">
						<a class="item" data-tab="items">Items</a>
				</div>
		</nav>

		{{!-- Sheet Body --}}
		<section class="sheet-body">

			{{!-- Stats Tab --}}
			<div class="tab stats" data-tab="stats" data-group="primary">

				<div id="attributes_defences">
					<!-- Here are the primary attributes -->
					<div id="attribute-block">
                        <div class="primary-attribute-header" id="stHeader">
                            <label class="title">Val</label>
                            <label class="title">Mod</label>
                            <label class="title">Pts</label>
                        </div>
                        <div class="primary-attribute-header" id="dxHeader">
                            <label class="title">Val</label>
                            <label class="title">Mod</label>
                            <label class="title">Pts</label>
                        </div>
                        <div class="primary-attribute-header" id="iqHeader">
                            <label class="title">Val</label>
                            <label class="title">Mod</label>
                            <label class="title">Pts</label>
                        </div>
                        <div class="primary-attribute-header" id="htHeader">
                            <label class="title">Val</label>
                            <label class="title">Mod</label>
                            <label class="title">Pts</label>
                        </div>
						{{#each data.primaryAttributes as |attr id|}}
						<div class="primary-attribute" id="{{attr.id}}">
								<label style="font-weight: bold">{{attr.abbr}}</label>
								<input type="text" name="data.primaryAttributes.{{id}}.value" class="atrVal" value="{{attr.value}}"
									data-dtype="Number" disabled />
								<input type="text" name="data.primaryAttributes.{{id}}.mod" class="atrMod" value="{{attr.mod}}"
											 data-dtype="Number" />
								<input type="text" name="data.primaryAttributes.{{id}}.points" class="atrPoints" value="{{attr.points}}"
											 data-dtype="Number" />
							{{#unless (or (eq attr.abbr "Speed") (eq attr.abbr "Move") )}}
							<label for="data.primaryAttributes.{{id}}.value" class="fa fa-dice-six rollable"
										 data-level="{{attr.value}}" data-label="Makes a &lt;b&gt;{{attr.abbr}}&lt;/b&gt; check."
										 data-type="skill"></label>
							{{/unless}}
						</div>
						{{/each}}
					</div>
				</div>

				{{!-- Biography Tab --}}
				<div id="biography">
					<p>Notes</p>
					<textarea rows="13" name="data.biography">{{{data.biography}}}</textarea>
				</div>
			</div>

				{{!-- Traits Tab --}}
				<div id="traits" class="tab items" data-tab="traits" data-group="primary">
						<table class="items-list">
								<tr class="item item-header">
										<td class="item-image"></td>
										<td class="item-name">Name</td>
										<td class="item-notes">Notes</td>
										<td class="item-rolls">Roll</td>
										<td class="item-points">Points</td>
										<td class="item-controls"></td>
								</tr>
								{{#each actor.items as |item id|}}
								{{#if (eq type "Trait") }}
								<tr class="item" data-item-id="{{item._id}}">
									<td class="item-image" style="width: 24px; padding: 0 2px">
										<img src="{{item.img}}" title="{{item.name}}" width="24" height="24" />
									</td>
									<td class="item-name">
											{{item.name}}
									</td>
									<td class="item-notes">
											{{data.shortNotes}}
									</td>
									<td class="item-skill" style="width: 3em;">
										{{#if (isInt data.level)}}
											{{#if data.level}}
												<label for="data.level" class="fa fa-dice-six rollable" data-level="{{data.level}}"
														 data-label="Makes a &lt;b&gt;{{name}}&lt;/b&gt; roll." data-type="skill"></label>
												{{data.level}}
											{{/if}}
										{{/if}}
									</td>
									<td class="item-points" style="width: 4em;">
										<div class="item-notes">
											{{data.points}}
										</div>
									</td>

									<td class="item-controls" style="width: 30px;">
											<a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
											<a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
									</td>
								</tr>
								{{/if}}
								{{/each}}
						</table>
				</div>

			{{!-- Rollable Tab --}}
			<div id="rollable" class="tab items" data-tab="rollable" data-group="primary">
				<table class="items-list">
					<tr class="item item-header">
						<td class="item-image"></td>
						<td class="item-name">Skill</td>
						<td class="item-notes">Notes</td>
						<td class="item-points">Points</td>
						<td class="item-rolls">Skill</td>
						<td class="item-controls">
							<!--<a class="item-control item-create" title="Create item" data-type="item"><i class="fas fa-plus"></i> Add</a>-->
						</td>
					</tr>
					{{#each actor.items as |item id|}}
					{{#if (and (eq type "Rollable") (eq data.category "skill")) }}
					<tr class="item" data-item-id="{{item._id}}">
						<td class="item-image" style="width: 24px; padding: 0 2px">
							<img src="{{item.img}}" title="{{item.name}}" width="24" height="24" />
						</td>
						<td class="item-name">
							{{item.name}}
						</td>
						<td class="item-notes">
							{{data.shortNotes}}
						</td>
						<td class="item-points" style="width: 4em;">
							{{data.points}}
						</td>
						<td class="item-skill" style="width: 3em;">
							<label for="data.level" class="fa fa-dice-six rollable" data-level="{{data.level}}"
								   data-label="Makes a &lt;b&gt;{{name}}&lt;/b&gt; roll." data-type="skill"></label>
							{{data.level}}
						</td>
						<td class="item-controls" style="width: 30px;">
							<a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
							<a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
						</td>
					</tr>
					{{/if}}
					{{/each}}
				</table>
				<table class="items-list">
					<tr class="item item-header">
						<td class="item-image"></td>
						<td class="item-name">Technique</td>
						<td class="item-notes">Notes</td>
						<td class="item-points">Points</td>
						<td class="item-rolls">Skill</td>
						<td class="item-controls">
							<!--<a class="item-control item-create" title="Create item" data-type="item"><i class="fas fa-plus"></i> Add</a>-->
						</td>
					</tr>
					{{#each actor.items as |item id|}}
					{{#if (and (eq type "Rollable") (eq data.category "technique")) }}
					<tr class="item" data-item-id="{{item._id}}">
						<td class="item-image" style="width: 24px; padding: 0 2px">
							<img src="{{item.img}}" title="{{item.name}}" width="24" height="24" />
						</td>
						<td class="item-name">
							{{item.name}}
						</td>
						<td class="item-notes">
							{{data.shortNotes}}
						</td>
						<td class="item-points" style="width: 4em;">
							{{data.points}}
						</td>
						<td class="item-skill" style="width: 3em;">
							<label for="data.level" class="fa fa-dice-six rollable" data-level="{{data.level}}"
								   data-label="Makes a &lt;b&gt;{{name}}&lt;/b&gt; roll." data-type="skill"></label>
							{{data.level}}
						</td>
						<td class="item-controls" style="width: 30px;">
							<a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
							<a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
						</td>
					</tr>
					{{/if}}
					{{/each}}
				</table>
			</div>

			{{!-- Combat Tab --}}
			<div id="weapons" class="tab items" data-tab="combat" data-group="primary">
				<div class="encumbranceTable">
					<table>
						<tr class="enc-header">
							<td>Level</td><td>Max Load</td><td>Move</td><td>Dodge</td>
						</tr>
						{{#each data.encumbrance as |enc id|}}
						<tr class="enc-entry">
							<td>{{enc.title}}</td>
							<td>{{enc.lbs}}</td>
							<td>{{enc.move}}</td>
							<td>{{enc.dodge}}
								<label for="enc.dodge" class="fa fa-dice-six rollable" data-level="{{enc.dodge}}"
									   data-label="Makes a &lt;b&gt;Dodge&lt;/b&gt; roll." data-type="skill"></label>
							</td>
						</tr>
						{{/each}}
					</table>
					<div>
						<div>
							<span class="bold">Swing:</span> {{data.baseDamage.swing}}
						</div>
						<div>
							<span class="bold">Thrust:</span> {{data.baseDamage.thrust}}
						</div>
					</div>
				</div>
				<table class="items-list">
					<tr class="bold">
						<td>Item</td>
						<td>Attack</td>
						<td>Skill</td>
						<td>Parry</td>
						<td>Block</td>
						<td>Damage</td>
						<td>Reach</td>
						<td>ST</td>
					</tr>
					{{#each actor.items as |item id|}}
					{{#each item.data.melee as |melee mid|}}
					<tr>
						<td>{{item.name}}</td>
						<td>{{melee.name}}</td>
						<td>
							{{melee.skill}}: {{melee.level}}
							<label for="melee.skill" class="fa fa-dice-six rollable" data-level="{{melee.level}}"
								   data-label="Makes a &lt;b&gt;{{item.name}} {{melee.name}}&lt;/b&gt; Skill roll." data-type="skill"></label>
						</td>
						<td>
							{{melee.parry}}{{melee.parryType}}
							{{#if (isInt melee.parry)}}
							<label for="melee.parry" class="fa fa-dice-six rollable" data-level="{{melee.parry}}"
								   data-label="Makes a &lt;b&gt;{{item.name}}&lt;/b&gt; Parry roll." data-type="skill"></label>
							{{/if}}
						</td>
						<td>
							{{melee.block}}
							{{#if (isInt melee.block)}}
							<label for="melee.block" class="fa fa-dice-six rollable" data-level="{{melee.block}}"
								   data-label="&lt;b&gt;{{item.name}}&lt;/b&gt; Block roll." data-type="skill"></label>
							{{/if}}
						</td>
						<td>
							{{melee.damage}} {{melee.damageType}} ({{melee.armorDivisor}})
							<label for="melee.damage" class="fa fa-dice-six rollable" data-level="{{melee.damage}}"
								   data-label="Makes a &lt;b&gt;{{item.name}} {{melee.name}}&lt;/b&gt; Damage roll." data-type="damage"></label>
						</td>
						<td>{{melee.reach}}</td>
						<td>{{melee.st}}</td>
					</tr>
					{{/each}}
					{{/each}}
				</table>
				<table class="items-list">
					<tr class="bold">
						<td>Item</td>
						<td>Attack</td>
						<td>Skill</td>
						<td>Acc</td>
						<td>Damage</td>
						<td>Range</td>
						<td>Rof</td>
						<td>Shots</td>
						<td>Bulk</td>
						<td>Rcl</td>
						<td>ST</td>
					</tr>
					{{#each actor.items as |item id|}}
					{{#each item.data.ranged as |ranged rid|}}
					<tr>
						<td>{{item.name}}</td>
						<td>{{ranged.name}}</td>
						<td>
							{{ranged.skill}}: {{ranged.level}}
							<label for="ranged.skill" class="fa fa-dice-six rollable" data-level="{{ranged.level}}"
								   data-label="Makes a &lt;b&gt;{{item.name}} {{ranged.name}}&lt;/b&gt; Skill roll." data-type="skill"></label>
						</td>
						<td>{{ranged.acc}}</td>
						<td>
							{{ranged.damage}} {{ranged.damageType}} ({{ranged.armorDivisor}})
							<label for="ranged.damage" class="fa fa-dice-six rollable" data-level="{{ranged.damage}}"
								   data-label="Makes a &lt;b&gt;{{item.name}} {{ranged.name}}&lt;/b&gt; Damage roll." data-type="damage"></label>
						</td>
						<td>{{ranged.range}}</td>
						<td>{{ranged.rof}}</td>
						<td>{{ranged.shots}}</td>
						<td>{{ranged.bulk}}</td>
						<td>{{ranged.rcl}}</td>
						<td>{{ranged.st}}</td>
					</tr>
					{{/each}}
					{{/each}}
				</table>
			</div>

			{{!-- Items Tab --}}
			<div id="items" class="tab items" data-tab="items" data-group="primary">
				{{!-- List of Items --}}
				<ol class="items-list">
					<li class="item-row bold">
						<div class="item-image"></div>
						<div class="item-name">Name</div>
						<div class="item-notes">Notes</div>
						<div class="item-title">TL</div>
						<div class="item-title">LC</div>
						<div class="item-title">Qty</div>
						<div class="item-title">$</div>
						<div class="item-title">lbs</div>
						<div class="item-title">Status</div>
						<div class="item-controls">
							<!--<a class="item-control item-create" title="Create item" data-type="item"><i class="fas fa-plus"></i> Add</a>-->
						</div>
					</li>
					{{#each actor.items as |item id|}}
					{{#if (eq type "Equipment") }}
					<li class="item-row item" data-item-id="{{item._id}}">
						<div class="item-image"><img src="{{item.img}}" title="{{item.name}}" width="24" height="24" /></div>
						<div class="item-name"><span>{{item.name}}</span></div>
						<div class="item-notes"><span>{{item.data.notes}}</span></div>
						<div><span>{{item.data.tl}}</span></div>
						<div><span>{{item.data.lc}}</span></div>
						<div><span>{{item.data.quantity}}</span></div>
						<div><span>{{item.data.ttlCost}}</span></div>
						<div><span>{{item.data.ttlWeight}}</span></div>
						<div><span>{{item.data.equipStatus}}</span></div>
						<div class="item-controls">
							<a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
							<a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
						</div>
					</li>
					{{/if}}
					{{/each}}
					<li class="item-row item">
						<div class="item-image"></div>
						<div class="item-name"><span></span></div>
						<div class="item-notes"><span></span></div>
						<div><span></span></div>
						<div><span></span></div>
						<div><span>Total:</span></div>
						<div><span>{{actor.data.bio.carriedValue}}</span></div>
						<div><span>{{actor.data.bio.carriedWeight}}</span></div>
						<div><span></span></div>
						<div class="item-controls"></div>
					</li>

				</ol>
			</div>
		</section>
	</div>
</form>